{"version":3,"sources":["game/cards sync /^/.*/.jpg$","game/cards/cardback.jpg","game/playerArea/iconFooter/icons/contract.png","game/playerArea/iconFooter/icons/deck.png","game/playerArea/iconFooter/icons/hand.png","game/playerArea/iconFooter/icons/love.png","game/playerArea/iconFooter/icons/servings.png","game/playerArea/iconFooter/icons/trash.png","game/playerArea/iconFooter/icons sync /^/.*$","game/cards/1Love.jpg","game/cards/2Love.jpg","game/cards/3Love.jpg","game/cards/set1/AmberTwilight.jpg","game/cards/set1/AniseGreenaway.jpg","game/cards/set1/AzureCrescent.jpg","game/cards/set1/BadHabit.jpg","game/cards/set1/ClaireSaintJuste.jpg","game/cards/set1/ColetteFramboise.jpg","game/cards/set1/ElizaRosewater.jpg","game/cards/set1/EsquineForet.jpg","game/cards/set1/EugenieFontaine.jpg","game/cards/set1/FayLongfang.jpg","game/cards/set1/GenevieveDaubigny.jpg","game/cards/set1/Illness.jpg","game/cards/set1/KagariIchinomiya.jpg","game/cards/set1/LalandeDreyfus.jpg","game/cards/set1/LucienneDeMarlboro.jpg","game/cards/set1/MarianneSoleil.jpg","game/cards/set1/MillyViolet.jpg","game/cards/set1/MoineDeLefevre.jpg","game/cards/set1/NatsumiFujikawa.jpg","game/cards/set1/NenaWilder.jpg","game/cards/set1/NordTwilight.jpg","game/cards/set1/OpheliaGrail.jpg","game/cards/set1/RosaTopaz.jpg","game/cards/set1/RougeCrescent.jpg","game/cards/set1/SafranVirginie.jpg","game/cards/set1/SainsburyLockwood.jpg","game/cards/set1/SoraNakachi.jpg","game/cards/set1/TanyaPetrushka.jpg","game/cards/set1/TenalysTrent.jpg","game/cards/set1/ViolaCrescent.jpg","game/playerArea/iconFooter/icons sync /^/.*/.png$","game/field/CardBlock.js","game/cardData/love.js","game/playerArea/playerZones/helpers/dataUpdates.js","game/cardData/set1Functions.js","game/cardData/set1ChamberFuncs.js","game/cardData/vpFunctions.js","game/cardData/set1.js","game/cardData/privateMaidFunctions.js","game/cardData/privateMaids.js","game/helpers/actions.js","game/field/Field.js","game/messageArea/MessageArea.js","game/imageArea/ImageArea.js","game/cardDisplayModal/defaultStyle.js","game/cardDisplayModal/CardDisplayModal.js","game/playerArea/playerZones/PlayZone.js","game/playerArea/playerZones/handZone/playerActions.js","game/playerArea/playerZones/handZone/HandZone.js","game/cardDisplayModal/PrivateMaidsDisplay.js","game/playerArea/playerZones/ChamberZone.js","game/playerArea/playerZones/DeckZone.js","game/playerArea/iconFooter/IconFooter.js","game/playerArea/MainPlayer.js","game/playerArea/OppZones.js","game/MainGame.js","game/cardDisplayModal/SingleCardModal.js","game/cardDisplayModal/ResultsModal.js","game/initialData.js","game/ConnexionGame.js","game/field/CityGenerator.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","CardBlock","props","context","card","name","set","quantity","selected","type","route","buyable","selectable","cardClick","selectCard","className","style","position","alt","src","require","cursor","title","undefined","onMouseOver","updateImage","onMouseOut","onClick","borderRight","disabled","borderLeft","visibility","contextTypes","PropTypes","func","love","cost","getChamberMaid","inst","mehCard","add","getTrueData","setState","prevState","newMaids","_","cloneDeep","chamberMaids","idx","findIndex","item","attachments","chambered","filter","foo","i","push","updateMessage","parentState","playerName","getAttachment","data","maidIdx","isPrivate","remove","cards","Array","isArray","privateMaids","boughtPrivateMaids","addOrRemove","maid","newIdx","same","list1","list2","namelist1","namelist2","isEqual","hasSameAttachments","list","length","getVP","discard","state","hasPoints","vp","hasIllness","chamberCards","pointMaids","result","forEach","inDeck","parseDiscard","maids","points","reduce","a","b","getPrivatePoints","getMaidPoints","forcedDiscard","handSelection","prevMessages","discardIdx","hand","playerState","updateParent","updatePlayer","webrtc","shout","setActions","selectionOn","healIllness","message","city","illIdx","ElizaFinish","gameState","freeChambersToo","playerClick","showSCModal","playFuncs","Sainsbury","button2Text","money","contract","restrType","restrName","sendTo","loveIdx","sendToHand","Esquine","button2Click","newHand","servings","includes","getServings","Tenalys","actionTenalys","drawAndReload","Natsumi","actionNatsumi","Claire","illnessClick","c","d","ClaireDefend","prevActions","button1Text","button1Click","Eliza","oppName","opp","opponents","find","deck","scModalData","imgRoute","yesFunc","whisper","peer","draw","discarded","noFunc","getSCModal","ElizaDiscard","Nena","turnOrder","playerIdx","turnNum","bhIdx","bhLeft","opp1","checkChamberMaids","opp2","eventFuncs","Illness","threeLove","restricIllness","vpFuncs","Ophelia","Safran","r","Math","floor","BadHabit","Rouge","chamber","Viola","AzureCrescent","numRouge","RougeCrescent","min","Azure","allNums","ViolaCrescent","minThree","pairNums","num","minTwo","Colette","oppColettes","chamberColettes","deckColettes","getColettes","total","max","set1Fixed","attachTo","onStart","restric","chamberCost","set1Maids","onPlay","forcedAction","onDefend","increaseParam","param","noUpdate","getHandRandom","random","EugenieFinish","functions","Lucienne","hasPlayables","Rosa","Fay","Lalande","usadaJoder","Milly","cb","Tanya","Nord","newDiscards","maidClick","numIll","count","sendIllness","discardAndTarget","Sora","eventClick","attachEvent","backToStart","removeAndTarget","Amber","amount","finishTurn","Eugenie","oppRandom","playerRandom","funcData","getModal","actionEugenie","newCard","onOppDiscard","auto","onDraw","shuffle","array","temporaryValue","randomIndex","currentIndex","getAttachInfo","removePendingAttach","removed","attachmentsLeft","left","newTurn","msgTitle","checkGameFinish","soldOut","playedCards","setTimeout","getResults","finishGame","Field","updateCard","index","mode","switchCard","privateSelectedTwice","sign","lovePaid","cardsOrdered","buyCards","event","sendToFunc","boughtCards","hasEvents","getBuyMsg","buyPrivateMaid","getPrivateMaid","updatePeers","sendToDiscard","bought","parsedMsg","split","msg","end","newDiscard","cardBack","newCity","newPrivateMaids","backIndex","isSelectable","hasChamberMaids","picking","nextProps","nextContext","this","getDeck","mainPlayer","buying","float","marginLeft","players","getTurnOrder","showResultsModal","React","Component","object","MessageArea","getMessage","ImageArea","display","width","maxWidth","margin","userSelect","defaultStyle","overlay","top","right","bottom","backgroundColor","content","height","border","overflow","WebkitOverflowScrolling","borderRadius","outline","padding","paddingTop","privateMaidsStyle","CardDisplayModal","showModal","hideModal","background","extraCmp","extraClass","maxAttach","attachNums","getMaxAttachment","isOpen","onRequestClose","ariaHideApp","cardIdx","AttachmentsDisplay","getImage","getRoute","getSelectInfo","info","marginTop","renderCard","selectInfo","imageClass","attach","selecting","chamberCard","clickable","PlayZone","show","oppCards","limit","config","servingPhase","loveCards","contractPhase","discardPhase","endTurn","discardAction","bullyOpp","oppMaid","getDiscardAction","opponentTurn","gameEnded","startPhase","HandZone","button1","button2","getCardPlay","selection","handSelect","msgButton","cardPlay","cardChamber","currentMaid","getCurrentMaid","newState","change","play","space","zIndex","PrivateMaidsDisplay","getDisplayedMaids","displayedMaids","getCardImage","topMaid","ChamberZone","defend","defensor","playerRes","results","getHealthyMaid","illness","getExtra","stopPropagation","hasAttachments","topAttachment","getDefend","prevProps","oldState","oppIdx","displayLimit","hasMaids","hasBorder","DeckZone","pileName","deckVisible","discardTop","marginBottom","reverse","IconFooter","firstLeft","image","value","serviceStates","MainPlayer","drawCards","splice","getRightFooter","getLeftFooter","getInitialHand","getForcedAction","handleAction","checkMaids","circleOn","playerClass","circleClick","childContextTypes","getIconStructure","iconData","firstTop","MainGame","imageName","SingleCardModal","colors","color","fontSize","initialDeck","ColetteFramboise","initialOppData","ConnexionGame","getInitialDeck","sendToDeck","join","joinRoom","onJoin","console","log","getPeerData","webrtcBad","payload","getOpp","newOpps","slice","key","sort","privateMaidsDeck","initiateCity","options","debug","dataOnly","onReady","onReceivedPeerData","onJoinedRoom","App","getGameMenu","getNameMenu","onChange","target","start","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.189817ef.chunk.js","sourcesContent":["var map = {\n\t\"./1Love.jpg\": 132,\n\t\"./2Love.jpg\": 133,\n\t\"./3Love.jpg\": 134,\n\t\"./cardback.jpg\": 45,\n\t\"./set1/AmberTwilight.jpg\": 135,\n\t\"./set1/AniseGreenaway.jpg\": 136,\n\t\"./set1/AzureCrescent.jpg\": 137,\n\t\"./set1/BadHabit.jpg\": 138,\n\t\"./set1/ClaireSaintJuste.jpg\": 139,\n\t\"./set1/ColetteFramboise.jpg\": 140,\n\t\"./set1/ElizaRosewater.jpg\": 141,\n\t\"./set1/EsquineForet.jpg\": 142,\n\t\"./set1/EugenieFontaine.jpg\": 143,\n\t\"./set1/FayLongfang.jpg\": 144,\n\t\"./set1/GenevieveDaubigny.jpg\": 145,\n\t\"./set1/Illness.jpg\": 146,\n\t\"./set1/KagariIchinomiya.jpg\": 147,\n\t\"./set1/LalandeDreyfus.jpg\": 148,\n\t\"./set1/LucienneDeMarlboro.jpg\": 149,\n\t\"./set1/MarianneSoleil.jpg\": 150,\n\t\"./set1/MillyViolet.jpg\": 151,\n\t\"./set1/MoineDeLefevre.jpg\": 152,\n\t\"./set1/NatsumiFujikawa.jpg\": 153,\n\t\"./set1/NenaWilder.jpg\": 154,\n\t\"./set1/NordTwilight.jpg\": 155,\n\t\"./set1/OpheliaGrail.jpg\": 156,\n\t\"./set1/RosaTopaz.jpg\": 157,\n\t\"./set1/RougeCrescent.jpg\": 158,\n\t\"./set1/SafranVirginie.jpg\": 159,\n\t\"./set1/SainsburyLockwood.jpg\": 160,\n\t\"./set1/SoraNakachi.jpg\": 161,\n\t\"./set1/TanyaPetrushka.jpg\": 162,\n\t\"./set1/TenalysTrent.jpg\": 163,\n\t\"./set1/ViolaCrescent.jpg\": 164\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 11;","module.exports = __webpack_public_path__ + \"static/media/cardback.7a704a7f.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAeCAYAAAA2Lt7lAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH5AQNDwAqlgwDwgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNC0xM1QxNTowMDo0Mi0wNDowMIFULV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDQtMTNUMTU6MDA6NDItMDQ6MDDwCZXhAAADoklEQVRIS82WXUiTURjH/3s3dVNxluUna8YYaeY+NAqhDwpKUbtIoyzaTeCsQIIuoojowkD0pqtuCoLuCusmjJlFmUqmlZUpSswkv+dHllrazJ2e8+5dzbHJpl70g2e85znvOf9z3vOcZ48MjDEEwSaysqYmNFdWYnx0FPuPHsVIeTkaoqIgUN842U/+og/LCqjJzAsLiPv1C/rJSTyhSWPWrcOzujqkpqbioMWCRbUazOVCfGEharZuxWf30L8EFNhIZu3sRE9VFUbtdsgVCgwNDsLe1yf2nzx7FjW3bsGclYUFpxPh1G+6exc3dTq4xDfc8N35ZffsLNovXsTwwACaW1owOTcHQSaTegElrdxoNOJVayvevnuHH9TPnj9HKvVFkXkm9ivAp0keGcGXnh68bGgQfZ1v3iBMLhefOXzjGxISpBZNmpSEqcZGFNMurDYbDs/MQEX+gAKqxUXIfL6eXAi4YThJ/OG9e3haUYGHZWVQXbmC/Pn5wJ8oqNDyYpEWtGPvXrR3dcHe34/XtbV4oFQGFggVvusX9fXuBhFBh85ZU4ElSAGxZgKB+L8EQj14jigQTsZzTRpdeX5RIrjTD8qwMOkJUNAh8tvrIVDGkSmo59TUFBS3b6ObbqV22zYkl5ZCPT2NO/n56OrtlV4NDWN6Ojq6uyFk0qpnq6vx5MYNJMXE4H1NDTpPn4ZpbAyuZS5W0JxwOJjZbKZ9/CPTYGAFBQVMp9VKntAxpKUx/t0EZ3g4lJGRkpybjg8f0EYJbmJiQvKsHOFjbCwMR47AQLncmzHK/yqvQ10pwif6UZSUIDI62u3xYoQOf7UIPLjqExOxhzJghl7v9q4hYpjYyQaLihCr0aCYQnQtEQX4Lurov9Z47hw6vDLianBR+HP+Bjr/2sO5uTDt2oVcumCrReYvmzbRH0T6+fPo/8SPfuVYL1zAhk08+fgIfCWzZWdjv9WKNKoOVkrbo0fIOHRIfF4iwGkn+04RpaNyJCcnx+0MgUIKEhWFvLO4WPLQdfa1SLKrfX3swL59LGfnTmoFx6kzZ5h+82Z26fFjlkJtcT7fyT2mIbtGIscsFqbTaFheURF5/GO5fJkZMjPZdpOJXbfZGF+SZ55lS8cYsgNUUCVQQTVw/z6GKEfNUxr3jOeRIlDGVScnY0teHsKOH0eLVouP7uEiQRW/vEZNp7JEQ/kpzuGAnFLIeqp55iMi8C0+Ho6UFPRQqud16W9xhAfgD87i9a2OcMd+AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAeCAIAAACwp+nIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARpSURBVEhL7VXLbhxFFK1n9zxtj8ev2IntJA4JeZkVi0jAErFCrNjAF/BHrPkBJARLYAEKEKEkPEIeNgn2hDhjezwPT09PVd3LabvRyFYiJGR2nMX0TPWtU/eec2+NFMzipKHy54nif9KTxwvc/7XZ7w29JC7F5spMOV89iltbvcQ5o1Q1Llytx/nq3zhCenO99XBr9/l+2h048qFWiV85NbVUr16dK+URQnzxcHf9z52d/V6aDAqRGS9Xl+Zq7746m78+wIj0swcb399vPNnpJiryJjbSRDysKnd+euLK+YV3lqcQ8/GPG3d/f9rqDx2zUVoF1iKMl6KLC9Mf3Vg55AFy0i+fPP/89r3NXuJVxduyI6OVMiHVrlcUycrC3JXLK7ud/e/uPGqlgnUcSEiEBDZaaEqqlLyxsvTB6zlvbtTas+2n/TQUa30VpUGA0AdOSISomJjK/e32N/caP/3R2nMsTIHIBmlSqbtCdYLsy7gt9INnzUMqICO9ubmz2UQGNmUtSeB84YNltkp7kimpjlOPm63NZjuIOHhmIkaq5FUknNGpNmSrjW7vk1trI9J+6rqpE7pArDxIZVCUshsqCkKYILVnk3rtpCGWgNFsNQsKBCCahJdyKE3H0YjUC3Y+eBwvlYwUCU4pDQZUHHCK0sEYr1CyGkp2ioMIxA4WScZLaKW8QwE6odzzXNMQApP03gctveVgKVVhIFGhyPaxQv7Z2VlGnGqU4LQMmkl7LLNBNkguqyxDRhopXdRGBC8FSYdSpC0UcT5eaWmwaGA4CVSs0C0SsmOfRICSEuJmb7U2zJHMU8weZRvVytWCEBUdRQrpwSg0iibYRMEEVqyQlGFsgoaShWUdIX1JUpMysNcPEV0v6xFp1Rbn6pOYOWhk0HmefOqUsFrFko1A+nBCwHIPPrAoFEBZq0Axoyy2SecmK8W5seqI9NJsfHq2VitHnCYKTahjw7HAyLCBaaBEFEvohboVNGD8ICxFUkI1BPlSrC4szM5PjI1IgbfPTV5bmqkqtLWLtEKRQ4X09BCdIy2hZAxeZi5BEWKGnyIy0hrYWfTJYjW+PF+7Wi8esuWkwLX5yYtTYwUeMKfoahjuIb7S8C3zBNbgy4EIpNFqWcMY9jENpqPw2uLUm2cmc6Jjt9S3jb2v76w92N0ZxGN9oQbBWGWNkJgCOEZSoX3QZ2ytZWndoMxuJhI3Lsy/v7qcUxzg+H361Vrzh0dP1nY7HTKkcVFGWISILuBDkVEehQsRi2ExTU5VzOrZUx9eXzzYOsJxUuBmo317bWN9a6eZhD7ctwUyFgMKCUij2b3wwwnpz43H15fPvHf5yE16iBeQHuLTn9fvPt7e2Ot3pXG4MozB2JAbWqJaKb40M7a6OP3W6Yk8+iheSvq4NWh0+79t7T1q7m119/vDtGijerk0P1Y5O1c/N1VdrWNcXoyXkh7il7ZvtPc3t1vtTq8Y2eWZmYXx0rXp439Kx/APpP8Ooz49QfwHpEL8BRCsX0JV74i5AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQcSURBVEhLtZVbbxtFFIDnzMzO7tqx15c4jqMmilvRgFohaAVSkUA8IOCF/8DPRAgJKQ9cChUVClUJtIU2cW6OHdtr7+7cDuNmJRLIxRH0e7Cl3TOfZs6ccxYIInk10Pz/FfA/7/rh006q1SQeapX9V/XPzw6OhiNJdGa1tEoDMoNUmnKxeGX1gxdbcSKTJFFSa0WtRc459XmCMkPFOPBEl73g07u3r6Be/+m3iUkSYoF7lvAsywJeBACjbKZSEAQFAZU1wtJHt2+6+FnV3z/qHBzta0qMR50XiTs3Y8jTVBd9HoRe4LNCKO4t1/IFM6ofPh92u91EjgmlyGkqkXCfi2KpUCrNBRyhJMha/Z/FNlPxbR8dHGWpNERKbaXLAatUatVm88/D/pfr97/+9ofeoJeHnuBy9frznb5OMmFZIKgQFqwmEFu7ub11//dHT8eHL9LBrpZ59AkuV4/GCQK1lCtAA2iBIoVUpeVqZb5Ry2QyHg201nn0CS7J9frmH51BjJ67fg7WUDuNtkCA+6VqdTCOKUAlDEqctObC65UgX/aSi9Qbu/0n2zuJM7HQRQG6H+PMSChwEpXKvgiNnIBSOElBZ0uN+q32Yr744oR0uyOGQoBPppl4uQOKCJaAJtb097sHO53Dg/3hYV/KkdGSU/ZyXc656h+fdON4rAwYY4jrX0SLmloDgNN9oxEeBJQXKGNWU4OlYkDsqcs8OyEb3Xhra3/ijukaD5mloJwegBA93TUhDKezImReFBYFtwHn5WJhdbFyvPyYU+ovNp519vZqC/PV6vxoMNSJQmuNE3vc7dpQba2202ygQIwK4WLUeHP5lO4kufqrze7m7k5/PHYjEYi92V5eWWr1O3vJMPa9grs3d5eWKE0koPbAMuCrzcW3rzWOLWcC9590f93e3xuNJwCKMyo8YrVORtfq9bXVlXQ4nBwOXV+7WiYuo0QR1IKiS/HK4tIbrb8nxr9hdz74pB8nrnJBBBlipqfZpMDcOE8naavZCoJwkmRolODAKKFKc4KV4tyd9lLuOAf47vHu7mD8vNs9zDL0A8Io9wN3aiu1T2gjilZaDZ9if78ndTIdfFY3apV7a6u54HzyXD942tvu9/Z6g8SiBJYqM7031+BIl+qV19tNqtN+76josQ9vXS495lSF/LI7HEsyUHqvF3d6g9RMe9rTyUK5cH25tVyPbkY8D52Bs+v6m63hg8cvBq5hRAh67Jk48tlbr914d2Uhj5iBs7sxEBBOvyZKqjjTCTLq+SGYU318KWer7yyUarU5n2ok0n1UXR/OV6J32vX89WycO0PmClyACYgRqBuh+Ox2O38xM+eqP77RakUVkWWRzT5//27+9Cqcq3asLDQi3yueHpWzc5H6vXajWa40q1dLcQ4hfwHMETZQJP9CvwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACf1BMVEUA//8B//8F7+8B4OAA398A398A398E6ekC//8C/PwKpqYJOTkAGxsAGhoAGxsAGxsGLCwOiooE9fULvLwFEhILCAguLCwyMDAyMDAwLi4SDw8EBwcNnp4B//8A//8I5eUPu7sPu7sPu7sQu7sPU1MAAABDQ0OgoKCkpKSkpKSjo6NZWVkAAAAMPDwRuLgPu7sPu7sPu7sK3NwA//8A//8InJwGAwMFBQUFCAgFCAgCAgIAAAAFBQUICAgHBwcHBwcHBwcGBgYBAQEFBwcFCAgFBwcFAwMLe3sB//8A//8IwMAIW1sMOjoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCAgMHR0JV1cKqakA//8B//8C/v4Pl5cEAgICAgICAgICAgILPj4G8/MB//8A//8OlpYCAAAJPT0E9PQA//8OlpYCAABGRkYzMzMBAQFTU1MiIiIHBwdYWFgTExMSEhJZWVkKCgoJPT0E9PQCAACTk5Nra2sBAQGtra1GRkYPDw+3t7cnJycmJia7u7sVFRWRkZFqamoBAQGrq6tFRUUPDw+1tbUmJiYmJia4uLgVFRWRkZFqamoOlpYCAACUlJRsbGwBAQGurq5GRkYPDw+4uLgnJycmJia7u7sVFRUJPT0E9PQA//8OlpYCAABRUVE7OzsBAQFgYGAnJycICAhmZmYWFhYVFRVoaGgLCwsJPDwE9PQA//8NsrIFCgoBAAAAAAABAAABAAABAAABAAABAAABAAACAAANXV0D+voD9vYNq6sQiIgQiIgQiIgQiIgQiIgQiIgQiIgQiIgQiIgPkpIH398A//8A//8B//8B//8B//8B//////8LKaYKAAAAAWJLR0TUCbsLhQAAAAlwSFlzAAAOwgAADsIBFShKgAAAAAd0SU1FB+QEDQ8KGko62+QAAAEmSURBVCjPY2CgE2BkYmZhZWPnwC7LycXNw8vHLyAohFVaWERUTFxCUkpaRhZVQk5eQVFJWUVVTV1DU0tbR1dP38DQyBgubWJqZm5haWVtY2tn7+Bo7eTs4urm7gGX9vTy9vH18w8IDAoODgoJCA0Lj4iMikaYHhMbF5+QmAAHSckpqci2p6VnWCODzCwUx2Xn5Frn5RcUFhWXlJaVV1hXVqFJV1vX1NbVNzQ2Nbe0tmGTbu/o7Oru6e3rnzARm/SkySNQespU62nTZ8ycNXvO3HnzF1gvXIQivXjJUutly1esXLV6zdp16zdYb9yEIr15y9Zt1tt3WO/cZb17j/XeffsPoKang4cOHzl67PjREydPnDh1+szZc2gJ8fyFi3Bw6TIDPQAAT762M8B9n2MAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDQtMTNUMTU6MTA6MjYtMDQ6MDBy+t8JAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA0LTEzVDE1OjEwOjI2LTA0OjAwA6dntQAAAABJRU5ErkJggg==\"","var map = {\n\t\"./contract.png\": 46,\n\t\"./deck.png\": 47,\n\t\"./hand.png\": 48,\n\t\"./love.png\": 49,\n\t\"./servings.png\": 50,\n\t\"./trash.png\": 51\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 56;","module.exports = __webpack_public_path__ + \"static/media/1Love.db0e25e8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2Love.ca010494.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3Love.a0cd1c8c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AmberTwilight.0fa84819.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AniseGreenaway.a6408b39.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AzureCrescent.29609aa1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/BadHabit.3d2ef91d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ClaireSaintJuste.8b728681.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ColetteFramboise.fa4e6730.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ElizaRosewater.bec1b095.jpg\";","module.exports = __webpack_public_path__ + \"static/media/EsquineForet.33dae02e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/EugenieFontaine.619c0a75.jpg\";","module.exports = __webpack_public_path__ + \"static/media/FayLongfang.75d2ba96.jpg\";","module.exports = __webpack_public_path__ + \"static/media/GenevieveDaubigny.33fbde6a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Illness.99e5fb4b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/KagariIchinomiya.434d1e7c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/LalandeDreyfus.72569947.jpg\";","module.exports = __webpack_public_path__ + \"static/media/LucienneDeMarlboro.a76caafe.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MarianneSoleil.df3e7a79.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MillyViolet.8c0587a5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MoineDeLefevre.9df9873e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NatsumiFujikawa.02aaa1c7.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NenaWilder.0431c421.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NordTwilight.4b0c4613.jpg\";","module.exports = __webpack_public_path__ + \"static/media/OpheliaGrail.e1e4d0e6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/RosaTopaz.907abd95.jpg\";","module.exports = __webpack_public_path__ + \"static/media/RougeCrescent.96984c87.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SafranVirginie.7a164140.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SainsburyLockwood.44beb43c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SoraNakachi.c7aeb118.jpg\";","module.exports = __webpack_public_path__ + \"static/media/TanyaPetrushka.de1694ea.jpg\";","module.exports = __webpack_public_path__ + \"static/media/TenalysTrent.143c78f9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ViolaCrescent.fbce74e2.jpg\";","var map = {\n\t\"./contract.png\": 46,\n\t\"./deck.png\": 47,\n\t\"./hand.png\": 48,\n\t\"./love.png\": 49,\n\t\"./servings.png\": 50,\n\t\"./trash.png\": 51\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 166;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function CardBlock(props, context) {\r\n  const { name, set, quantity, selected, type } = props.card;\r\n  const route = set ? `set${set}/${name}` : name;\r\n  const buyable = props.selectable;\r\n  const cardClick = buyable\r\n    ? () => {\r\n        props.selectCard(props.card);\r\n      }\r\n    : () => {};\r\n\r\n  return (\r\n    <span className={selected > 0 ? 'card-block selected' : 'card-block'}>\r\n      <div style={{ position: 'relative' }}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${route}.jpg`)}\r\n          className={quantity === 0 ? 'soldOut' : ''}\r\n          style={buyable && !(selected > 0) ? {} : { cursor: 'auto' }}\r\n          title={name === 'cardback' ? 'Maids Particulares' : undefined}\r\n          onMouseOver={() => {\r\n            context.updateImage(route);\r\n          }}\r\n          onMouseOut={() => {\r\n            context.updateImage(null);\r\n          }}\r\n          onClick={cardClick}\r\n        />\r\n\r\n        {selected > 0 && (\r\n          <div className=\"cardSelector\">\r\n            <button\r\n              type=\"button\"\r\n              style={{\r\n                borderRight: '1px solid black',\r\n              }}\r\n              onClick={() => {\r\n                props.selectCard(props.card, 'minus');\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n            <span>{selected}</span>\r\n            <button\r\n              type=\"button\"\r\n              disabled={\r\n                type === 'privateMaid' || quantity === selected || !buyable\r\n              }\r\n              style={{\r\n                borderLeft: '1px solid black',\r\n              }}\r\n              onClick={() => {\r\n                props.selectCard(props.card, 'plus');\r\n              }}\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {type === 'privateMaid' ? (\r\n        <h3 style={{ visibility: 'hidden' }}>1</h3>\r\n      ) : (\r\n        <h3>{quantity}</h3>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\nCardBlock.contextTypes = {\r\n  updateImage: PropTypes.func,\r\n};\r\n","export const love = [\r\n  { name: '1Love', type: 'love', cost: 1, love: 1, quantity: 36 },\r\n  { name: '2Love', type: 'love', cost: 4, love: 2, quantity: 12 },\r\n  { name: '3Love', type: 'love', cost: 7, love: 3, quantity: 8 },\r\n];\r\n","import _ from 'lodash';\r\nimport { getTrueData } from '../../../helpers/actions';\r\n\r\nexport function getChamberMaid(inst, mehCard, add = 1) {\r\n  const card = getTrueData(mehCard);\r\n  inst.setState((prevState) => {\r\n    let newMaids = _.cloneDeep(prevState.chamberMaids);\r\n    const idx = newMaids.findIndex((item) => {\r\n      const hasAttachments = item.attachments && item.attachments[0];\r\n      return !hasAttachments && item.name === card.name;\r\n    });\r\n    if (idx >= 0) {\r\n      newMaids[idx].chambered = newMaids[idx].chambered + add;\r\n      if (newMaids[idx].chambered <= 0) {\r\n        newMaids = newMaids.filter((foo, i) => i !== idx);\r\n      }\r\n    } else {\r\n      newMaids.push({ ...card, chambered: 1 });\r\n    }\r\n    return { chamberMaids: newMaids };\r\n  });\r\n  if (card.type !== 'event') {\r\n    const { updateMessage, parentState } = inst.context;\r\n    updateMessage(\r\n      `${parentState.playerName} pone 1 ${card.name} como Doncella.`\r\n    );\r\n  }\r\n}\r\n\r\nexport function getAttachment(inst, data) {\r\n  const { maidIdx, isPrivate, remove } = data;\r\n  let cards = data.card;\r\n  if (!Array.isArray(cards)) cards = [data.card];\r\n  if (!remove) cards = cards.map(getTrueData);\r\n  if (isPrivate) {\r\n    inst.setState((prevState) => {\r\n      const privateMaids = _.cloneDeep(prevState.boughtPrivateMaids);\r\n      const attachments = privateMaids[0] && privateMaids[0].attachments;\r\n      privateMaids[0].attachments = addOrRemove(attachments, cards, remove);\r\n      return { boughtPrivateMaids: privateMaids };\r\n    });\r\n    return;\r\n  }\r\n  inst.setState((prevState) => {\r\n    let newMaids = _.cloneDeep(prevState.chamberMaids);\r\n    const maid = newMaids[maidIdx];\r\n    const attachments = addOrRemove(maid.attachments, cards, remove);\r\n    // Quitar maid con antiguos attachments\r\n    if (maid.chambered > 1) {\r\n      newMaids[maidIdx].chambered -= 1;\r\n    } else {\r\n      newMaids = newMaids.filter((foo, idx) => idx !== maidIdx);\r\n    }\r\n    // Meter maid con nuevos attachments\r\n    const newIdx = newMaids.findIndex((item) => {\r\n      const same = hasSameAttachments(item.attachments, attachments);\r\n      return item.name === maid.name && same;\r\n    });\r\n    if (newIdx >= 0) {\r\n      newMaids[newIdx].chambered += 1;\r\n    } else {\r\n      newMaids.push({ ...maid, chambered: 1, attachments });\r\n    }\r\n    return { chamberMaids: newMaids };\r\n  });\r\n}\r\n\r\nfunction addOrRemove(list, cards, remove) {\r\n  if (remove) {\r\n    return (list || []).filter((foo, idx) => idx < list.length - 1);\r\n  }\r\n  return [...(list || []), ...cards];\r\n}\r\n\r\nfunction hasSameAttachments(list1, list2) {\r\n  const namelist1 = (list1 || []).map((item) => item.name);\r\n  const namelist2 = (list2 || []).map((item) => item.name);\r\n  return _.isEqual(namelist1, namelist2);\r\n}\r\n\r\nexport function handSelect(inst, idx) {\r\n  const limit = inst.state.selectionOn;\r\n  inst.setState((prevState) => {\r\n    let selection = [...prevState.handSelection];\r\n    if (selection.find((item) => item === idx) >= 0) {\r\n      selection = selection.filter((item) => item !== idx);\r\n    } else if (selection.length < limit) selection.push(idx);\r\n    return { handSelection: selection };\r\n  });\r\n}\r\n\r\nexport function getVP(inst) {\r\n  const { discard } = inst.context.parentState;\r\n  const { boughtPrivateMaids, chamberMaids } = inst.state;\r\n  const hasPoints = (maid) => maid.vp && !inst.hasIllness(maid);\r\n  const chamberCards = chamberMaids.filter(hasPoints);\r\n  const privateMaids = boughtPrivateMaids.filter(hasPoints);\r\n  const pointMaids = parseDiscard(discard);\r\n\r\n  chamberCards.forEach((maid) => {\r\n    const { name, chambered, vp } = maid;\r\n    if (pointMaids[name]) {\r\n      pointMaids[name].chambered = chambered;\r\n    } else pointMaids[name] = { chambered, inDeck: 0, vp };\r\n  });\r\n  return getPrivatePoints(privateMaids) + getMaidPoints(inst, pointMaids);\r\n}\r\n\r\nfunction parseDiscard(list) {\r\n  const result = {};\r\n  list.forEach((card) => {\r\n    const { name, vp } = card;\r\n    if (vp) {\r\n      if (result[name]) {\r\n        result[name].inDeck += 1;\r\n      } else {\r\n        result[name] = { inDeck: 1, chambered: 0, vp };\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nfunction getPrivatePoints(maids) {\r\n  const points = maids.map((card) => card.vp);\r\n  return [0, ...points].reduce((a, b) => a + b);\r\n}\r\n\r\nfunction getMaidPoints(inst, maids) {\r\n  const points = Object.keys(maids).map((name) => {\r\n    const { vp, chambered, inDeck } = maids[name];\r\n    return vp(chambered, inDeck, inst, maids);\r\n  });\r\n  return [0, ...points].reduce((a, b) => a + b);\r\n}\r\n","import _ from 'lodash';\r\nimport { getAttachment } from '../playerArea/playerZones/helpers/dataUpdates';\r\nimport { checkChamberMaids } from '../helpers/actions';\r\n\r\nfunction Sainsbury(inst) {\r\n  const { hand } = inst.context.playerState;\r\n  const loveIdx = hand.findIndex((card) => card.name === '1Love');\r\n  if (loveIdx < 0) return;\r\n\r\n  inst.setState({ message: 'Elige una maid o 2Love', button2Text: null });\r\n  inst.context.updateParent({\r\n    gameState: 'cityPick',\r\n    money: {\r\n      love: 4,\r\n      contract: 1,\r\n    },\r\n    restrType: ['maidChief', 'event', 'privateMaid'],\r\n    restrName: ['1Love', '3Love'],\r\n    sendTo: (cards) => sendToHand(inst, cards),\r\n  });\r\n}\r\n\r\nfunction sendToHand(inst, cards) {\r\n  if (!cards[0]) return;\r\n  inst.context.updatePlayer((prevState) => {\r\n    const hand = [...prevState.hand];\r\n    hand.push(...cards);\r\n    const loveIdx = hand.findIndex((card) => card.name === '1Love');\r\n    return { hand: hand.filter((foo, idx) => idx !== loveIdx) };\r\n  });\r\n  inst.context.updateParent((prevState) => {\r\n    const city = _.cloneDeep(prevState.city);\r\n    const idx = city.findIndex((item) => item.name === '1Love');\r\n    city[idx].quantity += 1;\r\n    return { gameState: 'servingPhase', city };\r\n  });\r\n  const { playerName } = inst.context.parentState;\r\n  inst.context.updateMessage(\r\n    `Con los servicios de Sainsbury, ${playerName} intercambia un 1Love de su mano por 1 ${cards[0].name} de la ciudad.`\r\n  );\r\n}\r\n\r\nfunction Esquine(inst) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Selecciona cartas para descartar',\r\n      button2Text: 'Hecho',\r\n      button2Click: () => getServings(inst, prevState),\r\n      handSelection: [],\r\n      selectionOn: 2,\r\n    };\r\n  });\r\n}\r\n\r\nfunction getServings(inst, prevMessages) {\r\n  const { handSelection } = inst.state;\r\n  const { hand } = inst.context.playerState;\r\n  inst.context.updateParent((prevState) => {\r\n    const discard = [...prevState.discard];\r\n    handSelection.forEach((idx) => discard.push(hand[idx]));\r\n    return { discard };\r\n  });\r\n  inst.context.updatePlayer((prevState) => {\r\n    const newHand = [...prevState.hand];\r\n    return {\r\n      servings: prevState.servings + handSelection.length,\r\n      hand: newHand.filter((foo, idx) => !handSelection.includes(idx)),\r\n    };\r\n  });\r\n  inst.setState({ ...prevMessages, handSelection: null, selectionOn: null });\r\n}\r\n\r\nfunction Tenalys(inst, card) {\r\n  const { webrtc, playerName } = inst.context.parentState;\r\n  if (webrtc) webrtc.shout('sendAction', { type: 'auto', card });\r\n  inst.context.updateMessage(\r\n    `${playerName} usa los servicios de TenalysTrent y los dems jugadores roban 1 carta.`\r\n  );\r\n}\r\n\r\nfunction actionTenalys(inst) {\r\n  inst.drawAndReload(1);\r\n}\r\n\r\nfunction Natsumi(inst, card) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Descarta, si quieres, 1 carta',\r\n      button2Text: 'Hecho',\r\n      button2Click: (a, b) => forcedDiscard(a, b, prevState, card),\r\n      handSelection: [],\r\n      selectionOn: 1,\r\n    };\r\n  });\r\n}\r\n\r\nfunction forcedDiscard(context, handSelection, prevMessages, card) {\r\n  const discardIdx = handSelection[0];\r\n  if (discardIdx >= 0) {\r\n    const { hand } = context.playerState;\r\n    context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, hand[discardIdx]] };\r\n    });\r\n    context.updatePlayer((prevState) => {\r\n      const newHand = [...prevState.hand];\r\n      return { hand: newHand.filter((foo, idx) => idx !== discardIdx) };\r\n    });\r\n    if (card) {\r\n      const { webrtc, playerName } = context.parentState;\r\n      if (webrtc) webrtc.shout('sendAction', { type: 'auto', card });\r\n      context.updateMessage(\r\n        `${playerName} descarta 1 carta con la habilidad de NatsumiFujikawa, lo que obliga a los dems jugadores a hacer lo mismo.`\r\n      );\r\n    }\r\n  }\r\n  if (discardIdx >= 0 || card)\r\n    context.parentState.setActions({\r\n      ...prevMessages,\r\n      handSelection: null,\r\n      selectionOn: null,\r\n    });\r\n}\r\n\r\nfunction actionNatsumi(inst) {\r\n  if (inst.state.hand.length >= 4) {\r\n    inst.context.parentState.setActions((prevState) => {\r\n      return {\r\n        message: 'Descarta 1 carta',\r\n        button2Text: 'Hecho',\r\n        button2Click: (a, b) => forcedDiscard(a, b, prevState),\r\n        handSelection: [],\r\n        selectionOn: 1,\r\n      };\r\n    });\r\n  }\r\n}\r\n\r\nfunction Claire(inst) {\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige 1 Illness para devolverla a la ciudad',\r\n    button2Text: 'Cancelar',\r\n    button2Click: () =>\r\n      inst.context.updateParent({\r\n        gameState: 'servingPhase',\r\n      }),\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetIllness',\r\n    illnessClick: (inst, b, c, d) => {\r\n      healIllness(inst, b, c, d);\r\n      inst.context.updateParent({ gameState: 'servingPhase' });\r\n    },\r\n  });\r\n}\r\n\r\nfunction ClaireDefend(inst, data) {\r\n  const { maidIdx, isPrivate, remove } = data;\r\n  if (!remove) {\r\n    const message = 'se defiende de la Illness revelando 1 Claire de su mano';\r\n    inst.context.parentState.setActions((prevActions) => {\r\n      return {\r\n        message: 'Quieres defenderte de la Illness con Claire ?',\r\n        button1Text: 'S',\r\n        button1Click: () => {\r\n          healIllness(inst, maidIdx, isPrivate, message);\r\n          inst.context.parentState.setActions(prevActions);\r\n        },\r\n        button2Text: 'No',\r\n        button2Click: () => inst.context.parentState.setActions(prevActions),\r\n      };\r\n    });\r\n  }\r\n}\r\n\r\nfunction healIllness(inst, maidIdx, isPrivate, message) {\r\n  const { playerName, webrtc } = inst.context.parentState;\r\n  const city = _.cloneDeep(inst.context.parentState.city);\r\n  const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n  city[illIdx].quantity += 1;\r\n  if (webrtc) webrtc.shout('cityUpdate', { city });\r\n  inst.context.updateParent({ city });\r\n  getAttachment(inst, {\r\n    maidIdx,\r\n    isPrivate,\r\n    remove: true,\r\n    card: [city[illIdx]],\r\n  });\r\n  inst.context.updateMessage(\r\n    `${playerName} ${\r\n      message ||\r\n      'usa los servicios de Claire para devolver 1 de sus Illness a la ciudad'\r\n    }`\r\n  );\r\n}\r\n\r\nfunction Eliza(inst, card) {\r\n  inst.setState({\r\n    message: 'Elige un jugador para el efecto',\r\n    button2Text: null,\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetPlayer',\r\n    playerClick: (name) => getSCModal(inst, name, card),\r\n    freeChambersToo: true,\r\n  });\r\n}\r\n\r\nfunction getSCModal(inst, oppName, card) {\r\n  const { webrtc, playerName, opponents } = inst.context.parentState;\r\n  const opp = opponents.find((item) => item.name === oppName);\r\n  const { deck } = oppName ? opp.data : inst.context.parentState;\r\n  if (!deck[0]) {\r\n    ElizaFinish(inst);\r\n    return;\r\n  }\r\n  const { name, set } = deck[0];\r\n  const route = set ? `set${set}/${name}` : name;\r\n\r\n  inst.context.updateParent({\r\n    showSCModal: true,\r\n    scModalData: {\r\n      title: `Esta es la primera carta de${\r\n        oppName ? `l mazo de ${oppName}` : ' tu mazo'\r\n      }`,\r\n      message: 'Quieres descartarla ?',\r\n      imgRoute: route,\r\n      yesFunc: () => {\r\n        ElizaFinish(inst);\r\n        if (oppName) {\r\n          if (webrtc)\r\n            webrtc.whisper(opp.peer, 'sendAction', { type: 'auto', card });\r\n        } else {\r\n          inst.context.draw(1, (hand) => {\r\n            const discarded = hand[0];\r\n            inst.context.updatePlayer({\r\n              hand: hand.filter((foo, idx) => idx > 0),\r\n            });\r\n            inst.context.updateParent((prevState) => {\r\n              return { discard: [...prevState.discard, discarded] };\r\n            });\r\n          });\r\n        }\r\n        inst.context.updateMessage(\r\n          `${playerName} usa los servicios de Eliza para descartar 1 carta del mazo de ${\r\n            oppName || playerName\r\n          }`\r\n        );\r\n      },\r\n      noFunc: () => ElizaFinish(inst),\r\n    },\r\n  });\r\n}\r\n\r\nfunction ElizaFinish(inst) {\r\n  inst.context.updateParent({\r\n    gameState: 'servingPhase',\r\n    freeChambersToo: false,\r\n    playerClick: null,\r\n    showSCModal: false,\r\n  });\r\n}\r\n\r\nfunction ElizaDiscard(inst) {\r\n  inst.drawAndReload(1, (hand) => {\r\n    const discarded = hand[0];\r\n    inst.setState({ hand: hand.filter((foo, idx) => idx > 0) });\r\n    inst.context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, discarded] };\r\n    });\r\n  });\r\n}\r\n\r\nfunction Nena(inst) {\r\n  const { webrtc, playerName, opponents, turnOrder } = inst.context.parentState;\r\n  const playerIdx = inst.context.parentState.turnNum % turnOrder.length;\r\n  const city = _.cloneDeep(inst.context.parentState.city);\r\n  const bhIdx = city.findIndex((item) => item.name === 'BadHabit');\r\n  const bhLeft = city[bhIdx].quantity;\r\n  let message = null;\r\n  if (bhLeft > 0) {\r\n    const opp1 = opponents.find(\r\n      (opp) => opp.name === turnOrder[(playerIdx + 1) % turnOrder.length]\r\n    );\r\n    if (checkChamberMaids(opp1.data)) {\r\n      city[bhIdx].quantity -= 1;\r\n      if (webrtc) webrtc.whisper(opp1.peer, 'sendEvent', [city[bhIdx]]);\r\n      message = `${playerName} usa los servicios de NenaWilder para enviar 1 BadHabit a ${opp1.name}`;\r\n    }\r\n  }\r\n  if (bhLeft > 1) {\r\n    const opp2 = opponents.find(\r\n      (opp) =>\r\n        opp.name ===\r\n        turnOrder[(playerIdx + turnOrder.length - 1) % turnOrder.length]\r\n    );\r\n    if (checkChamberMaids(opp2.data)) {\r\n      city[bhIdx].quantity -= 1;\r\n      if (webrtc) webrtc.whisper(opp2.peer, 'sendEvent', [city[bhIdx]]);\r\n      message = message\r\n        ? `${message} y a ${opp2.name}`\r\n        : `${playerName} usa los servicios de NenaWilder para enviar 1 BadHabit a ${opp2.name}`;\r\n    }\r\n  }\r\n  if (message) {\r\n    inst.context.updateParent({ city });\r\n    webrtc.shout('cityUpdate', { city });\r\n    inst.context.updateMessage(message);\r\n  }\r\n}\r\n\r\nexport const playFuncs = {\r\n  Sainsbury,\r\n  Esquine,\r\n  Tenalys,\r\n  actionTenalys,\r\n  Natsumi,\r\n  actionNatsumi,\r\n  Claire,\r\n  ClaireDefend,\r\n  Eliza,\r\n  ElizaDiscard,\r\n  Nena,\r\n};\r\n","import _ from 'lodash';\r\nimport { getAttachment } from '../playerArea/playerZones/helpers/dataUpdates';\r\n\r\nfunction Illness(inst, maidIdx, isPrivate) {\r\n  inst.context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Quieres descartar un 3Love y devolvr esta Illness a la ciudad?',\r\n      button1Text: 'S',\r\n      button1Click: () => healIllness(inst, maidIdx, isPrivate, prevActions),\r\n      button2Text: 'No',\r\n      button2Click: () => inst.context.parentState.setActions(prevActions),\r\n    };\r\n  });\r\n}\r\n\r\nfunction healIllness(inst, maidIdx, isPrivate, prevActions) {\r\n  const hand = _.cloneDeep(inst.context.playerState.hand);\r\n  const loveIdx = hand.findIndex((item) => item.name === '3Love');\r\n  const threeLove = hand[loveIdx];\r\n  inst.context.updatePlayer({\r\n    hand: hand.filter((foo, idx) => idx !== loveIdx),\r\n  });\r\n  const { webrtc, playerName } = inst.context.parentState;\r\n  inst.context.updateParent((prevState) => {\r\n    const city = _.cloneDeep(prevState.city);\r\n    const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n    city[illIdx].quantity += 1;\r\n    if (webrtc) webrtc.shout('cityUpdate', { city });\r\n\r\n    const discard = [...prevState.discard];\r\n    discard.push(threeLove);\r\n    return { discard, city };\r\n  });\r\n  getAttachment(inst, { maidIdx, isPrivate, remove: true });\r\n  inst.context.parentState.setActions(prevActions);\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} descarta un 3Love para devolver 1 de sus Illness a la ciudad.`\r\n  );\r\n}\r\n\r\nfunction restricIllness(context) {\r\n  return context.playerState.hand.find((card) => card.name === '3Love');\r\n}\r\n\r\nexport const eventFuncs = { Illness, restricIllness };\r\n","function Ophelia(chambered, inDeck) {\r\n  if (inDeck <= 1) return 0;\r\n  return inDeck * (inDeck % 2 === 1 ? 2 : -2);\r\n}\r\n\r\nfunction Safran(chambered) {\r\n  const q = Math.floor(chambered / 4);\r\n  const r = chambered % 4;\r\n  let points = q * 12;\r\n  if (r >= 2) points += 4;\r\n  if (r >= 3) points += 4;\r\n  return points;\r\n}\r\n\r\nfunction BadHabit(chambered) {\r\n  return chambered * (chambered >= 4 ? -2 : -1);\r\n}\r\n\r\nfunction Rouge(chamber, inDeck) {\r\n  return chamber + inDeck;\r\n}\r\n\r\nfunction Viola(chamber, inDeck, inst, maids) {\r\n  let points = inDeck + chamber;\r\n  if (maids.AzureCrescent) return points;\r\n  const numRouge = maids.RougeCrescent ? maids.RougeCrescent.chambered : 0;\r\n  return points + Math.min(numRouge, chamber) * 3;\r\n}\r\n\r\nfunction Azure(chamber, inDeck, inst, maids) {\r\n  let points = inDeck + chamber;\r\n  const numRouge = maids.RougeCrescent ? maids.RougeCrescent.chambered : 0;\r\n  const numViola = maids.ViolaCrescent ? maids.ViolaCrescent.chambered : 0;\r\n  const allNums = [chamber, numViola, numRouge];\r\n  const minThree = Math.min(...allNums);\r\n  const pairNums = allNums\r\n    .map((num) => num - minThree)\r\n    .filter((num) => num > 0);\r\n  const minTwo = pairNums.length === 2 ? Math.min(...pairNums) : 0;\r\n  return points + minThree * 7 + minTwo * 3;\r\n}\r\n\r\nfunction Colette(chamber, inDeck, inst) {\r\n  const { opponents } = inst.context.parentState;\r\n  const oppColettes = opponents.map((opp) => getColettes(opp, inst));\r\n  const total = chamber + inDeck;\r\n  return total + (total > Math.max(...oppColettes) ? 5 : 0);\r\n}\r\n\r\nfunction getColettes(opp, inst) {\r\n  const { discard, chamberMaids } = opp.data;\r\n  const chamberColettes = chamberMaids.find((item) => {\r\n    return item.name === 'ColetteFramboise' && !inst.hasIllness(item);\r\n  });\r\n  let deckColettes = 0;\r\n  discard.forEach((item) => {\r\n    if (item.name === 'ColetteFramboise') deckColettes += 1;\r\n  });\r\n  return deckColettes + (chamberColettes ? chamberColettes.chambered : 0);\r\n}\r\n\r\nexport const vpFuncs = {\r\n  Ophelia,\r\n  Safran,\r\n  BadHabit,\r\n  Rouge,\r\n  Viola,\r\n  Azure,\r\n  Colette,\r\n};\r\n","import { playFuncs } from './set1Functions';\r\nimport { eventFuncs } from './set1ChamberFuncs';\r\nimport { vpFuncs } from './vpFunctions';\r\n\r\nexport const set1Fixed = [\r\n  {\r\n    name: 'Illness',\r\n    set: 1,\r\n    type: 'event',\r\n    cost: 4,\r\n    quantity: 10,\r\n    attachTo: 'maid',\r\n    onStart: eventFuncs.Illness,\r\n    restric: eventFuncs.restricIllness,\r\n  },\r\n  {\r\n    name: 'BadHabit',\r\n    set: 1,\r\n    type: 'event',\r\n    cost: 2,\r\n    vp: vpFuncs.BadHabit,\r\n    quantity: 16,\r\n  },\r\n  {\r\n    name: 'ColetteFramboise',\r\n    set: 1,\r\n    type: 'maidChief',\r\n    cost: 3,\r\n    vp: vpFuncs.Colette,\r\n    chamberCost: 2,\r\n    quantity: 24,\r\n  },\r\n  {\r\n    name: 'MarianneSoleil',\r\n    set: 1,\r\n    type: 'maidChief',\r\n    cost: 9,\r\n    vp: (chamber, deck) => 6 * (chamber + deck),\r\n    quantity: 8,\r\n  },\r\n];\r\n\r\nexport const set1Maids = [\r\n  {\r\n    name: 'AniseGreenaway',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 7,\r\n    vp: (chamber, deck) => 3 * deck,\r\n    draw: 3,\r\n    contract: 1,\r\n    quantity: 8,\r\n  },\r\n  {\r\n    name: 'OpheliaGrail',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 6,\r\n    draw: 1,\r\n    servings: 1,\r\n    love: 1,\r\n    contract: 1,\r\n    vp: vpFuncs.Ophelia,\r\n    quantity: 8,\r\n  },\r\n  {\r\n    name: 'SainsburyLockwood',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    onPlay: playFuncs.Sainsbury,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'TenalysTrent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    love: 3,\r\n    contract: 1,\r\n    onPlay: playFuncs.Tenalys,\r\n    forcedAction: playFuncs.actionTenalys,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'NenaWilder',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    love: 1,\r\n    onPlay: playFuncs.Nena,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'NatsumiFujikawa',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    draw: 1,\r\n    servings: 2,\r\n    onPlay: playFuncs.Natsumi,\r\n    forcedAction: playFuncs.actionNatsumi,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'EsquineForet',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 2,\r\n    onPlay: playFuncs.Esquine,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'GenevieveDaubigny',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 1,\r\n    servings: 1,\r\n    love: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'MoineDeLefevre',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 2,\r\n    contract: 2,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ElizaRosewater',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    love: 2,\r\n    onPlay: playFuncs.Eliza,\r\n    forcedAction: playFuncs.ElizaDiscard,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'SafranVirginie',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    vp: vpFuncs.Safran,\r\n    love: 2,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'KagariIchinomiya',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    servings: 2,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ClaireSaintJuste',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    servings: 1,\r\n    onPlay: playFuncs.Claire,\r\n    onDefend: playFuncs.ClaireDefend,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'AzureCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Azure,\r\n    contract: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ViolaCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Viola,\r\n    draw: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'RougeCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Rouge,\r\n    love: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n];\r\n","import _ from 'lodash';\r\nimport {\r\n  getAttachment,\r\n  getChamberMaid,\r\n} from '../playerArea/playerZones/helpers/dataUpdates';\r\nimport { getTrueData, finishTurn } from '../helpers/actions';\r\n\r\nfunction Lucienne(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  increaseParam(context, 'servings', 'Lucienne', noUpdate);\r\n}\r\n\r\nfunction Rosa(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  increaseParam(context, 'love', 'Rosa', noUpdate);\r\n}\r\n\r\nfunction Fay(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Qu quieres obtener con FayLongfang ?',\r\n      button1Text: '1 Amor',\r\n      button2Text: '1 Contratacin',\r\n      button1Click: () => {\r\n        context.parentState.setActions(prevActions);\r\n        increaseParam(context, 'love', 'Fay', noUpdate);\r\n      },\r\n      button2Click: () => {\r\n        context.parentState.setActions(prevActions);\r\n        increaseParam(context, 'contract', 'Fay', noUpdate);\r\n      },\r\n    };\r\n  });\r\n}\r\n\r\nfunction increaseParam(context, param, name, noUpdate) {\r\n  context.updatePlayer((prevState) => {\r\n    return { [param]: prevState[param] + 1 };\r\n  });\r\n  if (!noUpdate) context.updateParent({ gameState: 'servingPhase' });\r\n  const { playerName } = context.parentState;\r\n  context.updateMessage(\r\n    `${\r\n      noUpdate ? 'Al robar una carta' : 'En su fase de Inicio'\r\n    }, ${playerName} gana 1 &${param}& con la habilidad de ${name}.`\r\n  );\r\n}\r\n\r\nfunction Lalande(inst) {\r\n  const { playerName } = inst.context.parentState;\r\n  inst.context.draw(1);\r\n  inst.setState({ usadaJoder: 'si' });\r\n  if (!inst.context.parentState.hasPlayables())\r\n    inst.context.updateParent({ gameState: 'servingPhase' });\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} roba 1 carta con la habilidad de Lalande.`\r\n  );\r\n}\r\n\r\nfunction Milly(inst, cb) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  increaseParam(inst.context, 'servings', 'Milly', true);\r\n  cb();\r\n}\r\n\r\nfunction Tanya(inst, cb) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Robas 1 ms con TanyaPetrushka ?',\r\n      button1Text: 'S',\r\n      button2Text: 'No',\r\n      button1Click: () => {\r\n        inst.context.draw(1);\r\n        inst.setState({ ...prevState, usadaJoder: 'si' }, cb);\r\n        const { updateMessage, parentState } = inst.context;\r\n        updateMessage(\r\n          `Al robar una carta, ${parentState.playerName} roba otra carta con la habilidad de Tanya.`\r\n        );\r\n      },\r\n      button2Click: () => inst.setState(prevState, cb),\r\n    };\r\n  });\r\n}\r\n\r\nfunction Nord(inst) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  inst.context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Quieres usar la habilidad de Nord ?',\r\n      button1Text: 'S',\r\n      button1Click: () => selectHand(inst.context),\r\n      button2Text: 'No',\r\n      button2Click: () => inst.context.parentState.setActions(prevActions),\r\n    };\r\n  });\r\n}\r\n\r\nfunction selectHand(context) {\r\n  context.parentState.setActions({\r\n    message: 'Selecciona la carta a MANTENER',\r\n    button1Text: null,\r\n    button2Text: 'Hecho',\r\n    button2Click: (a, b) => discardAndTarget(a, b),\r\n    handSelection: [],\r\n    selectionOn: 1,\r\n  });\r\n}\r\n\r\nfunction discardAndTarget(context, handSelection) {\r\n  const newDiscards = context.playerState.hand.filter(\r\n    (foo, idx) => idx !== handSelection[0]\r\n  );\r\n  context.parentState.setActions({\r\n    message: 'Asigna 2 Illness a una Doncella',\r\n    button2Text: null,\r\n    handSelection: null,\r\n    selectionOn: null,\r\n  });\r\n  context.updatePlayer((prevState) => {\r\n    const hand = [...prevState.hand];\r\n    return { hand: hand.filter((foo, idx) => idx === handSelection[0]) };\r\n  });\r\n  context.updateParent((prevState) => {\r\n    const discard = [...prevState.discard];\r\n    discard.push(...newDiscards);\r\n    return {\r\n      discard,\r\n      gameState: 'targetChamberMaid',\r\n      maidClick: (a, b, c) => sendIllness(context, a, b, c),\r\n    };\r\n  });\r\n}\r\n\r\nfunction sendIllness(context, maidIdx, isPrivate, oppName) {\r\n  const city = _.cloneDeep(context.parentState.city);\r\n  const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n  const numIll = Math.min(city[illIdx].quantity, 2);\r\n  const card = [];\r\n  if (numIll > 0) card.push(city[illIdx]);\r\n  if (numIll > 1) card.push(city[illIdx]);\r\n\r\n  city[illIdx].quantity -= numIll;\r\n  context.updateParent({ city, gameState: 'startPhase' });\r\n\r\n  const { webrtc, opponents, playerName } = context.parentState;\r\n  webrtc.shout('cityUpdate', { city });\r\n  const data = { maidIdx, card, isPrivate, count: numIll };\r\n  if (oppName) {\r\n    const opp = opponents.find((item) => item.name === oppName);\r\n    if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n  } else context.parentState.getAttachment({ maidIdx, card, isPrivate });\r\n  context.updateMessage(\r\n    `${playerName} enva ${numIll} Illness a una Doncella de ${\r\n      oppName || playerName\r\n    }.`\r\n  );\r\n}\r\n\r\nfunction Sora(inst) {\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige el Evento que quieras mover',\r\n    button2Text: 'Cancelar',\r\n    button2Click: () =>\r\n      inst.context.updateParent({\r\n        gameState: 'startPhase',\r\n        eventClick: null,\r\n      }),\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetEvent',\r\n    eventClick: (a, b, c, d) => removeAndTarget(inst, a, b, c, d),\r\n  });\r\n  inst.setState({ usadaJoder: 'si' });\r\n}\r\n\r\nfunction removeAndTarget(inst, card, idx, isPrivate, oppName) {\r\n  const { webrtc, opponents, playerName } = inst.context.parentState;\r\n  if (!oppName) {\r\n    if (card.name === 'Illness') {\r\n      // if is attachment\r\n      getAttachment(inst, { maidIdx: idx, isPrivate, remove: true });\r\n    } else getChamberMaid(inst, card, -1);\r\n  } else {\r\n    const opp = opponents.find((item) => item.name === oppName);\r\n    if (card.name === 'Illness') {\r\n      const data = { maidIdx: idx, isPrivate, remove: true };\r\n      if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n    } else if (webrtc) {\r\n      webrtc.whisper(opp.peer, 'sendEvent', [card, -1]);\r\n    }\r\n  }\r\n  inst.context.updateParent({ eventClick: null });\r\n  inst.context.attachEvent({ ...card, backToStart: true }, 1);\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} toma 1 ${\r\n      card.name\r\n    } de la habitacin de ${\r\n      oppName || playerName\r\n    } para enviarlo a otro jugador.`\r\n  );\r\n}\r\n\r\nfunction Amber(context) {\r\n  context.draw(1, (hand) => {\r\n    const discarded = hand[0];\r\n    context.updatePlayer({ hand: [] });\r\n    context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, discarded] };\r\n    });\r\n    const amount = discarded.type.includes('maid') ? 5 : 4;\r\n    context.draw(amount, () => finishTurn(context));\r\n    const { playerName } = context.parentState;\r\n    context.updateMessage(\r\n      `Debido a la habilidad de AmberTwilight, ${playerName} descarta ${\r\n        discarded.name\r\n      } de su mazo.${\r\n        amount === 4\r\n          ? ' Como no es una Maid, roba 1 carta menos para su nueva mano.'\r\n          : ''\r\n      }`\r\n    );\r\n  });\r\n}\r\n\r\nfunction Eugenie(inst) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige un oponente para el efecto',\r\n    button2Text: null,\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetPlayer',\r\n    playerClick: (name) => getModal(inst, name),\r\n    freeChambersToo: true,\r\n  });\r\n}\r\n\r\nfunction getModal(inst, oppName) {\r\n  if (!oppName) return;\r\n  const { webrtc, playerName, opponents } = inst.context.parentState;\r\n  const opp = opponents.find((item) => item.name === oppName);\r\n  const oppRandom = getHandRandom(opp.data.hand);\r\n  const { name, set } = oppRandom.card;\r\n  const route = set ? `set${set}/${name}` : name;\r\n\r\n  inst.context.updateParent({\r\n    showSCModal: true,\r\n    scModalData: {\r\n      title: `Esta es la carta revelada de la mano de ${oppName}`,\r\n      message: 'Quieres intercambiarla con una carta aleatoria de tu mano ?',\r\n      imgRoute: route,\r\n      yesFunc: () => {\r\n        const playerRandom = getHandRandom(inst.context.playerState.hand);\r\n        inst.context.updatePlayer((prevState) => {\r\n          const hand = _.cloneDeep(prevState.hand);\r\n          hand[playerRandom.idx] = getTrueData(oppRandom.card);\r\n          return { hand };\r\n        });\r\n        if (webrtc) {\r\n          webrtc.whisper(opp.peer, 'sendAction', {\r\n            type: 'auto',\r\n            card: {\r\n              name: 'EugenieFontaine',\r\n              set: 1,\r\n              type: 'privateMaid',\r\n            },\r\n            funcData: [oppRandom.idx, playerRandom.card],\r\n          });\r\n        }\r\n        inst.context.updateMessage(\r\n          `En su fase de Inicio, ${playerName} usa la habilidad de Eugenie para intercambiar una carta aleatoria de su mano con ${oppName}`\r\n        );\r\n        EugenieFinish(inst);\r\n      },\r\n      noFunc: () => EugenieFinish(inst),\r\n    },\r\n  });\r\n}\r\n\r\nfunction actionEugenie(inst, idx, newCard) {\r\n  inst.setState((prevState) => {\r\n    const hand = _.cloneDeep(prevState.hand);\r\n    hand[idx] = getTrueData(newCard);\r\n    return { hand };\r\n  });\r\n}\r\n\r\nfunction getHandRandom(hand) {\r\n  const idx = Math.floor(Math.random() * hand.length);\r\n  return { idx, card: hand[idx] };\r\n}\r\n\r\nfunction EugenieFinish(inst) {\r\n  inst.context.updateParent({\r\n    gameState: 'startPhase',\r\n    freeChambersToo: false,\r\n    playerClick: null,\r\n    showSCModal: false,\r\n  });\r\n}\r\n\r\nexport const functions = {\r\n  Lucienne,\r\n  Rosa,\r\n  Fay,\r\n  Lalande,\r\n  Milly,\r\n  Tanya,\r\n  Nord,\r\n  Sora,\r\n  Amber,\r\n  Eugenie,\r\n  actionEugenie,\r\n};\r\n","import { functions } from './privateMaidFunctions';\r\n\r\nexport const privateMaids = [\r\n  {\r\n    name: 'AmberTwilight',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: -3,\r\n    onOppDiscard: functions.Amber,\r\n  },\r\n  {\r\n    name: 'NordTwilight',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 4,\r\n    vp: -4,\r\n    onStart: functions.Nord,\r\n  },\r\n  {\r\n    name: 'SoraNakachi',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 7,\r\n    vp: 2,\r\n    onStart: functions.Sora,\r\n  },\r\n  {\r\n    name: 'FayLongfang',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 6,\r\n    vp: 0,\r\n    auto: true,\r\n    onStart: functions.Fay,\r\n  },\r\n  {\r\n    name: 'LalandeDreyfus',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 6,\r\n    vp: 2,\r\n    onStart: functions.Lalande,\r\n  },\r\n  {\r\n    name: 'MillyViolet',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 2,\r\n    onDraw: functions.Milly,\r\n  },\r\n  {\r\n    name: 'EugenieFontaine',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 0,\r\n    onStart: functions.Eugenie,\r\n    forcedAction: functions.actionEugenie,\r\n  },\r\n  {\r\n    name: 'LucienneDeMarlboro',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 1,\r\n    auto: true,\r\n    onStart: functions.Lucienne,\r\n  },\r\n  {\r\n    name: 'RosaTopaz',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 1,\r\n    auto: true,\r\n    onStart: functions.Rosa,\r\n  },\r\n  {\r\n    name: 'TanyaPetrushka',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 4,\r\n    vp: 1,\r\n    onDraw: functions.Tanya,\r\n  },\r\n];\r\n","import { love } from '../cardData/love';\r\nimport { set1Fixed, set1Maids } from '../cardData/set1';\r\nimport { privateMaids } from '../cardData/privateMaids';\r\n\r\nexport function shuffle(array) {\r\n  var currentIndex = array.length,\r\n    temporaryValue,\r\n    randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nexport function getTrueData(card) {\r\n  if (!card) return null;\r\n  switch (card.type) {\r\n    case 'love':\r\n      return love.find((item) => item.name === card.name);\r\n    case 'privateMaid':\r\n      return privateMaids.find((item) => item.name === card.name);\r\n    case 'maid':\r\n      return set1Maids.find((item) => item.name === card.name);\r\n    default:\r\n      return set1Fixed.find((item) => item.name === card.name);\r\n  }\r\n}\r\n\r\nexport function checkChamberMaids(data) {\r\n  const { chamberMaids, boughtPrivateMaids } = data;\r\n  return (\r\n    boughtPrivateMaids[0] ||\r\n    chamberMaids.find((maid) => maid.type.includes('maid'))\r\n  );\r\n}\r\n\r\nexport function hasTargets(context) {\r\n  if (context.parentState.hasChamberMaids()) return true;\r\n  return context.parentState.opponents.find((opp) => {\r\n    return checkChamberMaids(opp.data);\r\n  });\r\n}\r\n\r\nexport function attachEvent(inst, card, selected) {\r\n  inst.setState((prevState) => {\r\n    let data = {\r\n      attachmentsLeft: [...prevState.attachmentsLeft],\r\n    };\r\n    if (data.attachmentsLeft.length === 0) {\r\n      data = { ...data, ...getAttachInfo(inst, card) };\r\n    }\r\n    for (let i = 0; i < selected; i++) {\r\n      data.attachmentsLeft.push(card);\r\n    }\r\n    return data;\r\n  });\r\n}\r\n\r\nexport function getAttachInfo(inst, card) {\r\n  switch (card.attachTo) {\r\n    case 'maid':\r\n      return {\r\n        gameState: 'targetChamberMaid',\r\n        maidClick: (maidIdx, isPrivate, oppName) => {\r\n          removePendingAttach(inst);\r\n          const { webrtc, opponents, playerName } = inst.state;\r\n          if (oppName) {\r\n            const opp = opponents.find((item) => item.name === oppName);\r\n            const data = { maidIdx, card, isPrivate };\r\n            if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n          } else inst.state.getAttachment({ maidIdx, card, isPrivate });\r\n          inst.updateMessage(\r\n            `${playerName} enva 1 ${card.name} a ${oppName || playerName}.`\r\n          );\r\n        },\r\n      };\r\n    default:\r\n      return {\r\n        gameState: 'targetPlayer',\r\n        playerClick: (name) => {\r\n          removePendingAttach(inst);\r\n          const { webrtc, opponents, playerName } = inst.state;\r\n          if (name) {\r\n            const opp = opponents.find((item) => item.name === name);\r\n            if (webrtc) webrtc.whisper(opp.peer, 'sendEvent', [card]);\r\n          } else inst.state.getChamberMaid(card);\r\n          inst.updateMessage(\r\n            `${playerName} enva 1 ${card.name} a ${name || playerName}.`\r\n          );\r\n        },\r\n      };\r\n  }\r\n}\r\n\r\nfunction removePendingAttach(inst) {\r\n  inst.setState((prevState) => {\r\n    const removed = prevState.attachmentsLeft[0];\r\n    const left = [...prevState.attachmentsLeft].filter((foo, idx) => idx > 0);\r\n    let data = { attachmentsLeft: left };\r\n    if (left[0]) {\r\n      data = { ...data, ...getAttachInfo(inst, left[0]) };\r\n    } else if (removed.backToStart) {\r\n      data.gameState = 'startPhase';\r\n    } else data.gameState = 'discardPhase';\r\n    return data;\r\n  });\r\n}\r\n\r\nexport function handleAction(data, inst) {\r\n  if (data.type === 'auto') {\r\n    getTrueData(data.card).forcedAction(inst, ...(data.funcData || []));\r\n  }\r\n}\r\n\r\nexport function getTurnOrder(context) {\r\n  const { opponents, playerName, webrtc } = context.parentState;\r\n  const players = opponents.map((opp) => opp.name);\r\n  players.push(playerName);\r\n  const turnOrder = shuffle(players);\r\n  let message = 'El orden de juego es:';\r\n  turnOrder.forEach((name, idx) => {\r\n    message = `${message} ${idx > 0 ? '-> ' : ''}${name}`;\r\n  });\r\n  if (webrtc) {\r\n    webrtc.shout('turnOrder', turnOrder);\r\n    context.updateMessage(message);\r\n    context.updateParent({\r\n      msgTitle: `Turno de ${turnOrder[0]}`,\r\n      turnNum: 0,\r\n      gameState: turnOrder[0] === playerName ? 'startPhase' : 'opponentTurn',\r\n      turnOrder,\r\n    });\r\n  }\r\n}\r\n\r\nexport function finishTurn(context) {\r\n  const { webrtc, turnOrder, turnNum, playerName } = context.parentState;\r\n  if (webrtc) webrtc.shout('passTurn', {});\r\n  const newTurn = turnOrder[(turnNum + 1) % turnOrder.length];\r\n  context.updateParent(\r\n    {\r\n      msgTitle: `Turno de ${newTurn}`,\r\n      turnNum: turnNum + 1,\r\n      gameState: newTurn === playerName ? 'startPhase' : 'opponentTurn',\r\n    },\r\n    context.parentState.checkGameFinish\r\n  );\r\n}\r\n\r\nexport function checkGameFinish(inst) {\r\n  const { city } = inst.context.parentState;\r\n  let soldOut = 0;\r\n  city.forEach((item) => {\r\n    const { type, name, quantity } = item;\r\n    const validCard = name === 'cardback' || (type || '').includes('maid');\r\n    if (validCard && quantity === 0) soldOut += 1;\r\n  });\r\n  if (soldOut >= 2) {\r\n    finishGame(inst);\r\n  }\r\n}\r\n\r\nfunction finishGame(inst) {\r\n  const { playedCards, hand } = inst.state;\r\n  inst.context.updateParent(\r\n    (prevState) => {\r\n      const { deck, discard } = prevState;\r\n      return {\r\n        discard: [...discard, ...deck, ...hand, ...playedCards],\r\n        deck: [],\r\n        gameState: 'gameEnded',\r\n        msgTitle: 'Fin de la Partida',\r\n        message: \"Pulsa 'Resultados' para ver la clasificacin.\",\r\n      };\r\n    },\r\n    () => setTimeout(inst.context.parentState.getResults, 1000)\r\n  );\r\n  inst.setState({ playedCards: [], hand: [] });\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport './Field.css';\r\n\r\nimport CardBlock from './CardBlock';\r\nimport { getTrueData, hasTargets, getTurnOrder } from '../helpers/actions';\r\n\r\nexport default class Field extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { lovePaid: 0, cardsOrdered: 0 };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const { getDeck } = this.context.parentState;\r\n    if (!getDeck && nextContext.parentState.getDeck) {\r\n      this.buyCards(null, nextContext.parentState.sendTo);\r\n    }\r\n  }\r\n\r\n  updateCard = (name, newCard, cb) => {\r\n    this.context.updateParent((prevState) => {\r\n      const { city } = prevState;\r\n      const index = city.findIndex((card) => card.name === name);\r\n      city[index] = newCard;\r\n      return { city };\r\n    }, cb);\r\n  };\r\n\r\n  selectCard = (card, mode = 'new') => {\r\n    if (!card) return;\r\n    switch (mode) {\r\n      case 'plus':\r\n        card.selected += 1;\r\n        this.switchCard(card, 1);\r\n        break;\r\n      case 'minus':\r\n        card.selected -= 1;\r\n        this.switchCard(card, -1);\r\n        break;\r\n      default:\r\n        if (card.quantity !== 0 && !this.privateSelectedTwice(card)) {\r\n          if (!card.selected || card.selected < 1) {\r\n            card.selected = 1;\r\n            this.switchCard(card, 1);\r\n          }\r\n        }\r\n    }\r\n    this.updateCard(card.name, card);\r\n  };\r\n\r\n  switchCard = (card, sign) => {\r\n    this.setState((prevState) => {\r\n      const { lovePaid, cardsOrdered } = prevState;\r\n      return {\r\n        lovePaid: lovePaid + sign * card.cost,\r\n        cardsOrdered: cardsOrdered + sign,\r\n      };\r\n    });\r\n  };\r\n\r\n  privateSelectedTwice = (card) => {\r\n    const index = this.context.parentState.city.findIndex((item) => {\r\n      return item.selected >= 1 && item.type === 'privateMaid';\r\n    });\r\n    return index >= 0 && card.type === 'privateMaid';\r\n  };\r\n\r\n  buyCards = (event, sendToFunc) => {\r\n    const boughtCards = [];\r\n    let hasEvents = false;\r\n    const city = _.cloneDeep(this.context.parentState.city);\r\n    if (!sendToFunc) this.context.updateMessage(this.getBuyMsg(city));\r\n\r\n    city.forEach((card) => {\r\n      const { selected, name, type } = card;\r\n      if (selected && selected > 0) {\r\n        if (type === 'privateMaid') {\r\n          this.buyPrivateMaid(name);\r\n          this.context.parentState.getPrivateMaid(getTrueData(card));\r\n        } else {\r\n          card.selected = 0;\r\n          card.quantity -= selected;\r\n          this.updateCard(name, card, this.updatePeers);\r\n          if (type === 'event') {\r\n            hasEvents = true;\r\n            this.context.attachEvent(card, selected);\r\n          } else {\r\n            for (let i = 0; i < selected; i++) {\r\n              boughtCards.push(getTrueData(card));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    const useSendTo = typeof sendToFunc === 'function';\r\n    const sendFunc = useSendTo ? sendToFunc : this.sendToDiscard;\r\n\r\n    sendFunc(boughtCards);\r\n    this.setState({ lovePaid: 0, cardsOrdered: 0 });\r\n\r\n    if (!hasEvents && !sendToFunc)\r\n      this.context.updateParent({ gameState: 'discardPhase' });\r\n  };\r\n\r\n  getBuyMsg = (city) => {\r\n    const { playerName } = this.context.parentState;\r\n    let message = `${playerName} compra`;\r\n    let bought = false;\r\n    city.forEach((card) => {\r\n      if (card.selected) {\r\n        message = `${message} ${card.selected} ${card.name},`;\r\n        bought = true;\r\n      }\r\n    });\r\n    let parsedMsg = '';\r\n    message.split(',').forEach((msg, idx, list) => {\r\n      let end = idx === list.length - 3 ? ' y' : ',';\r\n      end = idx >= list.length - 2 ? '' : end;\r\n      parsedMsg = `${parsedMsg}${msg}${end}`;\r\n    });\r\n    return bought ? `${parsedMsg}.` : `${playerName} no compra nada.`;\r\n  };\r\n\r\n  sendToDiscard = (cards) => {\r\n    this.context.updateParent((prevState) => {\r\n      const newDiscard = [...prevState.discard];\r\n      newDiscard.push(...cards);\r\n      return { discard: newDiscard };\r\n    });\r\n  };\r\n\r\n  buyPrivateMaid = (name) => {\r\n    this.context.updateParent((prevState) => {\r\n      const { city, privateMaids } = prevState;\r\n      const cardBack = city.find((card) => card.name === 'cardback') || {};\r\n      const newCity = city.filter((card) => card.name !== name);\r\n      let newPrivateMaids = privateMaids;\r\n      if (privateMaids[0]) {\r\n        const backIndex = newCity.findIndex((card) => card.name === 'cardback');\r\n        newCity[backIndex] = {\r\n          ...cardBack,\r\n          quantity: cardBack.quantity - 1,\r\n        };\r\n        newCity.push(privateMaids[0]);\r\n        newPrivateMaids = privateMaids.filter((card, idx) => idx > 0);\r\n      }\r\n      return { city: newCity, privateMaids: newPrivateMaids };\r\n    }, this.updatePeers);\r\n  };\r\n\r\n  isSelectable = (card) => {\r\n    const { cost, name, type } = card;\r\n    if (name === 'cardback') return false;\r\n    if (type === 'event' && !hasTargets(this.context)) return false;\r\n\r\n    const { gameState, restrType, restrName, money } = this.context.parentState;\r\n    const picking = gameState === 'cityPick';\r\n    if (picking && restrType.includes(type)) return false;\r\n    if (picking && restrName.includes(name)) return false;\r\n\r\n    const { love, contract } = money;\r\n    const { lovePaid, cardsOrdered } = this.state;\r\n    return love >= cost + lovePaid && contract > cardsOrdered;\r\n  };\r\n\r\n  updatePeers = () => {\r\n    const { city, privateMaids, webrtc } = this.context.parentState;\r\n    if (webrtc) webrtc.shout('cityUpdate', { city, privateMaids });\r\n  };\r\n\r\n  render() {\r\n    const { city, gameState, sendTo, mainPlayer } = this.context.parentState;\r\n    const picking = gameState === 'cityPick';\r\n    const buying = gameState === 'contractPhase' || picking;\r\n\r\n    return (\r\n      <div className=\"Field\">\r\n        <div style={{ float: 'left' }}>\r\n          {city &&\r\n            city.map((item) => (\r\n              <CardBlock\r\n                card={item}\r\n                selectCard={this.selectCard}\r\n                selectable={buying && this.isSelectable(item)}\r\n              />\r\n            ))}\r\n          {buying && (\r\n            <button\r\n              type=\"button\"\r\n              style={{ marginLeft: '2vw' }}\r\n              onClick={() => this.buyCards(null, picking ? sendTo : null)}\r\n            >\r\n              Hecho\r\n            </button>\r\n          )}\r\n          {gameState === 'gameSetUp' && mainPlayer && (\r\n            <button\r\n              type=\"button\"\r\n              style={{ marginLeft: '2vw' }}\r\n              onClick={() => getTurnOrder(this.context)}\r\n            >\r\n              Empezar\r\n            </button>\r\n          )}\r\n          {gameState === 'gameEnded' && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                this.context.updateParent({ showResultsModal: true });\r\n              }}\r\n            >\r\n              Resultados\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './MessageArea.css';\r\n\r\nexport default class MessageArea extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  getMessage = () => {\r\n    return this.context.parentState.message.split('&').map((item, idx) => {\r\n      if (idx % 2 === 0) return item;\r\n      return (\r\n        <img\r\n          alt=\"icon\"\r\n          src={require(`../playerArea/iconFooter/icons/${item}.png`)}\r\n        ></img>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"msgArea\">\r\n        <div className=\"msgTitle\">{this.context.parentState.msgTitle}</div>\r\n        <div className=\"msgContent\">{this.getMessage()}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function ImageArea(props) {\r\n  return (\r\n    <div style={{ display: 'block', width: '100%' }}>\r\n      {props.name && props.name !== 'cardback' && (\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${props.name}.jpg`)}\r\n          style={{\r\n            maxWidth: '21vw',\r\n            float: 'center',\r\n            display: 'block',\r\n            margin: 'auto',\r\n            userSelect: 'none',\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export const defaultStyle = {\r\n  overlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(255, 255, 255, 0)',\r\n  },\r\n  content: {\r\n    position: 'absolute',\r\n    top: '10%',\r\n    left: '22%',\r\n    width: '54vw',\r\n    height: '60vh',\r\n    border: 'none',\r\n    overflow: 'auto',\r\n    WebkitOverflowScrolling: 'touch',\r\n    borderRadius: '4px',\r\n    outline: 'none',\r\n    padding: '20px',\r\n    paddingTop: '10px',\r\n  },\r\n};\r\n\r\nexport const privateMaidsStyle = {\r\n  overlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(255, 255, 255, 0)',\r\n  },\r\n  content: {\r\n    position: 'absolute',\r\n    top: '30%',\r\n    left: '19%',\r\n    width: '60vw',\r\n    height: '50vh',\r\n    border: 'none',\r\n    overflow: 'auto',\r\n    WebkitOverflowScrolling: 'touch',\r\n    borderRadius: '4px',\r\n    outline: 'none',\r\n    padding: '20px',\r\n    paddingTop: '10px',\r\n  },\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport './CardDisplayModal.css';\r\n\r\nimport { defaultStyle, privateMaidsStyle } from './defaultStyle';\r\n\r\nexport default function CardDisplayModal(props, context) {\r\n  const {\r\n    showModal,\r\n    hideModal,\r\n    background,\r\n    cards,\r\n    title,\r\n    mode,\r\n    extraCmp,\r\n    oppName,\r\n  } = props;\r\n\r\n  const { overlay, content } =\r\n    mode === 'privateMaids' ? privateMaidsStyle : defaultStyle;\r\n\r\n  let extraClass = mode === 'privateMaids' ? 'privateModal chamberModal' : '';\r\n  if (mode === 'chamber') extraClass = 'chamberModal';\r\n\r\n  const maxAttach = getMaxAttachment(cards);\r\n\r\n  return (\r\n    <ReactModal\r\n      isOpen={showModal}\r\n      style={{ overlay, content: { ...content, background } }}\r\n      onRequestClose={hideModal}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className={`CardDisplayModal ${extraClass}`}>\r\n        <h1>{title}</h1>\r\n        <div className=\"cards\">\r\n          {typeof extraCmp === 'function' && extraCmp()}\r\n          {cards.map((card, idx) =>\r\n            renderCard(card, idx, context, mode, maxAttach, oppName)\r\n          )}\r\n        </div>\r\n        <button type=\"button\" onClick={hideModal}>\r\n          OK\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nCardDisplayModal.contextTypes = {\r\n  updateImage: PropTypes.func,\r\n  parentState: PropTypes.object,\r\n};\r\n\r\nfunction getImage(route, context, style, selectInfo) {\r\n  const { imageClass, onClick } = selectInfo;\r\n\r\n  return (\r\n    <img\r\n      alt=\"noseve\"\r\n      src={require(`../cards/${route}.jpg`)}\r\n      className={imageClass}\r\n      onMouseOver={() => {\r\n        context.updateImage(route);\r\n      }}\r\n      onMouseOut={() => {\r\n        context.updateImage(null);\r\n      }}\r\n      onClick={onClick}\r\n      style={style || {}}\r\n    />\r\n  );\r\n}\r\n\r\nfunction renderCard(card, cardIdx, context, mode, maxAttach, oppName) {\r\n  const { chambered, attachments } = card;\r\n  const AttachmentsDisplay = (attachments || []).map((item, idx) => {\r\n    return getImage(\r\n      getRoute(item),\r\n      context,\r\n      { position: 'absolute', top: `${1.5 * (idx + 1)}vw`, left: 0 },\r\n      getSelectInfo(mode, card, cardIdx, context, oppName, item)\r\n    );\r\n  });\r\n  const info = getSelectInfo(mode, card, cardIdx, context, oppName);\r\n\r\n  return (\r\n    <div className=\"cardBlock\">\r\n      <div style={{ position: 'relative' }}>\r\n        {getImage(getRoute(card), context, {}, info)}\r\n        {AttachmentsDisplay}\r\n      </div>\r\n      {mode === 'chamber' && (\r\n        <h3 style={{ marginTop: `calc(${maxAttach * 1.5}vw - 8px)` }}>\r\n          {chambered}\r\n        </h3>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getRoute(card) {\r\n  const { name, set } = card;\r\n  return set ? `set${set}/${name}` : name;\r\n}\r\n\r\nfunction getMaxAttachment(cards) {\r\n  const attachNums = cards.map((item) =>\r\n    item.attachments ? item.attachments.length : 0\r\n  );\r\n  return Math.max(...attachNums);\r\n}\r\n\r\nfunction getSelectInfo(mode, card, cardIdx, context, oppName, attach) {\r\n  const { gameState, maidClick, eventClick } = context.parentState;\r\n  const { type } = card;\r\n\r\n  if (gameState === 'targetEvent' && eventClick) {\r\n    if (type === 'event' || attach) {\r\n      return {\r\n        imageClass: 'selectable',\r\n        onClick: () =>\r\n          eventClick(attach || card, cardIdx, type === 'privateMaid', oppName),\r\n      };\r\n    }\r\n  }\r\n  const selecting = maidClick && gameState === 'targetChamberMaid';\r\n  const chamberCard = mode === 'chamber' && type.includes('maid');\r\n  const privateMaid = type === 'privateMaid' && cardIdx === 0;\r\n  const clickable = selecting && (chamberCard || privateMaid);\r\n\r\n  const imageClass = clickable ? 'selectable' : '';\r\n  const imageClick = () => {\r\n    maidClick(cardIdx, type === 'privateMaid', oppName);\r\n  };\r\n  const onClick = clickable ? imageClick : () => {};\r\n  return { imageClass, onClick };\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\n\r\nexport default class PlayZone extends React.Component {\r\n  static contextTypes = {\r\n    playerState: PropTypes.object,\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  render() {\r\n    const { playedCards } = this.context.playerState || {};\r\n    const { oppCards, oppName } = this.props;\r\n    const cards = oppCards || playedCards;\r\n    const limit = oppCards ? 4 : 12;\r\n\r\n    return [\r\n      <div\r\n        className={`${oppCards ? 'OppPlay' : 'PlayZone'} showesModal`}\r\n        title={\r\n          oppCards ? `Cartas Jugadas por ${oppName}` : 'Tus Cartas Jugadas'\r\n        }\r\n        onClick={this.showModal}\r\n      >\r\n        {cards.map((card, idx) => {\r\n          const { name, set } = card;\r\n          const route = set ? `set${set}/${name}` : name;\r\n          return (\r\n            idx < limit && (\r\n              <img alt=\"noseve\" src={require(`../../cards/${route}.jpg`)} />\r\n            )\r\n          );\r\n        })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        background=\"rgba(179, 179, 0, 0.85)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={cards}\r\n        title={\r\n          oppCards ? `Cartas Jugadas por ${oppName}` : 'Tus Cartas Jugadas'\r\n        }\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import { getTrueData, finishTurn } from '../../../helpers/actions';\r\n\r\nexport const config = {\r\n  servingPhase: {\r\n    message: 'Fase de Servicios',\r\n    button2Text: 'Fase de Contratacin',\r\n    button2Click: (context) => {\r\n      const { hand } = context.playerState;\r\n      const { playerName } = context.parentState;\r\n      const loveCards = hand.filter((card) => card.type === 'love');\r\n      const newDiscards = hand.filter((card) => card.type !== 'love');\r\n      let love = 0;\r\n      let contract = 0;\r\n\r\n      context.updatePlayer(\r\n        (prevState) => {\r\n          love = prevState.love;\r\n          contract = prevState.contract;\r\n          const playedCards = [...prevState.playedCards];\r\n          playedCards.push(...loveCards);\r\n          loveCards.forEach((card) => (love += card.love));\r\n          return { love, servings: 0, hand: [], playedCards };\r\n        },\r\n        () => {\r\n          context.updateParent((prevState) => {\r\n            const discard = [...prevState.discard];\r\n            discard.push(...newDiscards);\r\n            return {\r\n              gameState: 'contractPhase',\r\n              discard,\r\n              money: { love, contract },\r\n            };\r\n          });\r\n          context.updateMessage(\r\n            `${playerName} termina su fase de Servicios con ${love} &love& y ${contract} &contract&`\r\n          );\r\n        }\r\n      );\r\n    },\r\n  },\r\n  contractPhase: { message: 'Fase de Contratacin' },\r\n  discardPhase: {\r\n    button2Text: 'Fin de Turno',\r\n    button2Click: (context) => {\r\n      const endTurn = () => {\r\n        context.draw(5, () => finishTurn(context));\r\n      };\r\n      const discardAction = getDiscardAction(context);\r\n      if (discardAction) {\r\n        discardAction(context, endTurn);\r\n      } else endTurn();\r\n    },\r\n  },\r\n  opponentTurn: { message: '', button2Text: null },\r\n  gameEnded: { message: '', button2Text: null },\r\n  startPhase: {\r\n    message: 'Fase de Inicio',\r\n    button2Text: 'Fase de Servicios',\r\n    button2Click: (context) => {\r\n      context.updateParent({ gameState: 'servingPhase' });\r\n    },\r\n  },\r\n};\r\n\r\nfunction getDiscardAction(context) {\r\n  const { opponents } = context.parentState;\r\n  const bullyOpp = opponents.find((opp) => {\r\n    const oppMaid = getTrueData(opp.data.boughtPrivateMaids[0]);\r\n    if (!oppMaid || !oppMaid.onOppDiscard) return false;\r\n    return !hasIllness(oppMaid);\r\n  });\r\n  return (\r\n    bullyOpp && getTrueData(bullyOpp.data.boughtPrivateMaids[0]).onOppDiscard\r\n  );\r\n}\r\n\r\nfunction hasIllness(card) {\r\n  if (!card.attachments) return false;\r\n  return card.attachments.find((item) => item.name === 'Illness');\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { config } from './playerActions';\r\nimport { handSelect } from '../helpers/dataUpdates';\r\n\r\nexport default class HandZone extends React.Component {\r\n  static contextTypes = {\r\n    playerState: PropTypes.object,\r\n    updateImage: PropTypes.func,\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    updatePlayer: PropTypes.func,\r\n    draw: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { message: '', usadaJoder: 'no' };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.context.updateParent({ setActions: (data) => this.setState(data) });\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const newState = nextContext.parentState.gameState;\r\n    const change = this.context.parentState.gameState !== newState;\r\n    if (change && config[newState]) {\r\n      this.setState({\r\n        message: '',\r\n        button1Text: null,\r\n        button2Text: null,\r\n        ...config[newState],\r\n      });\r\n    }\r\n    const { attachmentsLeft } = nextContext.parentState;\r\n    if (change && newState === 'targetPlayer' && attachmentsLeft[0]) {\r\n      const { name } = attachmentsLeft[0];\r\n      this.setState({ message: `Asigna ${name} a un Jugador` });\r\n    }\r\n    if (change && newState === 'targetChamberMaid' && attachmentsLeft[0]) {\r\n      const { name } = attachmentsLeft[0];\r\n      this.setState({ message: `Asigna ${name} a una Doncella` });\r\n    }\r\n    if (change && newState === 'startPhase') {\r\n      this.setState({ usadaJoder: 'no' });\r\n    }\r\n    if (change && this.context.parentState.gameState === 'opponentTurn') {\r\n      this.setState({\r\n        usadaJoder: 'no',\r\n        handSelection: null,\r\n        selectionOn: null,\r\n      });\r\n    }\r\n  }\r\n\r\n  button1 = () => this.state.button1Click(this.context);\r\n  button2 = () =>\r\n    this.state.button2Click(this.context, this.state.handSelection);\r\n\r\n  getCardPlay = (card, idx) => {\r\n    const { selectionOn, button1Text } = this.state;\r\n    if (selectionOn) return () => handSelect(this, idx);\r\n    if (button1Text) return null;\r\n\r\n    const { servings } = this.context.playerState;\r\n    const { type, chamberCost } = card;\r\n    if (chamberCost && servings >= chamberCost) {\r\n      if (type === 'maid' && servings > 0) {\r\n        return () => {\r\n          this.setState((prevState) => {\r\n            const data = { prevState, card, idx };\r\n            return {\r\n              message: `Qu quieres hacer con ${card.name} ?`,\r\n              button1Text: 'Jugarla',\r\n              button2Text: 'Poner como Doncella',\r\n              button1Click: () => this.msgButton(data, this.cardPlay),\r\n              button2Click: () => this.msgButton(data, this.cardChamber),\r\n            };\r\n          });\r\n        };\r\n      }\r\n      return () => this.cardChamber(card, idx);\r\n    } else if (type === 'maid' && servings > 0) {\r\n      return () => this.cardPlay(card, idx);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  msgButton = (data, func) => {\r\n    const { prevState, card, idx } = data;\r\n    this.setState(prevState, () => func(card, idx));\r\n  };\r\n\r\n  cardPlay = (card, cardIdx) => {\r\n    const { love = 0, servings = 0, contract = 0, onPlay } = card;\r\n    if (card.draw > 0) {\r\n      this.draw(card.draw, () => {\r\n        if (typeof onPlay === 'function') onPlay(this, card);\r\n      });\r\n    } else if (typeof onPlay === 'function') onPlay(this, card);\r\n    this.context.updatePlayer((prevState) => {\r\n      const hand = [...prevState.hand];\r\n      const playedCards = [...prevState.playedCards];\r\n      playedCards.push(card);\r\n      return {\r\n        love: prevState.love + love,\r\n        servings: prevState.servings + servings - 1,\r\n        contract: prevState.contract + contract,\r\n        hand: hand.filter((foo, idx) => idx !== cardIdx),\r\n        playedCards,\r\n      };\r\n    });\r\n  };\r\n\r\n  cardChamber = (card, cardIdx) => {\r\n    this.context.updatePlayer((prevState) => {\r\n      const hand = [...prevState.hand].filter((foo, idx) => idx !== cardIdx);\r\n      return { servings: prevState.servings - card.chamberCost, hand };\r\n    });\r\n    this.context.parentState.getChamberMaid(card);\r\n  };\r\n\r\n  draw = (amount, cb) => {\r\n    this.context.draw(amount);\r\n    const currentMaid = this.context.parentState.getCurrentMaid();\r\n    if (currentMaid && currentMaid.onDraw && this.state.usadaJoder === 'no') {\r\n      currentMaid.onDraw(this, cb);\r\n    } else cb();\r\n  };\r\n\r\n  render() {\r\n    const { hand } = this.context.playerState;\r\n    const { message, handSelection, button1Text, button1Click } = this.state;\r\n    const { button2Text, button2Click } = this.state;\r\n    const space = 0.9;\r\n\r\n    return (\r\n      <div className=\"HandZone\">\r\n        <h6>{message}</h6>\r\n        <div className=\"handCards\">\r\n          {hand.map((card, idx, list) => {\r\n            const { name, set } = card;\r\n            const play = this.getCardPlay(card, idx);\r\n            const selected = handSelection && handSelection.includes(idx);\r\n            const route = set ? `set${set}/${name}` : name;\r\n            return (\r\n              <img\r\n                alt=\"noseve\"\r\n                src={require(`../../../cards/${route}.jpg`)}\r\n                className={`${play ? 'playable' : ''} ${\r\n                  selected ? 'selected' : ''\r\n                }`}\r\n                onMouseOver={() => {\r\n                  this.context.updateImage(route);\r\n                }}\r\n                onMouseOut={() => {\r\n                  this.context.updateImage(null);\r\n                }}\r\n                onClick={typeof play === 'function' ? play : () => {}}\r\n                style={{\r\n                  left: `${8.9 + space * 2 * idx - space * list.length}vw`,\r\n                  zIndex: list.length - idx,\r\n                }}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        {button1Text && button1Click && (\r\n          <button type=\"button\" style={{ left: '5px' }} onClick={this.button1}>\r\n            {button1Text}\r\n          </button>\r\n        )}\r\n        {button2Text && button2Click && (\r\n          <button type=\"button\" style={{ right: '5px' }} onClick={this.button2}>\r\n            {button2Text}\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from './CardDisplayModal';\r\n\r\nexport default class PrivateMaidsDisplay extends React.Component {\r\n  static contextTypes = {\r\n    updateImage: PropTypes.func,\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  getDisplayedMaids = () => {\r\n    const { privateMaids } = this.props;\r\n    const displayedMaids = [];\r\n    for (let i = 2; i >= 0; i--) {\r\n      if (privateMaids[i]) {\r\n        displayedMaids.push(this.getRoute(privateMaids[i]));\r\n        const { attachments } = privateMaids[i];\r\n        (attachments || []).forEach((item) => {\r\n          displayedMaids.push(this.getRoute(item));\r\n        });\r\n      }\r\n    }\r\n    return displayedMaids.filter((foo, idx) => {\r\n      return idx >= displayedMaids.length - 3;\r\n    });\r\n  };\r\n\r\n  getRoute = (card) => {\r\n    const { name, set } = card;\r\n    return set ? `set${set}/${name}` : name;\r\n  };\r\n\r\n  getCardImage = (card, topMaid, style) => {\r\n    const { gameState } = this.context.parentState;\r\n    const selecting =\r\n      gameState === 'targetChamberMaid' || gameState === 'targetEvent';\r\n    return (\r\n      <img\r\n        alt=\"noseve\"\r\n        className={`showesModal ${selecting ? 'selectable' : ''}`}\r\n        title=\"Tus Maids Particulares\"\r\n        src={require(`../cards/${card}.jpg`)}\r\n        onMouseOver={() => {\r\n          this.context.updateImage(topMaid);\r\n        }}\r\n        onMouseOut={() => {\r\n          this.context.updateImage(null);\r\n        }}\r\n        onClick={this.showModal}\r\n        style={style}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { oppName } = this.props;\r\n    const displayedMaids = this.getDisplayedMaids();\r\n    if (displayedMaids.length <= 0) return null;\r\n    const topMaid = displayedMaids[displayedMaids.length - 1];\r\n\r\n    return [\r\n      <div className=\"cardBlock\" style={{ position: 'relative' }}>\r\n        {this.getCardImage(displayedMaids[0], topMaid, {})}\r\n        {displayedMaids[1] &&\r\n          this.getCardImage(displayedMaids[1], topMaid, {\r\n            position: 'absolute',\r\n            top: '1.5vw',\r\n            left: 0,\r\n          })}\r\n        {displayedMaids[2] &&\r\n          this.getCardImage(displayedMaids[2], topMaid, {\r\n            position: 'absolute',\r\n            top: '3vw',\r\n            left: 0,\r\n          })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        showModal={this.state.show}\r\n        background=\"rgba(0,0,0,0.75)\"\r\n        cards={this.props.privateMaids}\r\n        hideModal={this.hideModal}\r\n        oppName={oppName}\r\n        title={\r\n          oppName ? `Maids Particulares de ${oppName}` : 'Tus Maids Paticulares'\r\n        }\r\n        mode=\"privateMaids\"\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\nimport PrivateMaidsDisplay from '../../cardDisplayModal/PrivateMaidsDisplay';\r\nimport { checkChamberMaids } from '../../helpers/actions';\r\nimport { getChamberMaid, getAttachment, getVP } from './helpers/dataUpdates';\r\n\r\nexport default class ChamberZone extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    updatePlayer: PropTypes.func,\r\n    updateImage: PropTypes.func,\r\n    playerState: PropTypes.object,\r\n    draw: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show: false,\r\n      usadaJoder: 'no',\r\n      chamberMaids: [],\r\n      boughtPrivateMaids: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.oppName) {\r\n      this.context.updateParent({\r\n        getChamberMaid: (card, add) => getChamberMaid(this, card, add),\r\n        getPrivateMaid: this.getPrivateMaid,\r\n        getAttachment: (data) => getAttachment(this, data),\r\n        hasChamberMaids: () => checkChamberMaids(this.state),\r\n        hasPlayables: this.hasPlayables,\r\n        getCurrentMaid: this.getHealthyMaid,\r\n        getDefend: (data) => this.defend(data),\r\n        getResults: this.getResults,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { chamberMaids, boughtPrivateMaids } = this.state;\r\n    const { webrtc, playerName } = this.context.parentState;\r\n    if (\r\n      webrtc &&\r\n      !_.isEqual(boughtPrivateMaids, prevState.boughtPrivateMaids)\r\n    ) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { boughtPrivateMaids },\r\n      });\r\n    }\r\n    if (webrtc && !_.isEqual(chamberMaids, prevState.chamberMaids)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { chamberMaids },\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    if (!this.props.oppName) {\r\n      const oldState = this.context.parentState.gameState || '';\r\n      const newState = nextContext.parentState.gameState;\r\n      if (oldState !== newState && newState === 'startPhase') {\r\n        if (!oldState.includes('target')) this.setState({ usadaJoder: 'no' });\r\n        const currentMaid = this.getHealthyMaid();\r\n        if (currentMaid && currentMaid.onStart) {\r\n          if (currentMaid.auto) currentMaid.onStart(this.context);\r\n        } else if (!this.hasPlayables()) {\r\n          this.context.updateParent({\r\n            gameState: 'servingPhase',\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getPrivateMaid = (card) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        boughtPrivateMaids: [card, ...prevState.boughtPrivateMaids],\r\n      };\r\n    });\r\n  };\r\n\r\n  defend = (data) => {\r\n    const defensor = this.context.playerState.hand.find(\r\n      (maid) => maid.onDefend\r\n    );\r\n    if (defensor) defensor.onDefend(this, data);\r\n  };\r\n\r\n  getResults = () => {\r\n    const playerRes = {\r\n      name: this.context.parentState.playerName,\r\n      vp: getVP(this),\r\n    };\r\n    this.context.updateParent({ results: [playerRes] });\r\n    const { webrtc } = this.context.parentState;\r\n    if (webrtc)\r\n      setTimeout(\r\n        () => webrtc.shout('results', playerRes),\r\n        Math.random() * 1500\r\n      );\r\n  };\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  getRoute = (card) => {\r\n    const { name, set } = card;\r\n    return set ? `set${set}/${name}` : name;\r\n  };\r\n\r\n  hasIllness = (card) => {\r\n    if (!card.attachments) return false;\r\n    return card.attachments.find((item) => item.name === 'Illness');\r\n  };\r\n\r\n  getHealthyMaid = () => {\r\n    const currentMaid = this.state.boughtPrivateMaids[0];\r\n    if (!currentMaid) return null;\r\n    return this.hasIllness(currentMaid) ? null : currentMaid;\r\n  };\r\n\r\n  hasPlayables = () => {\r\n    const { chamberMaids, boughtPrivateMaids } = this.state;\r\n    return [...chamberMaids, boughtPrivateMaids[0] || {}].find((maid) => {\r\n      const illness = this.hasIllness(maid);\r\n      return illness && illness.restric(this.context);\r\n    });\r\n  };\r\n\r\n  getExtra = (card, idx, isPrivate) => {\r\n    const { gameState, illnessClick } = this.context.parentState;\r\n    if (gameState === 'targetIllness' && card.name === 'Illness') {\r\n      return {\r\n        className: 'playable',\r\n        onClick: (e) => {\r\n          e.stopPropagation();\r\n          illnessClick(this, idx, isPrivate);\r\n        },\r\n      };\r\n    }\r\n\r\n    if (isPrivate && this.state.usadaJoder === 'si') return {};\r\n    if (card.restric && !card.restric(this.context)) return {};\r\n    if (gameState !== 'startPhase') return {};\r\n    if (card.auto || !card.onStart || this.hasIllness(card)) return {};\r\n    return {\r\n      className: 'playable',\r\n      onClick: (e) => {\r\n        e.stopPropagation();\r\n        card.onStart(this, idx, isPrivate);\r\n      },\r\n      onMouseOver: () => this.context.updateImage(this.getRoute(card)),\r\n      onMouseOut: () => this.context.updateImage(null),\r\n    };\r\n  };\r\n\r\n  renderCard = (card, idx) => {\r\n    const { attachments, type } = card;\r\n    const hasAttachments = attachments && attachments[0];\r\n    const topAttachment = hasAttachments && attachments[attachments.length - 1];\r\n    const isPrivate = type === 'privateMaid';\r\n\r\n    return (\r\n      <div style={{ position: 'relative', float: 'left' }}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../../cards/${this.getRoute(card)}.jpg`)}\r\n          {...(this.props.oppName ? {} : this.getExtra(card, idx, isPrivate))}\r\n        />\r\n        {hasAttachments && (\r\n          <img\r\n            alt=\"noseve\"\r\n            src={require(`../../cards/${this.getRoute(topAttachment)}.jpg`)}\r\n            {...(this.props.oppName\r\n              ? {}\r\n              : this.getExtra(topAttachment, idx, isPrivate))}\r\n            style={{\r\n              position: 'absolute',\r\n              top: '0.4vw',\r\n              left: 0,\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { oppName, oppIdx } = this.props;\r\n    const { opponents, gameState } = this.context.parentState;\r\n    const data = oppName ? opponents[oppIdx].data : this.state;\r\n    const { chamberMaids, boughtPrivateMaids } = data;\r\n\r\n    const currentMaid = boughtPrivateMaids[0];\r\n    let displayLimit = currentMaid ? 7 : 8;\r\n    if (oppName) displayLimit = currentMaid ? 3 : 4;\r\n\r\n    const hasMaids =\r\n      currentMaid || chamberMaids.find((maid) => maid.type.includes('maid'));\r\n    let hasBorder = gameState === 'targetChamberMaid' && hasMaids;\r\n    hasBorder = hasBorder || gameState === 'targetEvent';\r\n\r\n    return [\r\n      <div\r\n        className={`${oppName ? 'OppChamber' : 'ChamberZone'} showesModal ${\r\n          hasBorder ? 'selectable' : ''\r\n        }`}\r\n        title={\r\n          oppName\r\n            ? `Habitacin Privada de ${oppName}`\r\n            : ' Tu Habitacin Privada'\r\n        }\r\n        onClick={this.showModal}\r\n      >\r\n        {currentMaid && this.renderCard(currentMaid)}\r\n        {chamberMaids.map((card, idx, list) => {\r\n          return idx < displayLimit ? this.renderCard(card, idx) : null;\r\n        })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        extraCmp={() => (\r\n          <PrivateMaidsDisplay\r\n            privateMaids={boughtPrivateMaids}\r\n            oppName={oppName}\r\n          />\r\n        )}\r\n        background=\"rgba(0, 190, 0, 0.8)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={chamberMaids}\r\n        oppName={oppName}\r\n        title={\r\n          oppName\r\n            ? `Habitacin Privada de ${oppName}`\r\n            : ' Tu Habitacin Privada'\r\n        }\r\n        mode=\"chamber\"\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\n\r\nexport default class DeckZone extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  render() {\r\n    const { opponents, gameState } = this.context.parentState;\r\n    const { oppName, oppIdx } = this.props;\r\n\r\n    const { discard, deck } = oppName\r\n      ? opponents[oppIdx].data\r\n      : this.context.parentState;\r\n    const deckLength = deck && deck.length;\r\n    const pileName =\r\n      gameState === 'gameEnded' ? 'Cartas Compradas' : 'Descartes';\r\n\r\n    const deckVisible = deckLength === 0 ? 'hidden' : 'visible';\r\n    const discardTop = discard.length > 0 && discard[discard.length - 1];\r\n    const { name, set } = discardTop || {};\r\n    const route = set ? `set${set}/${name}` : name;\r\n\r\n    return [\r\n      <div className={oppName ? 'OppDeck' : 'DeckZone'}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require('../../cards/cardback.jpg')}\r\n          title={oppName ? `Mazo de ${oppName}` : 'Tu Mazo'}\r\n          style={{ marginBottom: '1.5vh', visibility: deckVisible }}\r\n        />\r\n        {discardTop && (\r\n          <img\r\n            alt=\"noseve\"\r\n            className=\"showesModal\"\r\n            title={oppName ? `${pileName} de ${oppName}` : `Tus ${pileName}`}\r\n            onClick={this.showModal}\r\n            src={require(`../../cards/${route}.jpg`)}\r\n          />\r\n        )}\r\n      </div>,\r\n      <CardDisplayModal\r\n        background=\"rgba(255, 153, 153, 0.9)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={[...discard].reverse()}\r\n        title={oppName ? `${pileName} de ${oppName}` : `Tus ${pileName}`}\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function IconFooter(props) {\r\n  const { data, firstLeft } = props;\r\n  return data.map((item, idx) => {\r\n    return getIconValue(item[0], item[1], firstLeft + idx * 6);\r\n  });\r\n}\r\n\r\nfunction getIconValue(image, value, left) {\r\n  return [\r\n    <div className=\"IconFooter\" style={{ left: `${left}vw` }}>\r\n      <img alt=\"noseve\" src={require(`./icons/${image}`)} />\r\n    </div>,\r\n    <div\r\n      className=\"IconFooter\"\r\n      style={{ backgroundColor: '#ffadd7', left: `${left + 3}vw` }}\r\n    >\r\n      {value || 0}\r\n    </div>,\r\n  ];\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport './MainPlayer.css';\r\n\r\nimport PlayZone from './playerZones/PlayZone';\r\nimport HandZone from './playerZones/handZone/HandZone';\r\nimport ChamberZone from './playerZones/ChamberZone';\r\nimport DeckZone from './playerZones/DeckZone';\r\nimport './playerZones/PlayerZones.css';\r\n\r\nimport IconFooter from './iconFooter/IconFooter';\r\nimport { shuffle, handleAction, checkGameFinish } from '../helpers/actions';\r\n\r\nconst serviceStates = ['cityPick', 'targetIllness', 'targetPlayer'];\r\n\r\nexport default class MainPlayer extends React.Component {\r\n  static childContextTypes = {\r\n    playerState: PropTypes.object,\r\n    updatePlayer: PropTypes.func,\r\n    draw: PropTypes.func,\r\n  };\r\n\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hand: [], playedCards: [], love: 0, servings: 0 };\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      playerState: this.state,\r\n      updatePlayer: (data, cb) => {\r\n        this.setState(data, () => {\r\n          if (typeof cb === 'function') cb();\r\n        });\r\n      },\r\n      draw: this.drawAndReload,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.context.updateParent({\r\n      getInitialHand: () => this.drawCards(5),\r\n      getForcedAction: (data) => handleAction(data, this),\r\n      checkGameFinish: () => checkGameFinish(this),\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { hand, playedCards } = this.state;\r\n    const { webrtc, playerName } = this.context.parentState;\r\n\r\n    if (webrtc && !_.isEqual(hand, prevState.hand)) {\r\n      webrtc.shout('oppUpdate', { name: playerName, data: { hand } });\r\n    }\r\n    if (webrtc && !_.isEqual(playedCards, prevState.playedCards)) {\r\n      webrtc.shout('oppUpdate', { name: playerName, data: { playedCards } });\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const oldState = this.context.parentState.gameState;\r\n    const newState = nextContext.parentState.gameState;\r\n    if (oldState !== newState) {\r\n      if (newState === 'servingPhase' && !serviceStates.includes(oldState)) {\r\n        this.setState((prevState) => {\r\n          const { servings, contract } = prevState;\r\n          return {\r\n            servings: (servings || 0) + 1,\r\n            contract: (contract || 0) + 1,\r\n          };\r\n        });\r\n      } else if (newState === 'discardPhase') {\r\n        let playedCards = [];\r\n        this.setState((prevState) => {\r\n          playedCards = prevState.playedCards;\r\n          return { contract: 0, love: 0, playedCards: [] };\r\n        });\r\n        this.context.updateParent((prevState) => {\r\n          const discard = [...prevState.discard];\r\n          discard.push(...playedCards);\r\n          return { discard }; // pasar turno\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  drawAndReload = (amount, cb) => {\r\n    this.context.updateParent(\r\n      (prevState) => {\r\n        const { deck, discard } = prevState;\r\n        if (deck.length < amount) {\r\n          return { deck: [...deck, ...shuffle([...discard])], discard: [] };\r\n        }\r\n        return {};\r\n      },\r\n      () => this.drawCards(amount, cb)\r\n    );\r\n  };\r\n\r\n  drawCards = (amount, cb = () => {}) => {\r\n    const { deck, webrtc, playerName } = this.context.parentState;\r\n    const hand = [...deck.splice(0, amount), ...this.state.hand];\r\n    this.setState({ hand }, () => cb(hand));\r\n    this.context.updateParent({ deck }, () => {\r\n      if (webrtc)\r\n        webrtc.shout('oppUpdate', {\r\n          name: playerName,\r\n          data: { deck },\r\n        });\r\n    });\r\n  };\r\n\r\n  getRightFooter = () => {\r\n    const { deck, discard } = this.context.parentState;\r\n    const { hand } = this.state;\r\n    return {\r\n      data: [\r\n        ['deck.png', deck && deck.length],\r\n        ['hand.png', hand && hand.length],\r\n        ['trash.png', discard && discard.length],\r\n      ],\r\n      firstLeft: 57,\r\n    };\r\n  };\r\n\r\n  getLeftFooter = () => {\r\n    const { servings, love, contract } = this.state;\r\n    return {\r\n      data: [\r\n        ['servings.png', servings],\r\n        ['love.png', love],\r\n        ['contract.png', contract],\r\n      ],\r\n      firstLeft: 25,\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { parentState } = this.context;\r\n    const {\r\n      gameState,\r\n      playerClick,\r\n      playerName,\r\n      hasChamberMaids,\r\n      freeChambersToo,\r\n    } = parentState;\r\n    const checkMaids =\r\n      (typeof hasChamberMaids === 'function' && hasChamberMaids()) ||\r\n      freeChambersToo;\r\n    const circleOn = gameState === 'targetPlayer' && playerClick && checkMaids;\r\n    const playerClass = circleOn ? 'selectable' : '';\r\n    const circleClick = circleOn ? playerClick : () => {};\r\n\r\n    return (\r\n      <div className=\"PlayerArea\">\r\n        <div className=\"PlayerTable\">\r\n          <PlayZone />\r\n          <HandZone />\r\n          <ChamberZone />\r\n          <DeckZone />\r\n        </div>\r\n        <span\r\n          className={`PlayerCircle ${playerClass}`}\r\n          onClick={() => {\r\n            circleClick(null);\r\n          }}\r\n        >\r\n          {playerName}\r\n        </span>\r\n        <IconFooter {...this.getRightFooter()} />\r\n        <IconFooter {...this.getLeftFooter()} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './OppZones.css';\r\nimport './playerZones/PlayerZones.css';\r\n\r\nimport PlayZone from './playerZones/PlayZone';\r\nimport ChamberZone from './playerZones/ChamberZone';\r\nimport DeckZone from './playerZones/DeckZone';\r\nimport { checkChamberMaids } from '../helpers/actions';\r\n\r\nexport default class MainPlayer extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  getIconStructure = () => {\r\n    const { opponents } = this.context.parentState;\r\n    const { oppIdx } = this.props;\r\n    const { discard, hand, deck } = opponents[oppIdx].data;\r\n    return {\r\n      iconData: [\r\n        ['deck.png', deck ? deck.length : 5],\r\n        ['hand.png', hand ? hand.length : 5],\r\n        ['trash.png', discard && discard.length],\r\n      ],\r\n      firstTop: 3.5,\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { oppIdx } = this.props;\r\n    const { gameState, playerClick, opponents } = this.context.parentState;\r\n\r\n    const checkMaids =\r\n      checkChamberMaids(opponents[oppIdx].data) ||\r\n      this.context.parentState.freeChambersToo;\r\n    const circleOn = gameState === 'targetPlayer' && playerClick && checkMaids;\r\n    const playerClass = circleOn ? 'selectable' : '';\r\n    const circleClick = circleOn ? playerClick : () => {};\r\n\r\n    const { iconData, firstTop } = this.getIconStructure();\r\n    const playedCards = opponents[oppIdx].data.playedCards;\r\n    const oppName = opponents[oppIdx].name;\r\n\r\n    return (\r\n      <div style={{ position: 'relative' }}>\r\n        <div className={`OppTable p${oppIdx + 1}`}>\r\n          <DeckZone oppName={oppName} oppIdx={oppIdx} />\r\n          <div style={{ position: 'absolute' }}>\r\n            <PlayZone oppCards={playedCards} oppName={oppName} />\r\n            <ChamberZone oppName={oppName} oppIdx={oppIdx} />\r\n          </div>\r\n        </div>\r\n        <span\r\n          className={`OppCircle p${oppIdx + 1} ${playerClass}`}\r\n          onClick={() => {\r\n            circleClick(oppName);\r\n          }}\r\n        >\r\n          <span className=\"OppName\">{oppName}</span>\r\n        </span>\r\n        {iconData.map((item, idx) => {\r\n          return [\r\n            <div\r\n              className=\"OppIcons\"\r\n              style={{ top: `${firstTop + idx * 8}vh` }}\r\n            >\r\n              <img\r\n                alt=\"noseve\"\r\n                src={require(`./iconFooter/icons/${item[0]}`)}\r\n              />\r\n            </div>,\r\n            <div\r\n              className=\"OppIcons\"\r\n              style={{\r\n                backgroundColor: 'pink',\r\n                top: `${firstTop + 4 + idx * 8}vh`,\r\n              }}\r\n            >\r\n              {item[1]}\r\n            </div>,\r\n          ];\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Field from './field/Field';\nimport MessageArea from './messageArea/MessageArea';\nimport ImageArea from './imageArea/ImageArea';\nimport MainPlayer from './playerArea/MainPlayer';\nimport OppZones from './playerArea/OppZones';\n\nexport default class MainGame extends React.Component {\n  static contextTypes = {\n    parentState: PropTypes.object,\n  };\n\n  static childContextTypes = {\n    updateImage: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { imageName: null };\n  }\n\n  getChildContext() {\n    return {\n      updateImage: (imageName) => {\n        this.setState({ imageName });\n      },\n    };\n  }\n\n  render() {\n    const { opponents = [] } = this.context.parentState;\n\n    return (\n      <div className=\"App-base\">\n        <span style={{ width: '22vw' }} className=\"mainBlock\">\n          <MessageArea />\n          <ImageArea name={this.state.imageName} />\n        </span>\n        <span style={{ width: '56vw' }} className=\"mainBlock\">\n          <Field />\n          <MainPlayer />\n        </span>\n        <span style={{ width: '22vw' }} className=\"mainBlock\">\n          {opponents.map((foo, idx) => {\n            if (idx >= 3) return null;\n            return <OppZones oppIdx={idx} />;\n          })}\n        </span>\n      </div>\n    );\n  }\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport { defaultStyle } from './defaultStyle';\r\n\r\nimport './SCModal.css';\r\n\r\nexport default function SingleCardModal(props, context) {\r\n  const { overlay, content } = defaultStyle;\r\n  const { showSCModal } = context.parentState;\r\n  const { title, message, yesFunc, noFunc, imgRoute } =\r\n    context.parentState.scModalData || {};\r\n  return (\r\n    <ReactModal\r\n      isOpen={showSCModal}\r\n      style={{\r\n        overlay,\r\n        content: { ...content, background: 'rgba(0, 255, 255, 0.75)' },\r\n      }}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className=\"SCModal\">\r\n        <div className=\"SCtitle \">{title}</div>\r\n        <div className=\"SCmessage\">{message}</div>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${imgRoute || '1Love'}.jpg`)}\r\n        />\r\n        <button type=\"button\" style={{ left: '10%' }} onClick={yesFunc}>\r\n          S\r\n        </button>\r\n        <button type=\"button\" style={{ left: '80%' }} onClick={noFunc}>\r\n          No\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nSingleCardModal.contextTypes = {\r\n  parentState: PropTypes.object,\r\n  updateParent: PropTypes.func,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport { defaultStyle } from './defaultStyle';\r\n\r\nimport './ResultsModal.css';\r\n\r\nexport default function SingleCardModal(props, context) {\r\n  const { overlay, content } = defaultStyle;\r\n  const { showResultsModal, results } = context.parentState;\r\n  const colors = ['#ffcc00', 'gray', 'brown', 'white'];\r\n\r\n  return (\r\n    <ReactModal\r\n      isOpen={showResultsModal}\r\n      style={{\r\n        overlay,\r\n        content: {\r\n          ...content,\r\n          background: 'rgba(0, 0, 255, 0.9)',\r\n          left: '31%',\r\n          width: '36vw',\r\n        },\r\n      }}\r\n      onRequestClose={() => context.updateParent({ showResultsModal: false })}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className=\"ResultsModal\">\r\n        <div className=\"ResTitle \">Resultados</div>\r\n        {results.map((item, idx) => {\r\n          return (\r\n            <div className=\"playerRes\">\r\n              <div\r\n                style={{ width: '20%', color: colors[idx], fontSize: '40px' }}\r\n              >\r\n                {idx + 1}\r\n              </div>\r\n              <div style={{ width: '20%' }}>{item.name}</div>\r\n              <div style={{ width: '60%', color: 'pink' }}>{item.vp} VP</div>\r\n            </div>\r\n          );\r\n        })}\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => context.updateParent({ showResultsModal: false })}\r\n        >\r\n          OK\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nSingleCardModal.contextTypes = {\r\n  parentState: PropTypes.object,\r\n  updateParent: PropTypes.func,\r\n};\r\n","export const initialDeck = {\r\n  ColetteFramboise: 3,\r\n  '1Love': 7,\r\n};\r\n\r\nexport const initialOppData = {\r\n  deck: null,\r\n  hand: null,\r\n  discard: [],\r\n  playedCards: [],\r\n  chamberMaids: [],\r\n  boughtPrivateMaids: [],\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport { LioWebRTC } from 'react-liowebrtc';\r\n\r\nimport MainGame from './MainGame';\r\nimport SingleCardModal from './cardDisplayModal/SingleCardModal';\r\nimport ResultsModal from './cardDisplayModal/ResultsModal';\r\nimport { initiateCity } from './field/CityGenerator';\r\nimport { initialDeck, initialOppData } from './initialData.js';\r\nimport { shuffle, attachEvent } from './helpers/actions';\r\n\r\nexport default class ConnexionGame extends React.Component {\r\n  static childContextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      discard: [],\r\n      attachmentsLeft: [],\r\n      mainPlayer: props.mainPlayer,\r\n      playerName: props.playerName,\r\n      opponents: [],\r\n      message: '',\r\n      msgTitle: 'Preparando la partida...',\r\n      showSCModal: false,\r\n      showResultsModal: false,\r\n      results: [],\r\n    };\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      parentState: this.state,\r\n      updateParent: (data, cb) => {\r\n        this.setState(data, () => {\r\n          if (typeof cb === 'function') cb();\r\n        });\r\n      },\r\n      attachEvent: (card, selected) => attachEvent(this, card, selected),\r\n      updateMessage: this.updateMessage,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.mainPlayer) {\r\n      this.setState(initiateCity(), this.getInitialDeck);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { deck, discard, webrtc, playerName } = this.state;\r\n    if (webrtc && !_.isEqual(discard, prevState.discard)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { deck },\r\n      });\r\n    }\r\n    if (webrtc && !_.isEqual(discard, prevState.discard)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { discard },\r\n      });\r\n    }\r\n  }\r\n\r\n  updateMessage = (message) => {\r\n    const { webrtc } = this.state;\r\n    this.setState({ message });\r\n    if (webrtc) webrtc.shout('msgUpdate', message);\r\n  };\r\n\r\n  getInitialDeck = () => {\r\n    this.setState(\r\n      (prevState) => {\r\n        const newCity = prevState.city.map((card) => {\r\n          return { ...card, selected: initialDeck[card.name] };\r\n        });\r\n        return { city: newCity };\r\n      },\r\n      () => {\r\n        this.setState({ getDeck: 1, sendTo: this.sendToDeck });\r\n      }\r\n    );\r\n  };\r\n\r\n  sendToDeck = (cards) => {\r\n    this.setState(\r\n      { deck: shuffle(cards), gameState: 'gameSetUp' },\r\n      this.state.getInitialHand\r\n    );\r\n  };\r\n\r\n  join = (webrtc) => {\r\n    webrtc.joinRoom('cartasPereTantoCuore_v1');\r\n    this.setState({ webrtc });\r\n  };\r\n\r\n  onJoin = () => {\r\n    const { mainPlayer, playerName, webrtc } = this.state;\r\n    if (!mainPlayer) {\r\n      console.log('saludando');\r\n      setTimeout(() => webrtc.shout('hola', playerName), 3000);\r\n    }\r\n  };\r\n\r\n  getPeerData = (webrtcBad, type, payload, peer) => {\r\n    const { webrtc, city, privateMaids, deck, playerName } = this.state;\r\n    switch (type) {\r\n      case 'hola':\r\n        if (this.state.mainPlayer) {\r\n          (webrtc || webrtcBad).whisper(peer, 'cityUpdate', {\r\n            city,\r\n            privateMaids,\r\n          });\r\n        }\r\n        this.getOpp(peer, payload);\r\n        (webrtc || webrtcBad).whisper(peer, 'queTal', playerName);\r\n        break;\r\n      case 'queTal':\r\n        this.getOpp(peer, payload);\r\n        break;\r\n      case 'turnOrder':\r\n        this.setState({\r\n          msgTitle: `Turno de ${payload[0]}`,\r\n          turnNum: 0,\r\n          turnOrder: payload,\r\n          gameState: payload[0] === playerName ? 'startPhase' : 'opponentTurn',\r\n        });\r\n        break;\r\n      case 'cityUpdate':\r\n        this.setState(\r\n          { city: payload.city, privateMaids: payload.privateMaids },\r\n          () => {\r\n            if (!deck) this.getInitialDeck();\r\n          }\r\n        );\r\n        break;\r\n      case 'oppUpdate':\r\n        this.setState((prevState) => {\r\n          const newOpps = prevState.opponents.slice();\r\n          const oppIdx = prevState.opponents.findIndex(\r\n            (opp) => opp.name === payload.name\r\n          );\r\n          Object.keys(payload.data).forEach((key) => {\r\n            newOpps[oppIdx].data[key] = payload.data[key];\r\n          });\r\n          return { opponents: newOpps };\r\n        });\r\n        break;\r\n      case 'msgUpdate':\r\n        this.setState({ message: payload });\r\n        break;\r\n      case 'passTurn':\r\n        const { turnNum, turnOrder } = this.state;\r\n        const newTurn = turnOrder[(turnNum + 1) % turnOrder.length];\r\n        this.setState(\r\n          {\r\n            msgTitle: `Turno de ${newTurn}`,\r\n            turnNum: turnNum + 1,\r\n            gameState: newTurn === playerName ? 'startPhase' : 'opponentTurn',\r\n          },\r\n          this.state.checkGameFinish\r\n        );\r\n        break;\r\n      case 'sendEvent':\r\n        this.state.getChamberMaid(...payload);\r\n        break;\r\n      case 'sendAttach':\r\n        this.state.getAttachment(payload);\r\n        this.state.getDefend(payload);\r\n        break;\r\n      case 'sendAction':\r\n        this.state.getForcedAction(payload);\r\n        break;\r\n      case 'results':\r\n        this.setState((prevState) => {\r\n          return {\r\n            results: [...prevState.results, payload].sort((a, b) =>\r\n              a.vp > b.vp ? -1 : 1\r\n            ),\r\n          };\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  getOpp = (peer, name) => {\r\n    this.setState((prevState) => {\r\n      const opponents = _.cloneDeep(prevState.opponents);\r\n      opponents.push({ peer, name, data: initialOppData });\r\n      return { opponents };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <LioWebRTC\r\n        options={{ debug: false, dataOnly: true }}\r\n        onReady={this.join}\r\n        onReceivedPeerData={this.getPeerData}\r\n        onJoinedRoom={this.onJoin}\r\n      >\r\n        <MainGame />\r\n        <SingleCardModal />\r\n        <ResultsModal />\r\n      </LioWebRTC>\r\n    );\r\n  }\r\n}\r\n","import { set1Fixed, set1Maids } from '../cardData/set1';\r\nimport { privateMaids } from '../cardData/privateMaids';\r\nimport { love } from '../cardData/love';\r\nimport { shuffle } from '../helpers/actions';\r\n\r\nexport function initiateCity() {\r\n  const privateMaidsDeck = shuffle(privateMaids);\r\n  const city = [\r\n    ...love,\r\n    ...set1Fixed,\r\n    ...shuffle(set1Maids).filter((item, idx) => idx < 10),\r\n    { name: 'cardback', quantity: 8 },\r\n    privateMaidsDeck[0],\r\n    privateMaidsDeck[1],\r\n  ];\r\n  return {\r\n    city,\r\n    privateMaids: privateMaidsDeck.filter((item, idx) => idx >= 2),\r\n  };\r\n}\r\n","import React from 'react';\nimport './App.css';\n\nimport ConnexionGame from './game/ConnexionGame';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { playerName: '' };\n  }\n\n  getGameMenu = () => {\n    return (\n      <div className=\"App-base mainBlock\">\n        <div className=\"menuButton\">\n          <button\n            type=\"button\"\n            style={{ top: '20vh' }}\n            onClick={() => {\n              this.setState({ mainPlayer: true });\n            }}\n          >\n            Crear Partida\n          </button>\n          <button\n            type=\"button\"\n            style={{ top: '60vh' }}\n            onClick={() => {\n              this.setState({ mainPlayer: false });\n            }}\n          >\n            Unirse\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  getNameMenu = () => {\n    return (\n      <div className=\"App-base mainBlock\">\n        <div className=\"nameMenu\">\n          <div className=\"title\">Escribe Tu Nombre</div>\n          <input\n            type=\"text\"\n            value={this.state.playerName}\n            onChange={(e) => {\n              this.setState({ playerName: e.target.value });\n            }}\n          />\n          <button\n            type=\"button\"\n            onClick={() => {\n              if (this.state.playerName.length > 0)\n                this.setState({ start: true });\n            }}\n          >\n            Listos\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { playerName, mainPlayer, start } = this.state;\n    if (typeof mainPlayer === typeof undefined) return this.getGameMenu();\n    if (!start) return this.getNameMenu();\n    return <ConnexionGame playerName={playerName} mainPlayer={mainPlayer} />;\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}