{"version":3,"sources":["game/cards/cardback.jpg","game/playerArea/iconFooter/icons/contract.png","game/playerArea/iconFooter/icons/deck.png","game/playerArea/iconFooter/icons/hand.png","game/playerArea/iconFooter/icons/love.png","game/playerArea/iconFooter/icons/servings.png","game/playerArea/iconFooter/icons/trash.png","game/playerArea/iconFooter/icons sync /^/.*$","game/cards/1Love.jpg","game/cards/2Love.jpg","game/cards/3Love.jpg","game/cards sync /^/.*/.jpg$","game/cards/set1/AmberTwilight.jpg","game/cards/set1/AniseGreenaway.jpg","game/cards/set1/AzureCrescent.jpg","game/cards/set1/BadHabit.jpg","game/cards/set1/ClaireSaintJuste.jpg","game/cards/set1/ColetteFramboise.jpg","game/cards/set1/ElizaRosewater.jpg","game/cards/set1/EsquineForet.jpg","game/cards/set1/EugenieFontaine.jpg","game/cards/set1/FayLongfang.jpg","game/cards/set1/GenevieveDaubigny.jpg","game/cards/set1/Illness.jpg","game/cards/set1/KagariIchinomiya.jpg","game/cards/set1/LalandeDreyfus.jpg","game/cards/set1/LucienneDeMarlboro.jpg","game/cards/set1/MarianneSoleil.jpg","game/cards/set1/MillyViolet.jpg","game/cards/set1/MoineDeLefevre.jpg","game/cards/set1/NatsumiFujikawa.jpg","game/cards/set1/NenaWilder.jpg","game/cards/set1/NordTwilight.jpg","game/cards/set1/OpheliaGrail.jpg","game/cards/set1/RosaTopaz.jpg","game/cards/set1/RougeCrescent.jpg","game/cards/set1/SafranVirginie.jpg","game/cards/set1/SainsburyLockwood.jpg","game/cards/set1/SoraNakachi.jpg","game/cards/set1/TanyaPetrushka.jpg","game/cards/set1/TenalysTrent.jpg","game/cards/set1/ViolaCrescent.jpg","game/playerArea/iconFooter/icons sync /^/.*/.png$","game/field/CardBlock.js","game/cardData/love.js","game/playerArea/playerZones/helpers/dataUpdates.js","game/cardData/set1Functions.js","game/cardData/set1ChamberFuncs.js","game/cardData/vpFunctions.js","game/cardData/set1.js","game/cardData/privateMaidFunctions.js","game/cardData/privateMaids.js","game/helpers/actions.js","game/field/Field.js","game/messageArea/MessageArea.js","game/imageArea/ImageArea.js","game/cardDisplayModal/defaultStyle.js","game/cardDisplayModal/CardDisplayModal.js","game/playerArea/playerZones/PlayZone.js","game/playerArea/playerZones/handZone/playerActions.js","game/playerArea/playerZones/handZone/HandZone.js","game/cardDisplayModal/PrivateMaidsDisplay.js","game/playerArea/playerZones/ChamberZone.js","game/playerArea/playerZones/DeckZone.js","game/playerArea/iconFooter/IconFooter.js","game/playerArea/MainPlayer.js","game/playerArea/OppZones.js","game/MainGame.js","game/cardDisplayModal/SingleCardModal.js","game/cardDisplayModal/ResultsModal.js","game/initialData.js","game/ConnexionGame.js","game/field/CityGenerator.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","CardBlock","props","context","card","name","set","quantity","selected","type","route","buyable","selectable","cardClick","selectCard","className","style","position","alt","src","require","cursor","title","undefined","onMouseOver","updateImage","onMouseOut","onClick","borderRight","disabled","borderLeft","visibility","contextTypes","PropTypes","func","love","cost","getChamberMaid","inst","mehCard","add","getTrueData","setState","prevState","newMaids","_","cloneDeep","chamberMaids","idx","findIndex","item","attachments","chambered","filter","foo","i","push","updateMessage","parentState","playerName","getAttachment","data","maidIdx","isPrivate","remove","cards","Array","isArray","privateMaids","boughtPrivateMaids","addOrRemove","maid","newIdx","same","list1","list2","namelist1","namelist2","isEqual","hasSameAttachments","list","length","getVP","discard","state","hasPoints","vp","hasIllness","chamberCards","pointMaids","result","forEach","inDeck","parseDiscard","maids","points","reduce","a","b","getPrivatePoints","getMaidPoints","forcedDiscard","handSelection","prevMessages","discardIdx","hand","playerState","updateParent","updatePlayer","webrtc","shout","setActions","selectionOn","healIllnes","message","city","illIdx","gameState","ElizaFinish","freeChambersToo","playerClick","showSCModal","playFuncs","Sainsbury","button2Text","money","contract","restrType","restrName","sendTo","loveIdx","sendToHand","Esquine","button2Click","newHand","servings","includes","getServings","Tenalys","actionTenalys","drawAndReload","Natsumi","actionNatsumi","Claire","illnessClick","ClaireDefend","prevActions","button1Text","button1Click","Eliza","oppName","opp","opponents","find","deck","scModalData","imgRoute","yesFunc","whisper","peer","draw","discarded","noFunc","getSCModal","ElizaDiscard","Nena","turnOrder","playerIdx","turnNum","bhIdx","bhLeft","opp1","checkChamberMaids","opp2","eventFuncs","Illness","threeLove","healIllness","restricIllness","vpFuncs","Ophelia","Safran","r","Math","floor","BadHabit","Rouge","chamber","Viola","AzureCrescent","numRouge","RougeCrescent","min","Azure","allNums","ViolaCrescent","minThree","pairNums","num","minTwo","Colette","oppColettes","chamberColettes","deckColettes","getColettes","total","max","set1Fixed","attachTo","onStart","restric","chamberCost","set1Maids","onPlay","forcedAction","onDefend","increaseParam","param","noUpdate","getHandRandom","random","EugenieFinish","functions","Lucienne","hasPlayables","Rosa","Fay","Lalande","usadaJoder","Milly","cb","Tanya","Nord","newDiscards","maidClick","c","numIll","count","sendIllness","discardAndTarget","Sora","eventClick","d","attachEvent","backToStart","removeAndTarget","Amber","amount","finishTurn","Eugenie","oppRandom","playerRandom","funcData","getModal","actionEugenie","newCard","onOppDiscard","auto","onDraw","shuffle","array","temporaryValue","randomIndex","currentIndex","getAttachInfo","removePendingAttach","removed","attachmentsLeft","left","newTurn","msgTitle","checkGameFinish","soldOut","playedCards","setTimeout","getResults","finishGame","Field","updateCard","index","mode","switchCard","privateSelectedTwice","sign","lovePaid","cardsOrdered","buyCards","event","sendToFunc","boughtCards","hasEvents","getBuyMsg","buyPrivateMaid","getPrivateMaid","updatePeers","sendToDiscard","bought","parsedMsg","split","msg","end","newDiscard","cardBack","newCity","newPrivateMaids","backIndex","isSelectable","hasChamberMaids","picking","nextProps","nextContext","this","getDeck","mainPlayer","buying","float","marginLeft","players","getTurnOrder","showResultsModal","React","Component","object","MessageArea","getMessage","ImageArea","display","width","maxWidth","margin","userSelect","defaultStyle","overlay","top","right","bottom","backgroundColor","content","height","border","overflow","WebkitOverflowScrolling","borderRadius","outline","padding","paddingTop","privateMaidsStyle","CardDisplayModal","showModal","hideModal","background","extraCmp","extraClass","maxAttach","attachNums","getMaxAttachment","isOpen","onRequestClose","ariaHideApp","cardIdx","AttachmentsDisplay","getImage","getRoute","getSelectInfo","info","marginTop","renderCard","selectInfo","imageClass","attach","selecting","chamberCard","clickable","PlayZone","show","oppCards","limit","config","servingPhase","loveCards","contractPhase","discardPhase","endTurn","discardAction","bullyOpp","oppMaid","getDiscardAction","opponentTurn","gameEnded","startPhase","HandZone","button1","button2","getCardPlay","selection","handSelect","msgButton","cardPlay","cardChamber","currentMaid","getCurrentMaid","newState","change","play","space","zIndex","PrivateMaidsDisplay","getDisplayedMaids","displayedMaids","getCardImage","topMaid","ChamberZone","defend","defensor","playerRes","results","getHealthyMaid","illness","getExtra","stopPropagation","hasAttachments","topAttachment","getDefend","prevProps","oldState","oppIdx","displayLimit","hasMaids","hasBorder","DeckZone","pileName","deckVisible","discardTop","marginBottom","reverse","IconFooter","firstLeft","image","value","serviceStates","MainPlayer","drawCards","splice","getRightFooter","getLeftFooter","getInitialHand","getForcedAction","handleAction","checkMaids","circleOn","playerClass","circleClick","childContextTypes","getIconStructure","iconData","firstTop","MainGame","imageName","SingleCardModal","colors","color","fontSize","initialDeck","ColetteFramboise","initialOppData","ConnexionGame","getInitialDeck","sendToDeck","join","joinRoom","onJoin","console","log","getPeerData","webrtcBad","payload","getOpp","newOpps","slice","key","sort","privateMaidsDeck","initiateCity","options","debug","dataOnly","onReady","onReceivedPeerData","onJoinedRoom","App","getGameMenu","getNameMenu","onChange","target","start","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.b65f96a2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cardback.7a704a7f.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAeCAYAAAA2Lt7lAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH5AQNDwAqlgwDwgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNC0xM1QxNTowMDo0Mi0wNDowMIFULV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDQtMTNUMTU6MDA6NDItMDQ6MDDwCZXhAAADoklEQVRIS82WXUiTURjH/3s3dVNxluUna8YYaeY+NAqhDwpKUbtIoyzaTeCsQIIuoojowkD0pqtuCoLuCusmjJlFmUqmlZUpSswkv+dHllrazJ2e8+5dzbHJpl70g2e85znvOf9z3vOcZ48MjDEEwSaysqYmNFdWYnx0FPuPHsVIeTkaoqIgUN842U/+og/LCqjJzAsLiPv1C/rJSTyhSWPWrcOzujqkpqbioMWCRbUazOVCfGEharZuxWf30L8EFNhIZu3sRE9VFUbtdsgVCgwNDsLe1yf2nzx7FjW3bsGclYUFpxPh1G+6exc3dTq4xDfc8N35ZffsLNovXsTwwACaW1owOTcHQSaTegElrdxoNOJVayvevnuHH9TPnj9HKvVFkXkm9ivAp0keGcGXnh68bGgQfZ1v3iBMLhefOXzjGxISpBZNmpSEqcZGFNMurDYbDs/MQEX+gAKqxUXIfL6eXAi4YThJ/OG9e3haUYGHZWVQXbmC/Pn5wJ8oqNDyYpEWtGPvXrR3dcHe34/XtbV4oFQGFggVvusX9fXuBhFBh85ZU4ElSAGxZgKB+L8EQj14jigQTsZzTRpdeX5RIrjTD8qwMOkJUNAh8tvrIVDGkSmo59TUFBS3b6ObbqV22zYkl5ZCPT2NO/n56OrtlV4NDWN6Ojq6uyFk0qpnq6vx5MYNJMXE4H1NDTpPn4ZpbAyuZS5W0JxwOJjZbKZ9/CPTYGAFBQVMp9VKntAxpKUx/t0EZ3g4lJGRkpybjg8f0EYJbmJiQvKsHOFjbCwMR47AQLncmzHK/yqvQ10pwif6UZSUIDI62u3xYoQOf7UIPLjqExOxhzJghl7v9q4hYpjYyQaLihCr0aCYQnQtEQX4Lurov9Z47hw6vDLianBR+HP+Bjr/2sO5uTDt2oVcumCrReYvmzbRH0T6+fPo/8SPfuVYL1zAhk08+fgIfCWzZWdjv9WKNKoOVkrbo0fIOHRIfF4iwGkn+04RpaNyJCcnx+0MgUIKEhWFvLO4WPLQdfa1SLKrfX3swL59LGfnTmoFx6kzZ5h+82Z26fFjlkJtcT7fyT2mIbtGIscsFqbTaFheURF5/GO5fJkZMjPZdpOJXbfZGF+SZ55lS8cYsgNUUCVQQTVw/z6GKEfNUxr3jOeRIlDGVScnY0teHsKOH0eLVouP7uEiQRW/vEZNp7JEQ/kpzuGAnFLIeqp55iMi8C0+Ho6UFPRQqud16W9xhAfgD87i9a2OcMd+AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAeCAIAAACwp+nIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARpSURBVEhL7VXLbhxFFK1n9zxtj8ev2IntJA4JeZkVi0jAErFCrNjAF/BHrPkBJARLYAEKEKEkPEIeNgn2hDhjezwPT09PVd3LabvRyFYiJGR2nMX0TPWtU/eec2+NFMzipKHy54nif9KTxwvc/7XZ7w29JC7F5spMOV89iltbvcQ5o1Q1Llytx/nq3zhCenO99XBr9/l+2h048qFWiV85NbVUr16dK+URQnzxcHf9z52d/V6aDAqRGS9Xl+Zq7746m78+wIj0swcb399vPNnpJiryJjbSRDysKnd+euLK+YV3lqcQ8/GPG3d/f9rqDx2zUVoF1iKMl6KLC9Mf3Vg55AFy0i+fPP/89r3NXuJVxduyI6OVMiHVrlcUycrC3JXLK7ud/e/uPGqlgnUcSEiEBDZaaEqqlLyxsvTB6zlvbtTas+2n/TQUa30VpUGA0AdOSISomJjK/e32N/caP/3R2nMsTIHIBmlSqbtCdYLsy7gt9INnzUMqICO9ubmz2UQGNmUtSeB84YNltkp7kimpjlOPm63NZjuIOHhmIkaq5FUknNGpNmSrjW7vk1trI9J+6rqpE7pArDxIZVCUshsqCkKYILVnk3rtpCGWgNFsNQsKBCCahJdyKE3H0YjUC3Y+eBwvlYwUCU4pDQZUHHCK0sEYr1CyGkp2ioMIxA4WScZLaKW8QwE6odzzXNMQApP03gctveVgKVVhIFGhyPaxQv7Z2VlGnGqU4LQMmkl7LLNBNkguqyxDRhopXdRGBC8FSYdSpC0UcT5eaWmwaGA4CVSs0C0SsmOfRICSEuJmb7U2zJHMU8weZRvVytWCEBUdRQrpwSg0iibYRMEEVqyQlGFsgoaShWUdIX1JUpMysNcPEV0v6xFp1Rbn6pOYOWhk0HmefOqUsFrFko1A+nBCwHIPPrAoFEBZq0Axoyy2SecmK8W5seqI9NJsfHq2VitHnCYKTahjw7HAyLCBaaBEFEvohboVNGD8ICxFUkI1BPlSrC4szM5PjI1IgbfPTV5bmqkqtLWLtEKRQ4X09BCdIy2hZAxeZi5BEWKGnyIy0hrYWfTJYjW+PF+7Wi8esuWkwLX5yYtTYwUeMKfoahjuIb7S8C3zBNbgy4EIpNFqWcMY9jENpqPw2uLUm2cmc6Jjt9S3jb2v76w92N0ZxGN9oQbBWGWNkJgCOEZSoX3QZ2ytZWndoMxuJhI3Lsy/v7qcUxzg+H361Vrzh0dP1nY7HTKkcVFGWISILuBDkVEehQsRi2ExTU5VzOrZUx9eXzzYOsJxUuBmo317bWN9a6eZhD7ctwUyFgMKCUij2b3wwwnpz43H15fPvHf5yE16iBeQHuLTn9fvPt7e2Ot3pXG4MozB2JAbWqJaKb40M7a6OP3W6Yk8+iheSvq4NWh0+79t7T1q7m119/vDtGijerk0P1Y5O1c/N1VdrWNcXoyXkh7il7ZvtPc3t1vtTq8Y2eWZmYXx0rXp439Kx/APpP8Ooz49QfwHpEL8BRCsX0JV74i5AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQcSURBVEhLtZVbbxtFFIDnzMzO7tqx15c4jqMmilvRgFohaAVSkUA8IOCF/8DPRAgJKQ9cChUVClUJtIU2cW6OHdtr7+7cDuNmJRLIxRH0e7Cl3TOfZs6ccxYIInk10Pz/FfA/7/rh006q1SQeapX9V/XPzw6OhiNJdGa1tEoDMoNUmnKxeGX1gxdbcSKTJFFSa0WtRc459XmCMkPFOPBEl73g07u3r6Be/+m3iUkSYoF7lvAsywJeBACjbKZSEAQFAZU1wtJHt2+6+FnV3z/qHBzta0qMR50XiTs3Y8jTVBd9HoRe4LNCKO4t1/IFM6ofPh92u91EjgmlyGkqkXCfi2KpUCrNBRyhJMha/Z/FNlPxbR8dHGWpNERKbaXLAatUatVm88/D/pfr97/+9ofeoJeHnuBy9frznb5OMmFZIKgQFqwmEFu7ub11//dHT8eHL9LBrpZ59AkuV4/GCQK1lCtAA2iBIoVUpeVqZb5Ry2QyHg201nn0CS7J9frmH51BjJ67fg7WUDuNtkCA+6VqdTCOKUAlDEqctObC65UgX/aSi9Qbu/0n2zuJM7HQRQG6H+PMSChwEpXKvgiNnIBSOElBZ0uN+q32Yr744oR0uyOGQoBPppl4uQOKCJaAJtb097sHO53Dg/3hYV/KkdGSU/ZyXc656h+fdON4rAwYY4jrX0SLmloDgNN9oxEeBJQXKGNWU4OlYkDsqcs8OyEb3Xhra3/ijukaD5mloJwegBA93TUhDKezImReFBYFtwHn5WJhdbFyvPyYU+ovNp519vZqC/PV6vxoMNSJQmuNE3vc7dpQba2202ygQIwK4WLUeHP5lO4kufqrze7m7k5/PHYjEYi92V5eWWr1O3vJMPa9grs3d5eWKE0koPbAMuCrzcW3rzWOLWcC9590f93e3xuNJwCKMyo8YrVORtfq9bXVlXQ4nBwOXV+7WiYuo0QR1IKiS/HK4tIbrb8nxr9hdz74pB8nrnJBBBlipqfZpMDcOE8naavZCoJwkmRolODAKKFKc4KV4tyd9lLuOAf47vHu7mD8vNs9zDL0A8Io9wN3aiu1T2gjilZaDZ9if78ndTIdfFY3apV7a6u54HzyXD942tvu9/Z6g8SiBJYqM7031+BIl+qV19tNqtN+76josQ9vXS495lSF/LI7HEsyUHqvF3d6g9RMe9rTyUK5cH25tVyPbkY8D52Bs+v6m63hg8cvBq5hRAh67Jk48tlbr914d2Uhj5iBs7sxEBBOvyZKqjjTCTLq+SGYU318KWer7yyUarU5n2ok0n1UXR/OV6J32vX89WycO0PmClyACYgRqBuh+Ox2O38xM+eqP77RakUVkWWRzT5//27+9Cqcq3asLDQi3yueHpWzc5H6vXajWa40q1dLcQ4hfwHMETZQJP9CvwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACf1BMVEUA//8B//8F7+8B4OAA398A398A398E6ekC//8C/PwKpqYJOTkAGxsAGhoAGxsAGxsGLCwOiooE9fULvLwFEhILCAguLCwyMDAyMDAwLi4SDw8EBwcNnp4B//8A//8I5eUPu7sPu7sPu7sQu7sPU1MAAABDQ0OgoKCkpKSkpKSjo6NZWVkAAAAMPDwRuLgPu7sPu7sPu7sK3NwA//8A//8InJwGAwMFBQUFCAgFCAgCAgIAAAAFBQUICAgHBwcHBwcHBwcGBgYBAQEFBwcFCAgFBwcFAwMLe3sB//8A//8IwMAIW1sMOjoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCAgMHR0JV1cKqakA//8B//8C/v4Pl5cEAgICAgICAgICAgILPj4G8/MB//8A//8OlpYCAAAJPT0E9PQA//8OlpYCAABGRkYzMzMBAQFTU1MiIiIHBwdYWFgTExMSEhJZWVkKCgoJPT0E9PQCAACTk5Nra2sBAQGtra1GRkYPDw+3t7cnJycmJia7u7sVFRWRkZFqamoBAQGrq6tFRUUPDw+1tbUmJiYmJia4uLgVFRWRkZFqamoOlpYCAACUlJRsbGwBAQGurq5GRkYPDw+4uLgnJycmJia7u7sVFRUJPT0E9PQA//8OlpYCAABRUVE7OzsBAQFgYGAnJycICAhmZmYWFhYVFRVoaGgLCwsJPDwE9PQA//8NsrIFCgoBAAAAAAABAAABAAABAAABAAABAAABAAACAAANXV0D+voD9vYNq6sQiIgQiIgQiIgQiIgQiIgQiIgQiIgQiIgQiIgPkpIH398A//8A//8B//8B//8B//8B//////8LKaYKAAAAAWJLR0TUCbsLhQAAAAlwSFlzAAAOwgAADsIBFShKgAAAAAd0SU1FB+QEDQ8KGko62+QAAAEmSURBVCjPY2CgE2BkYmZhZWPnwC7LycXNw8vHLyAohFVaWERUTFxCUkpaRhZVQk5eQVFJWUVVTV1DU0tbR1dP38DQyBgubWJqZm5haWVtY2tn7+Bo7eTs4urm7gGX9vTy9vH18w8IDAoODgoJCA0Lj4iMikaYHhMbF5+QmAAHSckpqci2p6VnWCODzCwUx2Xn5Frn5RcUFhWXlJaVV1hXVqFJV1vX1NbVNzQ2Nbe0tmGTbu/o7Oru6e3rnzARm/SkySNQespU62nTZ8ycNXvO3HnzF1gvXIQivXjJUutly1esXLV6zdp16zdYb9yEIr15y9Zt1tt3WO/cZb17j/XeffsPoKang4cOHzl67PjREydPnDh1+szZc2gJ8fyFi3Bw6TIDPQAAT762M8B9n2MAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDQtMTNUMTU6MTA6MjYtMDQ6MDBy+t8JAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA0LTEzVDE1OjEwOjI2LTA0OjAwA6dntQAAAABJRU5ErkJggg==\"","var map = {\n\t\"./contract.png\": 149,\n\t\"./deck.png\": 150,\n\t\"./hand.png\": 151,\n\t\"./love.png\": 152,\n\t\"./servings.png\": 153,\n\t\"./trash.png\": 154\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 159;","module.exports = __webpack_public_path__ + \"static/media/1Love.db0e25e8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2Love.ca010494.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3Love.a0cd1c8c.jpg\";","var map = {\n\t\"./1Love.jpg\": 237,\n\t\"./2Love.jpg\": 238,\n\t\"./3Love.jpg\": 239,\n\t\"./cardback.jpg\": 110,\n\t\"./set1/AmberTwilight.jpg\": 240,\n\t\"./set1/AniseGreenaway.jpg\": 241,\n\t\"./set1/AzureCrescent.jpg\": 242,\n\t\"./set1/BadHabit.jpg\": 243,\n\t\"./set1/ClaireSaintJuste.jpg\": 244,\n\t\"./set1/ColetteFramboise.jpg\": 245,\n\t\"./set1/ElizaRosewater.jpg\": 246,\n\t\"./set1/EsquineForet.jpg\": 247,\n\t\"./set1/EugenieFontaine.jpg\": 248,\n\t\"./set1/FayLongfang.jpg\": 249,\n\t\"./set1/GenevieveDaubigny.jpg\": 250,\n\t\"./set1/Illness.jpg\": 251,\n\t\"./set1/KagariIchinomiya.jpg\": 252,\n\t\"./set1/LalandeDreyfus.jpg\": 253,\n\t\"./set1/LucienneDeMarlboro.jpg\": 254,\n\t\"./set1/MarianneSoleil.jpg\": 255,\n\t\"./set1/MillyViolet.jpg\": 256,\n\t\"./set1/MoineDeLefevre.jpg\": 257,\n\t\"./set1/NatsumiFujikawa.jpg\": 258,\n\t\"./set1/NenaWilder.jpg\": 259,\n\t\"./set1/NordTwilight.jpg\": 260,\n\t\"./set1/OpheliaGrail.jpg\": 261,\n\t\"./set1/RosaTopaz.jpg\": 262,\n\t\"./set1/RougeCrescent.jpg\": 263,\n\t\"./set1/SafranVirginie.jpg\": 264,\n\t\"./set1/SainsburyLockwood.jpg\": 265,\n\t\"./set1/SoraNakachi.jpg\": 266,\n\t\"./set1/TanyaPetrushka.jpg\": 267,\n\t\"./set1/TenalysTrent.jpg\": 268,\n\t\"./set1/ViolaCrescent.jpg\": 269\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 24;","module.exports = __webpack_public_path__ + \"static/media/AmberTwilight.0fa84819.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AniseGreenaway.a6408b39.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AzureCrescent.29609aa1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/BadHabit.3d2ef91d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ClaireSaintJuste.8b728681.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ColetteFramboise.fa4e6730.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ElizaRosewater.bec1b095.jpg\";","module.exports = __webpack_public_path__ + \"static/media/EsquineForet.33dae02e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/EugenieFontaine.619c0a75.jpg\";","module.exports = __webpack_public_path__ + \"static/media/FayLongfang.75d2ba96.jpg\";","module.exports = __webpack_public_path__ + \"static/media/GenevieveDaubigny.33fbde6a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Illness.99e5fb4b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/KagariIchinomiya.434d1e7c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/LalandeDreyfus.72569947.jpg\";","module.exports = __webpack_public_path__ + \"static/media/LucienneDeMarlboro.a76caafe.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MarianneSoleil.df3e7a79.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MillyViolet.8c0587a5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MoineDeLefevre.9df9873e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NatsumiFujikawa.02aaa1c7.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NenaWilder.0431c421.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NordTwilight.4b0c4613.jpg\";","module.exports = __webpack_public_path__ + \"static/media/OpheliaGrail.e1e4d0e6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/RosaTopaz.907abd95.jpg\";","module.exports = __webpack_public_path__ + \"static/media/RougeCrescent.96984c87.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SafranVirginie.7a164140.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SainsburyLockwood.44beb43c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SoraNakachi.c7aeb118.jpg\";","module.exports = __webpack_public_path__ + \"static/media/TanyaPetrushka.de1694ea.jpg\";","module.exports = __webpack_public_path__ + \"static/media/TenalysTrent.143c78f9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ViolaCrescent.fbce74e2.jpg\";","var map = {\n\t\"./contract.png\": 149,\n\t\"./deck.png\": 150,\n\t\"./hand.png\": 151,\n\t\"./love.png\": 152,\n\t\"./servings.png\": 153,\n\t\"./trash.png\": 154\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 527;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function CardBlock(props, context) {\r\n  const { name, set, quantity, selected, type } = props.card;\r\n  const route = set ? `set${set}/${name}` : name;\r\n  const buyable = props.selectable;\r\n  const cardClick = buyable\r\n    ? () => {\r\n        props.selectCard(props.card);\r\n      }\r\n    : () => {};\r\n\r\n  return (\r\n    <span className={selected > 0 ? 'card-block selected' : 'card-block'}>\r\n      <div style={{ position: 'relative' }}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${route}.jpg`)}\r\n          className={quantity === 0 ? 'soldOut' : ''}\r\n          style={buyable && !(selected > 0) ? {} : { cursor: 'auto' }}\r\n          title={name === 'cardback' ? 'Maids Particulares' : undefined}\r\n          onMouseOver={() => {\r\n            context.updateImage(route);\r\n          }}\r\n          onMouseOut={() => {\r\n            context.updateImage(null);\r\n          }}\r\n          onClick={cardClick}\r\n        />\r\n\r\n        {selected > 0 && (\r\n          <div className=\"cardSelector\">\r\n            <button\r\n              type=\"button\"\r\n              style={{\r\n                borderRight: '1px solid black',\r\n              }}\r\n              onClick={() => {\r\n                props.selectCard(props.card, 'minus');\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n            <span>{selected}</span>\r\n            <button\r\n              type=\"button\"\r\n              disabled={\r\n                type === 'privateMaid' || quantity === selected || !buyable\r\n              }\r\n              style={{\r\n                borderLeft: '1px solid black',\r\n              }}\r\n              onClick={() => {\r\n                props.selectCard(props.card, 'plus');\r\n              }}\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {type === 'privateMaid' ? (\r\n        <h3 style={{ visibility: 'hidden' }}>1</h3>\r\n      ) : (\r\n        <h3>{quantity}</h3>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\nCardBlock.contextTypes = {\r\n  updateImage: PropTypes.func,\r\n};\r\n","export const love = [\r\n  { name: '1Love', type: 'love', cost: 1, love: 1, quantity: 36 },\r\n  { name: '2Love', type: 'love', cost: 4, love: 2, quantity: 12 },\r\n  { name: '3Love', type: 'love', cost: 7, love: 3, quantity: 8 },\r\n];\r\n","import _ from 'lodash';\r\nimport { getTrueData } from '../../../helpers/actions';\r\nimport { getByDisplayValue } from '@testing-library/react';\r\n\r\nexport function getChamberMaid(inst, mehCard, add = 1) {\r\n  const card = getTrueData(mehCard);\r\n  inst.setState((prevState) => {\r\n    let newMaids = _.cloneDeep(prevState.chamberMaids);\r\n    const idx = newMaids.findIndex((item) => {\r\n      const hasAttachments = item.attachments && item.attachments[0];\r\n      return !hasAttachments && item.name === card.name;\r\n    });\r\n    if (idx >= 0) {\r\n      newMaids[idx].chambered = newMaids[idx].chambered + add;\r\n      if (newMaids[idx].chambered <= 0) {\r\n        newMaids = newMaids.filter((foo, i) => i !== idx);\r\n      }\r\n    } else {\r\n      newMaids.push({ ...card, chambered: 1 });\r\n    }\r\n    return { chamberMaids: newMaids };\r\n  });\r\n  if (card.type !== 'event') {\r\n    const { updateMessage, parentState } = inst.context;\r\n    updateMessage(\r\n      `${parentState.playerName} pone 1 ${card.name} como Doncella.`\r\n    );\r\n  }\r\n}\r\n\r\nexport function getAttachment(inst, data) {\r\n  const { maidIdx, isPrivate, remove } = data;\r\n  let cards = data.card;\r\n  if (!Array.isArray(cards)) cards = [data.card];\r\n  if (!remove) cards = cards.map(getTrueData);\r\n  if (isPrivate) {\r\n    inst.setState((prevState) => {\r\n      const privateMaids = _.cloneDeep(prevState.boughtPrivateMaids);\r\n      const attachments = privateMaids[0] && privateMaids[0].attachments;\r\n      privateMaids[0].attachments = addOrRemove(attachments, cards, remove);\r\n      return { boughtPrivateMaids: privateMaids };\r\n    });\r\n    return;\r\n  }\r\n  inst.setState((prevState) => {\r\n    let newMaids = _.cloneDeep(prevState.chamberMaids);\r\n    const maid = newMaids[maidIdx];\r\n    const attachments = addOrRemove(maid.attachments, cards, remove);\r\n    // Quitar maid con antiguos attachments\r\n    if (maid.chambered > 1) {\r\n      newMaids[maidIdx].chambered -= 1;\r\n    } else {\r\n      newMaids = newMaids.filter((foo, idx) => idx !== maidIdx);\r\n    }\r\n    // Meter maid con nuevos attachments\r\n    const newIdx = newMaids.findIndex((item) => {\r\n      const same = hasSameAttachments(item.attachments, attachments);\r\n      return item.name === maid.name && same;\r\n    });\r\n    if (newIdx >= 0) {\r\n      newMaids[newIdx].chambered += 1;\r\n    } else {\r\n      newMaids.push({ ...maid, chambered: 1, attachments });\r\n    }\r\n    return { chamberMaids: newMaids };\r\n  });\r\n}\r\n\r\nfunction addOrRemove(list, cards, remove) {\r\n  if (remove) {\r\n    return (list || []).filter((foo, idx) => idx < list.length - 1);\r\n  }\r\n  return [...(list || []), ...cards];\r\n}\r\n\r\nfunction hasSameAttachments(list1, list2) {\r\n  const namelist1 = (list1 || []).map((item) => item.name);\r\n  const namelist2 = (list2 || []).map((item) => item.name);\r\n  return _.isEqual(namelist1, namelist2);\r\n}\r\n\r\nexport function handSelect(inst, idx) {\r\n  const limit = inst.state.selectionOn;\r\n  inst.setState((prevState) => {\r\n    let selection = [...prevState.handSelection];\r\n    if (selection.find((item) => item === idx) >= 0) {\r\n      selection = selection.filter((item) => item !== idx);\r\n    } else if (selection.length < limit) selection.push(idx);\r\n    return { handSelection: selection };\r\n  });\r\n}\r\n\r\nexport function getVP(inst) {\r\n  const { discard } = inst.context.parentState;\r\n  const { boughtPrivateMaids, chamberMaids } = inst.state;\r\n  const hasPoints = (maid) => maid.vp && !inst.hasIllness(maid);\r\n  const chamberCards = chamberMaids.filter(hasPoints);\r\n  const privateMaids = boughtPrivateMaids.filter(hasPoints);\r\n  const pointMaids = parseDiscard(discard);\r\n\r\n  chamberCards.forEach((maid) => {\r\n    const { name, chambered, vp } = maid;\r\n    if (pointMaids[name]) {\r\n      pointMaids[name].chambered = chambered;\r\n    } else pointMaids[name] = { chambered, inDeck: 0, vp };\r\n  });\r\n  return getPrivatePoints(privateMaids) + getMaidPoints(inst, pointMaids);\r\n}\r\n\r\nfunction parseDiscard(list) {\r\n  const result = {};\r\n  list.forEach((card) => {\r\n    const { name, vp } = card;\r\n    if (vp) {\r\n      if (result[name]) {\r\n        result[name].inDeck += 1;\r\n      } else {\r\n        result[name] = { inDeck: 1, chambered: 0, vp };\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nfunction getPrivatePoints(maids) {\r\n  const points = maids.map((card) => card.vp);\r\n  return [0, ...points].reduce((a, b) => a + b);\r\n}\r\n\r\nfunction getMaidPoints(inst, maids) {\r\n  const points = Object.keys(maids).map((name) => {\r\n    const { vp, chambered, inDeck } = maids[name];\r\n    return vp(chambered, inDeck, inst, maids);\r\n  });\r\n  return [0, ...points].reduce((a, b) => a + b);\r\n}\r\n","import _ from 'lodash';\r\nimport { getAttachment } from '../playerArea/playerZones/helpers/dataUpdates';\r\nimport { checkChamberMaids } from '../helpers/actions';\r\n\r\nfunction Sainsbury(inst) {\r\n  const { hand } = inst.context.playerState;\r\n  const loveIdx = hand.findIndex((card) => card.name === '1Love');\r\n  if (loveIdx < 0) return;\r\n\r\n  inst.setState({ message: 'Elige una maid o 2Love', button2Text: null });\r\n  inst.context.updateParent({\r\n    gameState: 'cityPick',\r\n    money: {\r\n      love: 4,\r\n      contract: 1,\r\n    },\r\n    restrType: ['maidChief', 'event', 'privateMaid'],\r\n    restrName: ['1Love', '3Love'],\r\n    sendTo: (cards) => sendToHand(inst, cards),\r\n  });\r\n}\r\n\r\nfunction sendToHand(inst, cards) {\r\n  if (!cards[0]) return;\r\n  inst.context.updatePlayer((prevState) => {\r\n    const hand = [...prevState.hand];\r\n    hand.push(...cards);\r\n    const loveIdx = hand.findIndex((card) => card.name === '1Love');\r\n    return { hand: hand.filter((foo, idx) => idx !== loveIdx) };\r\n  });\r\n  inst.context.updateParent((prevState) => {\r\n    const city = _.cloneDeep(prevState.city);\r\n    const idx = city.findIndex((item) => item.name === '1Love');\r\n    city[idx].quantity += 1;\r\n    return { gameState: 'servingPhase', city };\r\n  });\r\n  const { playerName } = inst.context.parentState;\r\n  inst.context.updateMessage(\r\n    `Con los servicios de Sainsbury, ${playerName} intercambia un 1Love de su mano por 1 ${cards[0].name} de la ciudad.`\r\n  );\r\n}\r\n\r\nfunction Esquine(inst) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Selecciona cartas para descartar',\r\n      button2Text: 'Hecho',\r\n      button2Click: () => getServings(inst, prevState),\r\n      handSelection: [],\r\n      selectionOn: 2,\r\n    };\r\n  });\r\n}\r\n\r\nfunction getServings(inst, prevMessages) {\r\n  const { handSelection } = inst.state;\r\n  const { hand } = inst.context.playerState;\r\n  inst.context.updateParent((prevState) => {\r\n    const discard = [...prevState.discard];\r\n    handSelection.forEach((idx) => discard.push(hand[idx]));\r\n    return { discard };\r\n  });\r\n  inst.context.updatePlayer((prevState) => {\r\n    const newHand = [...prevState.hand];\r\n    return {\r\n      servings: prevState.servings + handSelection.length,\r\n      hand: newHand.filter((foo, idx) => !handSelection.includes(idx)),\r\n    };\r\n  });\r\n  inst.setState({ ...prevMessages, handSelection: null, selectionOn: null });\r\n}\r\n\r\nfunction Tenalys(inst, card) {\r\n  const { webrtc, playerName } = inst.context.parentState;\r\n  if (webrtc) webrtc.shout('sendAction', { type: 'auto', card });\r\n  inst.context.updateMessage(\r\n    `${playerName} usa los servicios de TenalysTrent y los dems jugadores roban 1 carta.`\r\n  );\r\n}\r\n\r\nfunction actionTenalys(inst) {\r\n  inst.drawAndReload(1);\r\n}\r\n\r\nfunction Natsumi(inst, card) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Descarta, si quieres, 1 carta',\r\n      button2Text: 'Hecho',\r\n      button2Click: (a, b) => forcedDiscard(a, b, prevState, card),\r\n      handSelection: [],\r\n      selectionOn: 1,\r\n    };\r\n  });\r\n}\r\n\r\nfunction forcedDiscard(context, handSelection, prevMessages, card) {\r\n  const discardIdx = handSelection[0];\r\n  if (discardIdx >= 0) {\r\n    const { hand } = context.playerState;\r\n    context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, hand[discardIdx]] };\r\n    });\r\n    context.updatePlayer((prevState) => {\r\n      const newHand = [...prevState.hand];\r\n      return { hand: newHand.filter((foo, idx) => idx !== discardIdx) };\r\n    });\r\n    if (card) {\r\n      const { webrtc, playerName } = context.parentState;\r\n      if (webrtc) webrtc.shout('sendAction', { type: 'auto', card });\r\n      context.updateMessage(\r\n        `${playerName} descarta 1 carta con la habilidad de NatsumiFujikawa, lo que obliga a los dems jugadores a hacer lo mismo.`\r\n      );\r\n    }\r\n  }\r\n  if (discardIdx >= 0 || card)\r\n    context.parentState.setActions({\r\n      ...prevMessages,\r\n      handSelection: null,\r\n      selectionOn: null,\r\n    });\r\n}\r\n\r\nfunction actionNatsumi(inst) {\r\n  if (inst.state.hand.length >= 4) {\r\n    inst.context.parentState.setActions((prevState) => {\r\n      return {\r\n        message: 'Descarta 1 carta',\r\n        button2Text: 'Hecho',\r\n        button2Click: (a, b) => forcedDiscard(a, b, prevState),\r\n        handSelection: [],\r\n        selectionOn: 1,\r\n      };\r\n    });\r\n  }\r\n}\r\n\r\nfunction Claire(inst) {\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige 1 Illness para devolverla a la ciudad',\r\n    button2Text: 'Cancelar',\r\n    button2Click: () =>\r\n      inst.context.updateParent({\r\n        gameState: 'servingPhase',\r\n      }),\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetIllness',\r\n    illnessClick: healIllnes,\r\n  });\r\n}\r\n\r\nfunction ClaireDefend(inst, data) {\r\n  const { maidIdx, isPrivate, remove } = data;\r\n  if (!remove) {\r\n    const message = 'se defiende de la Illness revelando 1 Claire de su mano';\r\n    inst.context.parentState.setActions((prevActions) => {\r\n      return {\r\n        message: 'Quieres defenderte de la Illness con Claire ?',\r\n        button1Text: 'S',\r\n        button1Click: () => {\r\n          healIllnes(inst, maidIdx, isPrivate, message);\r\n          inst.context.parentState.setActions(prevActions);\r\n        },\r\n        button2Text: 'No',\r\n        button2Click: () => inst.context.parentState.setActions(prevActions),\r\n      };\r\n    });\r\n  }\r\n}\r\n\r\nfunction healIllnes(inst, maidIdx, isPrivate, message) {\r\n  const { playerName, webrtc } = inst.context.parentState;\r\n  inst.context.updateParent((prevState) => {\r\n    const city = _.cloneDeep(prevState.city);\r\n    const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n    city[illIdx].quantity += 1;\r\n    if (webrtc) webrtc.shout('cityUpdate', { city });\r\n    return { city, gameState: 'servingPhase' };\r\n  });\r\n  getAttachment(inst, { maidIdx, isPrivate, remove: true });\r\n  inst.context.updateMessage(\r\n    `${playerName} ${\r\n      message ||\r\n      'usa los servicios de Claire para devolver 1 de sus Illness a la ciudad'\r\n    }`\r\n  );\r\n}\r\n\r\nfunction Eliza(inst, card) {\r\n  inst.setState({\r\n    message: 'Elige un jugador para el efecto',\r\n    button2Text: null,\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetPlayer',\r\n    playerClick: (name) => getSCModal(inst, name, card),\r\n    freeChambersToo: true,\r\n  });\r\n}\r\n\r\nfunction getSCModal(inst, oppName, card) {\r\n  const { webrtc, playerName, opponents } = inst.context.parentState;\r\n  const opp = opponents.find((item) => item.name === oppName);\r\n  const { deck } = oppName ? opp.data : inst.context.parentState;\r\n  if (!deck[0]) {\r\n    ElizaFinish(inst);\r\n    return;\r\n  }\r\n  const { name, set } = deck[0];\r\n  const route = set ? `set${set}/${name}` : name;\r\n\r\n  inst.context.updateParent({\r\n    showSCModal: true,\r\n    scModalData: {\r\n      title: `Esta es la primera carta de${\r\n        oppName ? `l mazo de ${oppName}` : ' tu mazo'\r\n      }`,\r\n      message: 'Quieres descartarla ?',\r\n      imgRoute: route,\r\n      yesFunc: () => {\r\n        ElizaFinish(inst);\r\n        if (oppName) {\r\n          if (webrtc)\r\n            webrtc.whisper(opp.peer, 'sendAction', { type: 'auto', card });\r\n        } else {\r\n          inst.context.draw(1, (hand) => {\r\n            const discarded = hand[0];\r\n            inst.context.updatePlayer({\r\n              hand: hand.filter((foo, idx) => idx > 0),\r\n            });\r\n            inst.context.updateParent((prevState) => {\r\n              return { discard: [...prevState.discard, discarded] };\r\n            });\r\n          });\r\n        }\r\n        inst.context.updateMessage(\r\n          `${playerName} usa los servicios de Eliza para descartar 1 carta del mazo de ${\r\n            oppName || playerName\r\n          }`\r\n        );\r\n      },\r\n      noFunc: () => ElizaFinish(inst),\r\n    },\r\n  });\r\n}\r\n\r\nfunction ElizaFinish(inst) {\r\n  inst.context.updateParent({\r\n    gameState: 'servingPhase',\r\n    freeChambersToo: false,\r\n    playerClick: null,\r\n    showSCModal: false,\r\n  });\r\n}\r\n\r\nfunction ElizaDiscard(inst) {\r\n  inst.drawAndReload(1, (hand) => {\r\n    const discarded = hand[0];\r\n    inst.setState({ hand: hand.filter((foo, idx) => idx > 0) });\r\n    inst.context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, discarded] };\r\n    });\r\n  });\r\n}\r\n\r\nfunction Nena(inst) {\r\n  const { webrtc, playerName, opponents, turnOrder } = inst.context.parentState;\r\n  const playerIdx = inst.context.parentState.turnNum % turnOrder.length;\r\n  const city = _.cloneDeep(inst.context.parentState.city);\r\n  const bhIdx = city.findIndex((item) => item.name === 'BadHabit');\r\n  const bhLeft = city[bhIdx].quantity;\r\n  let message = null;\r\n  if (bhLeft > 0) {\r\n    const opp1 = opponents.find(\r\n      (opp) => opp.name === turnOrder[(playerIdx + 1) % turnOrder.length]\r\n    );\r\n    if (checkChamberMaids(opp1.data)) {\r\n      city[bhIdx].quantity -= 1;\r\n      if (webrtc) webrtc.whisper(opp1.peer, 'sendEvent', [city[bhIdx]]);\r\n      message = `${playerName} usa los servicios de NenaWilder para enviar 1 BadHabit a ${opp1.name}`;\r\n    }\r\n  }\r\n  if (bhLeft > 1) {\r\n    const opp2 = opponents.find(\r\n      (opp) =>\r\n        opp.name ===\r\n        turnOrder[(playerIdx + turnOrder.length - 1) % turnOrder.length]\r\n    );\r\n    if (checkChamberMaids(opp2.data)) {\r\n      city[bhIdx].quantity -= 1;\r\n      if (webrtc) webrtc.whisper(opp2.peer, 'sendEvent', [city[bhIdx]]);\r\n      message = message\r\n        ? `${message} y a ${opp2.name}`\r\n        : `${playerName} usa los servicios de NenaWilder para enviar 1 BadHabit a ${opp2.name}`;\r\n    }\r\n  }\r\n  if (message) {\r\n    inst.context.updateParent({ city });\r\n    webrtc.shout('cityUpdate', { city });\r\n    inst.context.updateMessage(message);\r\n  }\r\n}\r\n\r\nexport const playFuncs = {\r\n  Sainsbury,\r\n  Esquine,\r\n  Tenalys,\r\n  actionTenalys,\r\n  Natsumi,\r\n  actionNatsumi,\r\n  Claire,\r\n  ClaireDefend,\r\n  Eliza,\r\n  ElizaDiscard,\r\n  Nena,\r\n};\r\n","import _ from 'lodash';\r\nimport { getAttachment } from '../playerArea/playerZones/helpers/dataUpdates';\r\n\r\nfunction Illness(inst, maidIdx, isPrivate) {\r\n  inst.context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Quieres descartar un 3Love y devolvr esta Illness a la ciudad?',\r\n      button1Text: 'S',\r\n      button1Click: () => healIllness(inst, maidIdx, isPrivate, prevActions),\r\n      button2Text: 'No',\r\n      button2Click: () => inst.context.parentState.setActions(prevActions),\r\n    };\r\n  });\r\n}\r\n\r\nfunction healIllness(inst, maidIdx, isPrivate, prevActions) {\r\n  const hand = _.cloneDeep(inst.context.playerState.hand);\r\n  const loveIdx = hand.findIndex((item) => item.name === '3Love');\r\n  const threeLove = hand[loveIdx];\r\n  inst.context.updatePlayer({\r\n    hand: hand.filter((foo, idx) => idx !== loveIdx),\r\n  });\r\n  const { webrtc, playerName } = inst.context.parentState;\r\n  inst.context.updateParent((prevState) => {\r\n    const city = _.cloneDeep(prevState.city);\r\n    const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n    city[illIdx].quantity += 1;\r\n    if (webrtc) webrtc.shout('cityUpdate', { city });\r\n\r\n    const discard = [...prevState.discard];\r\n    discard.push(threeLove);\r\n    return { discard, city };\r\n  });\r\n  getAttachment(inst, { maidIdx, isPrivate, remove: true });\r\n  inst.context.parentState.setActions(prevActions);\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} descarta un 3Love para devolver 1 de sus Illness a la ciudad.`\r\n  );\r\n}\r\n\r\nfunction restricIllness(context) {\r\n  return context.playerState.hand.find((card) => card.name === '3Love');\r\n}\r\n\r\nexport const eventFuncs = { Illness, restricIllness };\r\n","function Ophelia(chambered, inDeck) {\r\n  if (inDeck <= 1) return 0;\r\n  return inDeck * (inDeck % 2 === 1 ? 2 : -2);\r\n}\r\n\r\nfunction Safran(chambered) {\r\n  const q = Math.floor(chambered / 4);\r\n  const r = chambered % 4;\r\n  let points = q * 12;\r\n  if (r >= 2) points += 4;\r\n  if (r >= 3) points += 4;\r\n  return points;\r\n}\r\n\r\nfunction BadHabit(chambered) {\r\n  return chambered * (chambered >= 4 ? -2 : -1);\r\n}\r\n\r\nfunction Rouge(chamber, inDeck) {\r\n  return chamber + inDeck;\r\n}\r\n\r\nfunction Viola(chamber, inDeck, inst, maids) {\r\n  let points = inDeck + chamber;\r\n  if (maids.AzureCrescent) return points;\r\n  const numRouge = maids.RougeCrescent ? maids.RougeCrescent.chambered : 0;\r\n  return points + Math.min(numRouge, chamber) * 3;\r\n}\r\n\r\nfunction Azure(chamber, inDeck, inst, maids) {\r\n  let points = inDeck + chamber;\r\n  const numRouge = maids.RougeCrescent ? maids.RougeCrescent.chambered : 0;\r\n  const numViola = maids.ViolaCrescent ? maids.ViolaCrescent.chambered : 0;\r\n  const allNums = [chamber, numViola, numRouge];\r\n  const minThree = Math.min(...allNums);\r\n  const pairNums = allNums\r\n    .map((num) => num - minThree)\r\n    .filter((num) => num > 0);\r\n  const minTwo = pairNums.length === 2 ? Math.min(...pairNums) : 0;\r\n  return points + minThree * 7 + minTwo * 3;\r\n}\r\n\r\nfunction Colette(chamber, inDeck, inst) {\r\n  const { opponents } = inst.context.parentState;\r\n  const oppColettes = opponents.map((opp) => getColettes(opp, inst));\r\n  const total = chamber + inDeck;\r\n  return total + (total > Math.max(...oppColettes) ? 5 : 0);\r\n}\r\n\r\nfunction getColettes(opp, inst) {\r\n  const { discard, chamberMaids } = opp.data;\r\n  const chamberColettes = chamberMaids.find((item) => {\r\n    return item.name === 'ColetteFramboise' && !inst.hasIllness(item);\r\n  });\r\n  let deckColettes = 0;\r\n  discard.forEach((item) => {\r\n    if (item.name === 'ColetteFramboise') deckColettes += 1;\r\n  });\r\n  return deckColettes + (chamberColettes ? chamberColettes.chambered : 0);\r\n}\r\n\r\nexport const vpFuncs = {\r\n  Ophelia,\r\n  Safran,\r\n  BadHabit,\r\n  Rouge,\r\n  Viola,\r\n  Azure,\r\n  Colette,\r\n};\r\n","import { playFuncs } from './set1Functions';\r\nimport { eventFuncs } from './set1ChamberFuncs';\r\nimport { vpFuncs } from './vpFunctions';\r\n\r\nexport const set1Fixed = [\r\n  {\r\n    name: 'Illness',\r\n    set: 1,\r\n    type: 'event',\r\n    cost: 4,\r\n    quantity: 10,\r\n    attachTo: 'maid',\r\n    onStart: eventFuncs.Illness,\r\n    restric: eventFuncs.restricIllness,\r\n  },\r\n  {\r\n    name: 'BadHabit',\r\n    set: 1,\r\n    type: 'event',\r\n    cost: 2,\r\n    vp: vpFuncs.BadHabit,\r\n    quantity: 16,\r\n  },\r\n  {\r\n    name: 'ColetteFramboise',\r\n    set: 1,\r\n    type: 'maidChief',\r\n    cost: 3,\r\n    vp: vpFuncs.Colette,\r\n    chamberCost: 2,\r\n    quantity: 24,\r\n  },\r\n  {\r\n    name: 'MarianneSoleil',\r\n    set: 1,\r\n    type: 'maidChief',\r\n    cost: 9,\r\n    vp: (chamber, deck) => 6 * (chamber + deck),\r\n    quantity: 8,\r\n  },\r\n];\r\n\r\nexport const set1Maids = [\r\n  {\r\n    name: 'AniseGreenaway',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 7,\r\n    vp: (chamber, deck) => 3 * deck,\r\n    draw: 3,\r\n    contract: 1,\r\n    quantity: 8,\r\n  },\r\n  {\r\n    name: 'OpheliaGrail',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 6,\r\n    draw: 1,\r\n    servings: 1,\r\n    love: 1,\r\n    contract: 1,\r\n    vp: vpFuncs.Ophelia,\r\n    quantity: 8,\r\n  },\r\n  {\r\n    name: 'SainsburyLockwood',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    onPlay: playFuncs.Sainsbury,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'TenalysTrent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    love: 3,\r\n    contract: 1,\r\n    onPlay: playFuncs.Tenalys,\r\n    forcedAction: playFuncs.actionTenalys,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'NenaWilder',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    love: 1,\r\n    onPlay: playFuncs.Nena,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'NatsumiFujikawa',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    draw: 1,\r\n    servings: 2,\r\n    onPlay: playFuncs.Natsumi,\r\n    forcedAction: playFuncs.actionNatsumi,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'EsquineForet',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 2,\r\n    onPlay: playFuncs.Esquine,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'GenevieveDaubigny',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 1,\r\n    servings: 1,\r\n    love: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'MoineDeLefevre',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 2,\r\n    contract: 2,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ElizaRosewater',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    love: 2,\r\n    onPlay: playFuncs.Eliza,\r\n    forcedAction: playFuncs.ElizaDiscard,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'SafranVirginie',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    vp: vpFuncs.Safran,\r\n    love: 2,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'KagariIchinomiya',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    servings: 2,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ClaireSaintJuste',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    servings: 1,\r\n    onPlay: playFuncs.Claire,\r\n    onDefend: playFuncs.ClaireDefend,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'AzureCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Azure,\r\n    contract: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ViolaCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Viola,\r\n    draw: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'RougeCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Rouge,\r\n    love: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n];\r\n","import _ from 'lodash';\r\nimport {\r\n  getAttachment,\r\n  getChamberMaid,\r\n} from '../playerArea/playerZones/helpers/dataUpdates';\r\nimport { getTrueData, finishTurn } from '../helpers/actions';\r\n\r\nfunction Lucienne(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  increaseParam(context, 'servings', 'Lucienne', noUpdate);\r\n}\r\n\r\nfunction Rosa(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  increaseParam(context, 'love', 'Rosa', noUpdate);\r\n}\r\n\r\nfunction Fay(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Qu quieres obtener con FayLongfang ?',\r\n      button1Text: '1 Amor',\r\n      button2Text: '1 Contratacin',\r\n      button1Click: () => {\r\n        context.parentState.setActions(prevActions);\r\n        increaseParam(context, 'love', 'Fay', noUpdate);\r\n      },\r\n      button2Click: () => {\r\n        context.parentState.setActions(prevActions);\r\n        increaseParam(context, 'contract', 'Fay', noUpdate);\r\n      },\r\n    };\r\n  });\r\n}\r\n\r\nfunction increaseParam(context, param, name, noUpdate) {\r\n  context.updatePlayer((prevState) => {\r\n    return { [param]: prevState[param] + 1 };\r\n  });\r\n  if (!noUpdate) context.updateParent({ gameState: 'servingPhase' });\r\n  const { playerName } = context.parentState;\r\n  context.updateMessage(\r\n    `${\r\n      noUpdate ? 'Al robar una carta' : 'En su fase de Inicio'\r\n    }, ${playerName} gana 1 &${param}& con la habilidad de ${name}.`\r\n  );\r\n}\r\n\r\nfunction Lalande(inst) {\r\n  const { playerName } = inst.context.parentState;\r\n  inst.context.draw(1);\r\n  inst.setState({ usadaJoder: 'si' });\r\n  if (!inst.context.parentState.hasPlayables())\r\n    inst.context.updateParent({ gameState: 'servingPhase' });\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} roba 1 carta con la habilidad de Lalande.`\r\n  );\r\n}\r\n\r\nfunction Milly(inst, cb) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  increaseParam(inst.context, 'servings', 'Milly', true);\r\n  cb();\r\n}\r\n\r\nfunction Tanya(inst, cb) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Robas 1 ms con TanyaPetrushka ?',\r\n      button1Text: 'S',\r\n      button2Text: 'No',\r\n      button1Click: () => {\r\n        inst.context.draw(1);\r\n        inst.setState({ ...prevState, usadaJoder: 'si' }, cb);\r\n        const { updateMessage, parentState } = inst.context;\r\n        updateMessage(\r\n          `Al robar una carta, ${parentState.playerName} roba otra carta con la habilidad de Tanya.`\r\n        );\r\n      },\r\n      button2Click: () => inst.setState(prevState, cb),\r\n    };\r\n  });\r\n}\r\n\r\nfunction Nord(inst) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  inst.context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Quieres usar la habilidad de Nord ?',\r\n      button1Text: 'S',\r\n      button1Click: () => selectHand(inst.context),\r\n      button2Text: 'No',\r\n      button2Click: () => inst.context.parentState.setActions(prevActions),\r\n    };\r\n  });\r\n}\r\n\r\nfunction selectHand(context) {\r\n  context.parentState.setActions({\r\n    message: 'Selecciona la carta a MANTENER',\r\n    button1Text: null,\r\n    button2Text: 'Hecho',\r\n    button2Click: (a, b) => discardAndTarget(a, b),\r\n    handSelection: [],\r\n    selectionOn: 1,\r\n  });\r\n}\r\n\r\nfunction discardAndTarget(context, handSelection) {\r\n  const newDiscards = context.playerState.hand.filter(\r\n    (foo, idx) => idx !== handSelection[0]\r\n  );\r\n  context.parentState.setActions({\r\n    message: 'Asigna 2 Illness a una Doncella',\r\n    button2Text: null,\r\n    handSelection: null,\r\n    selectionOn: null,\r\n  });\r\n  context.updatePlayer((prevState) => {\r\n    const hand = [...prevState.hand];\r\n    return { hand: hand.filter((foo, idx) => idx === handSelection[0]) };\r\n  });\r\n  context.updateParent((prevState) => {\r\n    const discard = [...prevState.discard];\r\n    discard.push(...newDiscards);\r\n    return {\r\n      discard,\r\n      gameState: 'targetChamberMaid',\r\n      maidClick: (a, b, c) => sendIllness(context, a, b, c),\r\n    };\r\n  });\r\n}\r\n\r\nfunction sendIllness(context, maidIdx, isPrivate, oppName) {\r\n  const city = _.cloneDeep(context.parentState.city);\r\n  const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n  const numIll = Math.min(city[illIdx].quantity, 2);\r\n  const card = [];\r\n  if (numIll > 0) card.push(city[illIdx]);\r\n  if (numIll > 1) card.push(city[illIdx]);\r\n\r\n  city[illIdx].quantity -= numIll;\r\n  context.updateParent({ city, gameState: 'startPhase' });\r\n\r\n  const { webrtc, opponents, playerName } = context.parentState;\r\n  webrtc.shout('cityUpdate', { city });\r\n  const data = { maidIdx, card, isPrivate, count: numIll };\r\n  if (oppName) {\r\n    const opp = opponents.find((item) => item.name === oppName);\r\n    if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n  } else context.parentState.getAttachment({ maidIdx, card, isPrivate });\r\n  context.updateMessage(\r\n    `${playerName} enva ${numIll} Illness a una Doncella de ${\r\n      oppName || playerName\r\n    }.`\r\n  );\r\n}\r\n\r\nfunction Sora(inst) {\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige el Evento que quieras mover',\r\n    button2Text: 'Cancelar',\r\n    button2Click: () =>\r\n      inst.context.updateParent({\r\n        gameState: 'startPhase',\r\n        eventClick: null,\r\n      }),\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetEvent',\r\n    eventClick: (a, b, c, d) => removeAndTarget(inst, a, b, c, d),\r\n  });\r\n  inst.setState({ usadaJoder: 'si' });\r\n}\r\n\r\nfunction removeAndTarget(inst, card, idx, isPrivate, oppName) {\r\n  const { webrtc, opponents, playerName } = inst.context.parentState;\r\n  if (!oppName) {\r\n    if (card.name === 'Illness') {\r\n      // if is attachment\r\n      getAttachment(inst, { maidIdx: idx, isPrivate, remove: true });\r\n    } else getChamberMaid(inst, card, -1);\r\n  } else {\r\n    const opp = opponents.find((item) => item.name === oppName);\r\n    if (card.name === 'Illness') {\r\n      const data = { maidIdx: idx, isPrivate, remove: true };\r\n      if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n    } else if (webrtc) {\r\n      webrtc.whisper(opp.peer, 'sendEvent', [card, -1]);\r\n    }\r\n  }\r\n  inst.context.updateParent({ eventClick: null });\r\n  inst.context.attachEvent({ ...card, backToStart: true }, 1);\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} toma 1 ${\r\n      card.name\r\n    } de la habitacin de ${\r\n      oppName || playerName\r\n    } para enviarlo a otro jugador.`\r\n  );\r\n}\r\n\r\nfunction Amber(context) {\r\n  context.draw(1, (hand) => {\r\n    const discarded = hand[0];\r\n    context.updatePlayer({ hand: [] });\r\n    context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, discarded] };\r\n    });\r\n    const amount = discarded.type.includes('maid') ? 5 : 4;\r\n    context.draw(amount, () => finishTurn(context));\r\n    const { playerName } = context.parentState;\r\n    context.updateMessage(\r\n      `Debido a la habilidad de AmberTwilight, ${playerName} descarta ${\r\n        discarded.name\r\n      } de su mazo.${\r\n        amount === 4\r\n          ? ' Como no es una Maid, roba 1 carta menos para su nueva mano.'\r\n          : ''\r\n      }`\r\n    );\r\n  });\r\n}\r\n\r\nfunction Eugenie(inst) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige un oponente para el efecto',\r\n    button2Text: null,\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetPlayer',\r\n    playerClick: (name) => getModal(inst, name),\r\n    freeChambersToo: true,\r\n  });\r\n}\r\n\r\nfunction getModal(inst, oppName) {\r\n  if (!oppName) return;\r\n  const { webrtc, playerName, opponents } = inst.context.parentState;\r\n  const opp = opponents.find((item) => item.name === oppName);\r\n  const oppRandom = getHandRandom(opp.data.hand);\r\n  const { name, set } = oppRandom.card;\r\n  const route = set ? `set${set}/${name}` : name;\r\n\r\n  inst.context.updateParent({\r\n    showSCModal: true,\r\n    scModalData: {\r\n      title: `Esta es la carta revelada de la mano de ${oppName}`,\r\n      message: 'Quieres intercambiarla con una carta aleatoria de tu mano ?',\r\n      imgRoute: route,\r\n      yesFunc: () => {\r\n        const playerRandom = getHandRandom(inst.context.playerState.hand);\r\n        inst.context.updatePlayer((prevState) => {\r\n          const hand = _.cloneDeep(prevState.hand);\r\n          hand[playerRandom.idx] = getTrueData(oppRandom.card);\r\n          return { hand };\r\n        });\r\n        if (webrtc) {\r\n          webrtc.whisper(opp.peer, 'sendAction', {\r\n            type: 'auto',\r\n            card: {\r\n              name: 'EugenieFontaine',\r\n              set: 1,\r\n              type: 'privateMaid',\r\n            },\r\n            funcData: [oppRandom.idx, playerRandom.card],\r\n          });\r\n        }\r\n        inst.context.updateMessage(\r\n          `En su fase de Inicio, ${playerName} usa la habilidad de Eugenie para intercambiar una carta aleatoria de su mano con ${oppName}`\r\n        );\r\n        EugenieFinish(inst);\r\n      },\r\n      noFunc: () => EugenieFinish(inst),\r\n    },\r\n  });\r\n}\r\n\r\nfunction actionEugenie(inst, idx, newCard) {\r\n  inst.setState((prevState) => {\r\n    const hand = _.cloneDeep(prevState.hand);\r\n    hand[idx] = getTrueData(newCard);\r\n    return { hand };\r\n  });\r\n}\r\n\r\nfunction getHandRandom(hand) {\r\n  const idx = Math.floor(Math.random() * hand.length);\r\n  return { idx, card: hand[idx] };\r\n}\r\n\r\nfunction EugenieFinish(inst) {\r\n  inst.context.updateParent({\r\n    gameState: 'startPhase',\r\n    freeChambersToo: false,\r\n    playerClick: null,\r\n    showSCModal: false,\r\n  });\r\n}\r\n\r\nexport const functions = {\r\n  Lucienne,\r\n  Rosa,\r\n  Fay,\r\n  Lalande,\r\n  Milly,\r\n  Tanya,\r\n  Nord,\r\n  Sora,\r\n  Amber,\r\n  Eugenie,\r\n  actionEugenie,\r\n};\r\n","import { functions } from './privateMaidFunctions';\r\n\r\nexport const privateMaids = [\r\n  {\r\n    name: 'AmberTwilight',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: -3,\r\n    onOppDiscard: functions.Amber,\r\n  },\r\n  {\r\n    name: 'NordTwilight',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 4,\r\n    vp: -4,\r\n    onStart: functions.Nord,\r\n  },\r\n  {\r\n    name: 'SoraNakachi',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 7,\r\n    vp: 2,\r\n    onStart: functions.Sora,\r\n  },\r\n  {\r\n    name: 'FayLongfang',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 6,\r\n    vp: 0,\r\n    auto: true,\r\n    onStart: functions.Fay,\r\n  },\r\n  {\r\n    name: 'LalandeDreyfus',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 6,\r\n    vp: 2,\r\n    onStart: functions.Lalande,\r\n  },\r\n  {\r\n    name: 'MillyViolet',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 2,\r\n    onDraw: functions.Milly,\r\n  },\r\n  {\r\n    name: 'EugenieFontaine',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 0,\r\n    onStart: functions.Eugenie,\r\n    forcedAction: functions.actionEugenie,\r\n  },\r\n  {\r\n    name: 'LucienneDeMarlboro',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 1,\r\n    auto: true,\r\n    onStart: functions.Lucienne,\r\n  },\r\n  {\r\n    name: 'RosaTopaz',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 1,\r\n    auto: true,\r\n    onStart: functions.Rosa,\r\n  },\r\n  {\r\n    name: 'TanyaPetrushka',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 4,\r\n    vp: 1,\r\n    onDraw: functions.Tanya,\r\n  },\r\n];\r\n","import { love } from '../cardData/love';\r\nimport { set1Fixed, set1Maids } from '../cardData/set1';\r\nimport { privateMaids } from '../cardData/privateMaids';\r\n\r\nexport function shuffle(array) {\r\n  var currentIndex = array.length,\r\n    temporaryValue,\r\n    randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nexport function getTrueData(card) {\r\n  if (!card) return null;\r\n  switch (card.type) {\r\n    case 'love':\r\n      return love.find((item) => item.name === card.name);\r\n    case 'privateMaid':\r\n      return privateMaids.find((item) => item.name === card.name);\r\n    case 'maid':\r\n      return set1Maids.find((item) => item.name === card.name);\r\n    default:\r\n      return set1Fixed.find((item) => item.name === card.name);\r\n  }\r\n}\r\n\r\nexport function checkChamberMaids(data) {\r\n  const { chamberMaids, boughtPrivateMaids } = data;\r\n  return (\r\n    boughtPrivateMaids[0] ||\r\n    chamberMaids.find((maid) => maid.type.includes('maid'))\r\n  );\r\n}\r\n\r\nexport function hasTargets(context) {\r\n  if (context.parentState.hasChamberMaids()) return true;\r\n  return context.parentState.opponents.find((opp) => {\r\n    return checkChamberMaids(opp.data);\r\n  });\r\n}\r\n\r\nexport function attachEvent(inst, card, selected) {\r\n  inst.setState((prevState) => {\r\n    let data = {\r\n      attachmentsLeft: [...prevState.attachmentsLeft],\r\n    };\r\n    if (data.attachmentsLeft.length === 0) {\r\n      data = { ...data, ...getAttachInfo(inst, card) };\r\n    }\r\n    for (let i = 0; i < selected; i++) {\r\n      data.attachmentsLeft.push(card);\r\n    }\r\n    return data;\r\n  });\r\n}\r\n\r\nexport function getAttachInfo(inst, card) {\r\n  switch (card.attachTo) {\r\n    case 'maid':\r\n      return {\r\n        gameState: 'targetChamberMaid',\r\n        maidClick: (maidIdx, isPrivate, oppName) => {\r\n          removePendingAttach(inst);\r\n          const { webrtc, opponents, playerName } = inst.state;\r\n          if (oppName) {\r\n            const opp = opponents.find((item) => item.name === oppName);\r\n            const data = { maidIdx, card, isPrivate };\r\n            if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n          } else inst.state.getAttachment({ maidIdx, card, isPrivate });\r\n          inst.updateMessage(\r\n            `${playerName} enva 1 ${card.name} a ${oppName || playerName}.`\r\n          );\r\n        },\r\n      };\r\n    default:\r\n      return {\r\n        gameState: 'targetPlayer',\r\n        playerClick: (name) => {\r\n          removePendingAttach(inst);\r\n          const { webrtc, opponents, playerName } = inst.state;\r\n          if (name) {\r\n            const opp = opponents.find((item) => item.name === name);\r\n            if (webrtc) webrtc.whisper(opp.peer, 'sendEvent', [card]);\r\n          } else inst.state.getChamberMaid(card);\r\n          inst.updateMessage(\r\n            `${playerName} enva 1 ${card.name} a ${name || playerName}.`\r\n          );\r\n        },\r\n      };\r\n  }\r\n}\r\n\r\nfunction removePendingAttach(inst) {\r\n  inst.setState((prevState) => {\r\n    const removed = prevState.attachmentsLeft[0];\r\n    const left = [...prevState.attachmentsLeft].filter((foo, idx) => idx > 0);\r\n    let data = { attachmentsLeft: left };\r\n    if (left[0]) {\r\n      data = { ...data, ...getAttachInfo(inst, left[0]) };\r\n    } else if (removed.backToStart) {\r\n      data.gameState = 'startPhase';\r\n    } else data.gameState = 'discardPhase';\r\n    return data;\r\n  });\r\n}\r\n\r\nexport function handleAction(data, inst) {\r\n  if (data.type === 'auto') {\r\n    getTrueData(data.card).forcedAction(inst, ...(data.funcData || []));\r\n  }\r\n}\r\n\r\nexport function getTurnOrder(context) {\r\n  const { opponents, playerName, webrtc } = context.parentState;\r\n  const players = opponents.map((opp) => opp.name);\r\n  players.push(playerName);\r\n  const turnOrder = shuffle(players);\r\n  let message = 'El orden de juego es:';\r\n  turnOrder.forEach((name, idx) => {\r\n    message = `${message} ${idx > 0 ? '-> ' : ''}${name}`;\r\n  });\r\n  if (webrtc) {\r\n    webrtc.shout('turnOrder', turnOrder);\r\n    context.updateMessage(message);\r\n    context.updateParent({\r\n      msgTitle: `Turno de ${turnOrder[0]}`,\r\n      turnNum: 0,\r\n      gameState: turnOrder[0] === playerName ? 'startPhase' : 'opponentTurn',\r\n      turnOrder,\r\n    });\r\n  }\r\n}\r\n\r\nexport function finishTurn(context) {\r\n  const { webrtc, turnOrder, turnNum, playerName } = context.parentState;\r\n  if (webrtc) webrtc.shout('passTurn', {});\r\n  const newTurn = turnOrder[(turnNum + 1) % turnOrder.length];\r\n  context.updateParent(\r\n    {\r\n      msgTitle: `Turno de ${newTurn}`,\r\n      turnNum: turnNum + 1,\r\n      gameState: newTurn === playerName ? 'startPhase' : 'opponentTurn',\r\n    },\r\n    context.parentState.checkGameFinish\r\n  );\r\n}\r\n\r\nexport function checkGameFinish(inst) {\r\n  const { city } = inst.context.parentState;\r\n  let soldOut = 0;\r\n  city.forEach((item) => {\r\n    const { type, name, quantity } = item;\r\n    const validCard = name === 'cardback' || (type || '').includes('maid');\r\n    if (validCard && quantity === 0) soldOut += 1;\r\n  });\r\n  if (soldOut >= 2) {\r\n    finishGame(inst);\r\n  }\r\n}\r\n\r\nfunction finishGame(inst) {\r\n  const { playedCards, hand } = inst.state;\r\n  inst.context.updateParent(\r\n    (prevState) => {\r\n      const { deck, discard } = prevState;\r\n      return {\r\n        discard: [...discard, ...deck, ...hand, ...playedCards],\r\n        deck: [],\r\n        gameState: 'gameEnded',\r\n        msgTitle: 'Fin de la Partida',\r\n        message: \"Pulsa 'Resultados' para ver la clasificacin.\",\r\n      };\r\n    },\r\n    () => setTimeout(inst.context.parentState.getResults, 1000)\r\n  );\r\n  inst.setState({ playedCards: [], hand: [] });\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport './Field.css';\r\n\r\nimport CardBlock from './CardBlock';\r\nimport { getTrueData, hasTargets, getTurnOrder } from '../helpers/actions';\r\n\r\nexport default class Field extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { lovePaid: 0, cardsOrdered: 0 };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const { getDeck } = this.context.parentState;\r\n    if (!getDeck && nextContext.parentState.getDeck) {\r\n      this.buyCards(null, nextContext.parentState.sendTo);\r\n    }\r\n  }\r\n\r\n  updateCard = (name, newCard, cb) => {\r\n    this.context.updateParent((prevState) => {\r\n      const { city } = prevState;\r\n      const index = city.findIndex((card) => card.name === name);\r\n      city[index] = newCard;\r\n      return { city };\r\n    }, cb);\r\n  };\r\n\r\n  selectCard = (card, mode = 'new') => {\r\n    if (!card) return;\r\n    switch (mode) {\r\n      case 'plus':\r\n        card.selected += 1;\r\n        this.switchCard(card, 1);\r\n        break;\r\n      case 'minus':\r\n        card.selected -= 1;\r\n        this.switchCard(card, -1);\r\n        break;\r\n      default:\r\n        if (card.quantity !== 0 && !this.privateSelectedTwice(card)) {\r\n          if (!card.selected || card.selected < 1) {\r\n            card.selected = 1;\r\n            this.switchCard(card, 1);\r\n          }\r\n        }\r\n    }\r\n    this.updateCard(card.name, card);\r\n  };\r\n\r\n  switchCard = (card, sign) => {\r\n    this.setState((prevState) => {\r\n      const { lovePaid, cardsOrdered } = prevState;\r\n      return {\r\n        lovePaid: lovePaid + sign * card.cost,\r\n        cardsOrdered: cardsOrdered + sign,\r\n      };\r\n    });\r\n  };\r\n\r\n  privateSelectedTwice = (card) => {\r\n    const index = this.context.parentState.city.findIndex((item) => {\r\n      return item.selected >= 1 && item.type === 'privateMaid';\r\n    });\r\n    return index >= 0 && card.type === 'privateMaid';\r\n  };\r\n\r\n  buyCards = (event, sendToFunc) => {\r\n    const boughtCards = [];\r\n    let hasEvents = false;\r\n    const city = _.cloneDeep(this.context.parentState.city);\r\n    if (!sendToFunc) this.context.updateMessage(this.getBuyMsg(city));\r\n\r\n    city.forEach((card) => {\r\n      const { selected, name, type } = card;\r\n      if (selected && selected > 0) {\r\n        if (type === 'privateMaid') {\r\n          this.buyPrivateMaid(name);\r\n          this.context.parentState.getPrivateMaid(getTrueData(card));\r\n        } else {\r\n          card.selected = 0;\r\n          card.quantity -= selected;\r\n          this.updateCard(name, card, this.updatePeers);\r\n          if (type === 'event') {\r\n            hasEvents = true;\r\n            this.context.attachEvent(card, selected);\r\n          } else {\r\n            for (let i = 0; i < selected; i++) {\r\n              boughtCards.push(getTrueData(card));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    const useSendTo = typeof sendToFunc === 'function';\r\n    const sendFunc = useSendTo ? sendToFunc : this.sendToDiscard;\r\n\r\n    sendFunc(boughtCards);\r\n    this.setState({ lovePaid: 0, cardsOrdered: 0 });\r\n\r\n    if (!hasEvents && !sendToFunc)\r\n      this.context.updateParent({ gameState: 'discardPhase' });\r\n  };\r\n\r\n  getBuyMsg = (city) => {\r\n    const { playerName } = this.context.parentState;\r\n    let message = `${playerName} compra`;\r\n    let bought = false;\r\n    city.forEach((card) => {\r\n      if (card.selected) {\r\n        message = `${message} ${card.selected} ${card.name},`;\r\n        bought = true;\r\n      }\r\n    });\r\n    let parsedMsg = '';\r\n    message.split(',').forEach((msg, idx, list) => {\r\n      let end = idx === list.length - 3 ? ' y' : ',';\r\n      end = idx >= list.length - 2 ? '' : end;\r\n      parsedMsg = `${parsedMsg}${msg}${end}`;\r\n    });\r\n    return bought ? `${parsedMsg}.` : `${playerName} no compra nada.`;\r\n  };\r\n\r\n  sendToDiscard = (cards) => {\r\n    this.context.updateParent((prevState) => {\r\n      const newDiscard = [...prevState.discard];\r\n      newDiscard.push(...cards);\r\n      return { discard: newDiscard };\r\n    });\r\n  };\r\n\r\n  buyPrivateMaid = (name) => {\r\n    this.context.updateParent((prevState) => {\r\n      const { city, privateMaids } = prevState;\r\n      const cardBack = city.find((card) => card.name === 'cardback') || {};\r\n      const newCity = city.filter((card) => card.name !== name);\r\n      let newPrivateMaids = privateMaids;\r\n      if (privateMaids[0]) {\r\n        const backIndex = newCity.findIndex((card) => card.name === 'cardback');\r\n        newCity[backIndex] = {\r\n          ...cardBack,\r\n          quantity: cardBack.quantity - 1,\r\n        };\r\n        newCity.push(privateMaids[0]);\r\n        newPrivateMaids = privateMaids.filter((card, idx) => idx > 0);\r\n      }\r\n      return { city: newCity, privateMaids: newPrivateMaids };\r\n    }, this.updatePeers);\r\n  };\r\n\r\n  isSelectable = (card) => {\r\n    const { cost, name, type } = card;\r\n    if (name === 'cardback') return false;\r\n    if (type === 'event' && !hasTargets(this.context)) return false;\r\n\r\n    const { gameState, restrType, restrName, money } = this.context.parentState;\r\n    const picking = gameState === 'cityPick';\r\n    if (picking && restrType.includes(type)) return false;\r\n    if (picking && restrName.includes(name)) return false;\r\n\r\n    const { love, contract } = money;\r\n    const { lovePaid, cardsOrdered } = this.state;\r\n    return love >= cost + lovePaid && contract > cardsOrdered;\r\n  };\r\n\r\n  updatePeers = () => {\r\n    const { city, privateMaids, webrtc } = this.context.parentState;\r\n    if (webrtc) webrtc.shout('cityUpdate', { city, privateMaids });\r\n  };\r\n\r\n  render() {\r\n    const { city, gameState, sendTo, mainPlayer } = this.context.parentState;\r\n    const picking = gameState === 'cityPick';\r\n    const buying = gameState === 'contractPhase' || picking;\r\n\r\n    return (\r\n      <div className=\"Field\">\r\n        <div style={{ float: 'left' }}>\r\n          {city &&\r\n            city.map((item) => (\r\n              <CardBlock\r\n                card={item}\r\n                selectCard={this.selectCard}\r\n                selectable={buying && this.isSelectable(item)}\r\n              />\r\n            ))}\r\n          {buying && (\r\n            <button\r\n              type=\"button\"\r\n              style={{ marginLeft: '2vw' }}\r\n              onClick={() => this.buyCards(null, picking ? sendTo : null)}\r\n            >\r\n              Hecho\r\n            </button>\r\n          )}\r\n          {gameState === 'gameSetUp' && mainPlayer && (\r\n            <button\r\n              type=\"button\"\r\n              style={{ marginLeft: '2vw' }}\r\n              onClick={() => getTurnOrder(this.context)}\r\n            >\r\n              Empezar\r\n            </button>\r\n          )}\r\n          {gameState === 'gameEnded' && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                this.context.updateParent({ showResultsModal: true });\r\n              }}\r\n            >\r\n              Resultados\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './MessageArea.css';\r\n\r\nexport default class MessageArea extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  getMessage = () => {\r\n    return this.context.parentState.message.split('&').map((item, idx) => {\r\n      if (idx % 2 === 0) return item;\r\n      return (\r\n        <img\r\n          alt=\"icon\"\r\n          src={require(`../playerArea/iconFooter/icons/${item}.png`)}\r\n        ></img>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"msgArea\">\r\n        <div className=\"msgTitle\">{this.context.parentState.msgTitle}</div>\r\n        <div className=\"msgContent\">{this.getMessage()}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function ImageArea(props) {\r\n  return (\r\n    <div style={{ display: 'block', width: '100%' }}>\r\n      {props.name && props.name !== 'cardback' && (\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${props.name}.jpg`)}\r\n          style={{\r\n            maxWidth: '21vw',\r\n            float: 'center',\r\n            display: 'block',\r\n            margin: 'auto',\r\n            userSelect: 'none',\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export const defaultStyle = {\r\n  overlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(255, 255, 255, 0)',\r\n  },\r\n  content: {\r\n    position: 'absolute',\r\n    top: '10%',\r\n    left: '22%',\r\n    width: '54vw',\r\n    height: '60vh',\r\n    border: 'none',\r\n    overflow: 'auto',\r\n    WebkitOverflowScrolling: 'touch',\r\n    borderRadius: '4px',\r\n    outline: 'none',\r\n    padding: '20px',\r\n    paddingTop: '10px',\r\n  },\r\n};\r\n\r\nexport const privateMaidsStyle = {\r\n  overlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(255, 255, 255, 0)',\r\n  },\r\n  content: {\r\n    position: 'absolute',\r\n    top: '30%',\r\n    left: '19%',\r\n    width: '60vw',\r\n    height: '50vh',\r\n    border: 'none',\r\n    overflow: 'auto',\r\n    WebkitOverflowScrolling: 'touch',\r\n    borderRadius: '4px',\r\n    outline: 'none',\r\n    padding: '20px',\r\n    paddingTop: '10px',\r\n  },\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport './CardDisplayModal.css';\r\n\r\nimport { defaultStyle, privateMaidsStyle } from './defaultStyle';\r\n\r\nexport default function CardDisplayModal(props, context) {\r\n  const {\r\n    showModal,\r\n    hideModal,\r\n    background,\r\n    cards,\r\n    title,\r\n    mode,\r\n    extraCmp,\r\n    oppName,\r\n  } = props;\r\n\r\n  const { overlay, content } =\r\n    mode === 'privateMaids' ? privateMaidsStyle : defaultStyle;\r\n\r\n  let extraClass = mode === 'privateMaids' ? 'privateModal chamberModal' : '';\r\n  if (mode === 'chamber') extraClass = 'chamberModal';\r\n\r\n  const maxAttach = getMaxAttachment(cards);\r\n\r\n  return (\r\n    <ReactModal\r\n      isOpen={showModal}\r\n      style={{ overlay, content: { ...content, background } }}\r\n      onRequestClose={hideModal}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className={`CardDisplayModal ${extraClass}`}>\r\n        <h1>{title}</h1>\r\n        <div className=\"cards\">\r\n          {typeof extraCmp === 'function' && extraCmp()}\r\n          {cards.map((card, idx) =>\r\n            renderCard(card, idx, context, mode, maxAttach, oppName)\r\n          )}\r\n        </div>\r\n        <button type=\"button\" onClick={hideModal}>\r\n          OK\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nCardDisplayModal.contextTypes = {\r\n  updateImage: PropTypes.func,\r\n  parentState: PropTypes.object,\r\n};\r\n\r\nfunction getImage(route, context, style, selectInfo) {\r\n  const { imageClass, onClick } = selectInfo;\r\n\r\n  return (\r\n    <img\r\n      alt=\"noseve\"\r\n      src={require(`../cards/${route}.jpg`)}\r\n      className={imageClass}\r\n      onMouseOver={() => {\r\n        context.updateImage(route);\r\n      }}\r\n      onMouseOut={() => {\r\n        context.updateImage(null);\r\n      }}\r\n      onClick={onClick}\r\n      style={style || {}}\r\n    />\r\n  );\r\n}\r\n\r\nfunction renderCard(card, cardIdx, context, mode, maxAttach, oppName) {\r\n  const { chambered, attachments } = card;\r\n  const AttachmentsDisplay = (attachments || []).map((item, idx) => {\r\n    return getImage(\r\n      getRoute(item),\r\n      context,\r\n      { position: 'absolute', top: `${1.5 * (idx + 1)}vw`, left: 0 },\r\n      getSelectInfo(mode, card, cardIdx, context, oppName, item)\r\n    );\r\n  });\r\n  const info = getSelectInfo(mode, card, cardIdx, context, oppName);\r\n\r\n  return (\r\n    <div className=\"cardBlock\">\r\n      <div style={{ position: 'relative' }}>\r\n        {getImage(getRoute(card), context, {}, info)}\r\n        {AttachmentsDisplay}\r\n      </div>\r\n      {mode === 'chamber' && (\r\n        <h3 style={{ marginTop: `calc(${maxAttach * 1.5}vw - 8px)` }}>\r\n          {chambered}\r\n        </h3>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getRoute(card) {\r\n  const { name, set } = card;\r\n  return set ? `set${set}/${name}` : name;\r\n}\r\n\r\nfunction getMaxAttachment(cards) {\r\n  const attachNums = cards.map((item) =>\r\n    item.attachments ? item.attachments.length : 0\r\n  );\r\n  return Math.max(...attachNums);\r\n}\r\n\r\nfunction getSelectInfo(mode, card, cardIdx, context, oppName, attach) {\r\n  const { gameState, maidClick, eventClick } = context.parentState;\r\n  const { type } = card;\r\n\r\n  if (gameState === 'targetEvent' && eventClick) {\r\n    if (type === 'event' || attach) {\r\n      return {\r\n        imageClass: 'selectable',\r\n        onClick: () =>\r\n          eventClick(attach || card, cardIdx, type === 'privateMaid', oppName),\r\n      };\r\n    }\r\n  }\r\n  const selecting = maidClick && gameState === 'targetChamberMaid';\r\n  const chamberCard = mode === 'chamber' && type.includes('maid');\r\n  const privateMaid = type === 'privateMaid' && cardIdx === 0;\r\n  const clickable = selecting && (chamberCard || privateMaid);\r\n\r\n  const imageClass = clickable ? 'selectable' : '';\r\n  const imageClick = () => {\r\n    maidClick(cardIdx, type === 'privateMaid', oppName);\r\n  };\r\n  const onClick = clickable ? imageClick : () => {};\r\n  return { imageClass, onClick };\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\n\r\nexport default class PlayZone extends React.Component {\r\n  static contextTypes = {\r\n    playerState: PropTypes.object,\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  render() {\r\n    const { playedCards } = this.context.playerState || {};\r\n    const { oppCards, oppName } = this.props;\r\n    const cards = oppCards || playedCards;\r\n    const limit = oppCards ? 4 : 12;\r\n\r\n    return [\r\n      <div\r\n        className={`${oppCards ? 'OppPlay' : 'PlayZone'} showesModal`}\r\n        title={\r\n          oppCards ? `Cartas Jugadas por ${oppName}` : 'Tus Cartas Jugadas'\r\n        }\r\n        onClick={this.showModal}\r\n      >\r\n        {cards.map((card, idx) => {\r\n          const { name, set } = card;\r\n          const route = set ? `set${set}/${name}` : name;\r\n          return (\r\n            idx < limit && (\r\n              <img alt=\"noseve\" src={require(`../../cards/${route}.jpg`)} />\r\n            )\r\n          );\r\n        })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        background=\"rgba(179, 179, 0, 0.85)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={cards}\r\n        title={\r\n          oppCards ? `Cartas Jugadas por ${oppName}` : 'Tus Cartas Jugadas'\r\n        }\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import { getTrueData, finishTurn } from '../../../helpers/actions';\r\n\r\nexport const config = {\r\n  servingPhase: {\r\n    message: 'Fase de Servicios',\r\n    button2Text: 'Fase de Contratacin',\r\n    button2Click: (context) => {\r\n      const { hand } = context.playerState;\r\n      const { playerName } = context.parentState;\r\n      const loveCards = hand.filter((card) => card.type === 'love');\r\n      const newDiscards = hand.filter((card) => card.type !== 'love');\r\n      let love = 0;\r\n      let contract = 0;\r\n\r\n      context.updatePlayer(\r\n        (prevState) => {\r\n          love = prevState.love;\r\n          contract = prevState.contract;\r\n          const playedCards = [...prevState.playedCards];\r\n          playedCards.push(...loveCards);\r\n          loveCards.forEach((card) => (love += card.love));\r\n          return { love, servings: 0, hand: [], playedCards };\r\n        },\r\n        () => {\r\n          context.updateParent((prevState) => {\r\n            const discard = [...prevState.discard];\r\n            discard.push(...newDiscards);\r\n            return {\r\n              gameState: 'contractPhase',\r\n              discard,\r\n              money: { love, contract },\r\n            };\r\n          });\r\n          context.updateMessage(\r\n            `${playerName} termina su fase de Servicios con ${love} &love& y ${contract} &contract&`\r\n          );\r\n        }\r\n      );\r\n    },\r\n  },\r\n  contractPhase: { message: 'Fase de Contratacin' },\r\n  discardPhase: {\r\n    button2Text: 'Fin de Turno',\r\n    button2Click: (context) => {\r\n      const endTurn = () => {\r\n        context.draw(5, () => finishTurn(context));\r\n      };\r\n      const discardAction = getDiscardAction(context);\r\n      if (discardAction) {\r\n        discardAction(context, endTurn);\r\n      } else endTurn();\r\n    },\r\n  },\r\n  opponentTurn: { message: '', button2Text: null },\r\n  gameEnded: { message: '', button2Text: null },\r\n  startPhase: {\r\n    message: 'Fase de Inicio',\r\n    button2Text: 'Fase de Servicios',\r\n    button2Click: (context) => {\r\n      context.updateParent({ gameState: 'servingPhase' });\r\n    },\r\n  },\r\n};\r\n\r\nfunction getDiscardAction(context) {\r\n  const { opponents } = context.parentState;\r\n  const bullyOpp = opponents.find((opp) => {\r\n    const oppMaid = getTrueData(opp.data.boughtPrivateMaids[0]);\r\n    if (!oppMaid || !oppMaid.onOppDiscard) return false;\r\n    return !hasIllness(oppMaid);\r\n  });\r\n  return (\r\n    bullyOpp && getTrueData(bullyOpp.data.boughtPrivateMaids[0]).onOppDiscard\r\n  );\r\n}\r\n\r\nfunction hasIllness(card) {\r\n  if (!card.attachments) return false;\r\n  return card.attachments.find((item) => item.name === 'Illness');\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { config } from './playerActions';\r\nimport { handSelect } from '../helpers/dataUpdates';\r\n\r\nexport default class HandZone extends React.Component {\r\n  static contextTypes = {\r\n    playerState: PropTypes.object,\r\n    updateImage: PropTypes.func,\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    updatePlayer: PropTypes.func,\r\n    draw: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { message: '', usadaJoder: 'no' };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.context.updateParent({ setActions: (data) => this.setState(data) });\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const newState = nextContext.parentState.gameState;\r\n    const change = this.context.parentState.gameState !== newState;\r\n    if (change && config[newState]) {\r\n      this.setState({\r\n        message: '',\r\n        button1Text: null,\r\n        button2Text: null,\r\n        ...config[newState],\r\n      });\r\n    }\r\n    const { attachmentsLeft } = nextContext.parentState;\r\n    if (change && newState === 'targetPlayer' && attachmentsLeft[0]) {\r\n      const { name } = attachmentsLeft[0];\r\n      this.setState({ message: `Asigna ${name} a un Jugador` });\r\n    }\r\n    if (change && newState === 'targetChamberMaid' && attachmentsLeft[0]) {\r\n      const { name } = attachmentsLeft[0];\r\n      this.setState({ message: `Asigna ${name} a una Doncella` });\r\n    }\r\n    if (change && newState === 'startPhase') {\r\n      this.setState({ usadaJoder: 'no' });\r\n    }\r\n  }\r\n\r\n  button1 = () => this.state.button1Click(this.context);\r\n  button2 = () =>\r\n    this.state.button2Click(this.context, this.state.handSelection);\r\n\r\n  getCardPlay = (card, idx) => {\r\n    const { selectionOn, button1Text } = this.state;\r\n    if (selectionOn) return () => handSelect(this, idx);\r\n    if (button1Text) return null;\r\n\r\n    const { servings } = this.context.playerState;\r\n    const { type, chamberCost } = card;\r\n    if (chamberCost && servings >= chamberCost) {\r\n      if (type === 'maid' && servings > 0) {\r\n        return () => {\r\n          this.setState((prevState) => {\r\n            const data = { prevState, card, idx };\r\n            return {\r\n              message: `Qu quieres hacer con ${card.name} ?`,\r\n              button1Text: 'Jugarla',\r\n              button2Text: 'Poner como Doncella',\r\n              button1Click: () => this.msgButton(data, this.cardPlay),\r\n              button2Click: () => this.msgButton(data, this.cardChamber),\r\n            };\r\n          });\r\n        };\r\n      }\r\n      return () => this.cardChamber(card, idx);\r\n    } else if (type === 'maid' && servings > 0) {\r\n      return () => this.cardPlay(card, idx);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  msgButton = (data, func) => {\r\n    const { prevState, card, idx } = data;\r\n    this.setState(prevState, () => func(card, idx));\r\n  };\r\n\r\n  cardPlay = (card, cardIdx) => {\r\n    const { love = 0, servings = 0, contract = 0, onPlay } = card;\r\n    if (card.draw > 0) {\r\n      this.draw(card.draw, () => {\r\n        if (typeof onPlay === 'function') onPlay(this, card);\r\n      });\r\n    } else if (typeof onPlay === 'function') onPlay(this, card);\r\n    this.context.updatePlayer((prevState) => {\r\n      const hand = [...prevState.hand];\r\n      const playedCards = [...prevState.playedCards];\r\n      playedCards.push(card);\r\n      return {\r\n        love: prevState.love + love,\r\n        servings: prevState.servings + servings - 1,\r\n        contract: prevState.contract + contract,\r\n        hand: hand.filter((foo, idx) => idx !== cardIdx),\r\n        playedCards,\r\n      };\r\n    });\r\n  };\r\n\r\n  cardChamber = (card, cardIdx) => {\r\n    this.context.updatePlayer((prevState) => {\r\n      const hand = [...prevState.hand].filter((foo, idx) => idx !== cardIdx);\r\n      return { servings: prevState.servings - card.chamberCost, hand };\r\n    });\r\n    this.context.parentState.getChamberMaid(card);\r\n  };\r\n\r\n  draw = (amount, cb) => {\r\n    this.context.draw(amount);\r\n    const currentMaid = this.context.parentState.getCurrentMaid();\r\n    if (currentMaid && currentMaid.onDraw && this.state.usadaJoder === 'no') {\r\n      currentMaid.onDraw(this, cb);\r\n    } else cb();\r\n  };\r\n\r\n  render() {\r\n    const { hand } = this.context.playerState;\r\n    const { message, handSelection, button1Text, button1Click } = this.state;\r\n    const { button2Text, button2Click } = this.state;\r\n    const space = 0.9;\r\n\r\n    return (\r\n      <div className=\"HandZone\">\r\n        <h6>{message}</h6>\r\n        <div className=\"handCards\">\r\n          {hand.map((card, idx, list) => {\r\n            const { name, set } = card;\r\n            const play = this.getCardPlay(card, idx);\r\n            const selected = handSelection && handSelection.includes(idx);\r\n            const route = set ? `set${set}/${name}` : name;\r\n            return (\r\n              <img\r\n                alt=\"noseve\"\r\n                src={require(`../../../cards/${route}.jpg`)}\r\n                className={`${play ? 'playable' : ''} ${\r\n                  selected ? 'selected' : ''\r\n                }`}\r\n                onMouseOver={() => {\r\n                  this.context.updateImage(route);\r\n                }}\r\n                onMouseOut={() => {\r\n                  this.context.updateImage(null);\r\n                }}\r\n                onClick={typeof play === 'function' ? play : () => {}}\r\n                style={{\r\n                  left: `${8.9 + space * 2 * idx - space * list.length}vw`,\r\n                  zIndex: list.length - idx,\r\n                }}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        {button1Text && button1Click && (\r\n          <button type=\"button\" style={{ left: '5px' }} onClick={this.button1}>\r\n            {button1Text}\r\n          </button>\r\n        )}\r\n        {button2Text && button2Click && (\r\n          <button type=\"button\" style={{ right: '5px' }} onClick={this.button2}>\r\n            {button2Text}\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from './CardDisplayModal';\r\n\r\nexport default class PrivateMaidsDisplay extends React.Component {\r\n  static contextTypes = {\r\n    updateImage: PropTypes.func,\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  getDisplayedMaids = () => {\r\n    const { privateMaids } = this.props;\r\n    const displayedMaids = [];\r\n    for (let i = 2; i >= 0; i--) {\r\n      if (privateMaids[i]) {\r\n        displayedMaids.push(this.getRoute(privateMaids[i]));\r\n        const { attachments } = privateMaids[i];\r\n        (attachments || []).forEach((item) => {\r\n          displayedMaids.push(this.getRoute(item));\r\n        });\r\n      }\r\n    }\r\n    return displayedMaids.filter((foo, idx) => {\r\n      return idx >= displayedMaids.length - 3;\r\n    });\r\n  };\r\n\r\n  getRoute = (card) => {\r\n    const { name, set } = card;\r\n    return set ? `set${set}/${name}` : name;\r\n  };\r\n\r\n  getCardImage = (card, topMaid, style) => {\r\n    const { gameState } = this.context.parentState;\r\n    const selecting =\r\n      gameState === 'targetChamberMaid' || gameState === 'targetEvent';\r\n    return (\r\n      <img\r\n        alt=\"noseve\"\r\n        className={`showesModal ${selecting ? 'selectable' : ''}`}\r\n        title=\"Tus Maids Particulares\"\r\n        src={require(`../cards/${card}.jpg`)}\r\n        onMouseOver={() => {\r\n          this.context.updateImage(topMaid);\r\n        }}\r\n        onMouseOut={() => {\r\n          this.context.updateImage(null);\r\n        }}\r\n        onClick={this.showModal}\r\n        style={style}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { oppName } = this.props;\r\n    const displayedMaids = this.getDisplayedMaids();\r\n    if (displayedMaids.length <= 0) return null;\r\n    const topMaid = displayedMaids[displayedMaids.length - 1];\r\n\r\n    return [\r\n      <div className=\"cardBlock\" style={{ position: 'relative' }}>\r\n        {this.getCardImage(displayedMaids[0], topMaid, {})}\r\n        {displayedMaids[1] &&\r\n          this.getCardImage(displayedMaids[1], topMaid, {\r\n            position: 'absolute',\r\n            top: '1.5vw',\r\n            left: 0,\r\n          })}\r\n        {displayedMaids[2] &&\r\n          this.getCardImage(displayedMaids[2], topMaid, {\r\n            position: 'absolute',\r\n            top: '3vw',\r\n            left: 0,\r\n          })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        showModal={this.state.show}\r\n        background=\"rgba(0,0,0,0.75)\"\r\n        cards={this.props.privateMaids}\r\n        hideModal={this.hideModal}\r\n        oppName={oppName}\r\n        title={\r\n          oppName ? `Maids Particulares de ${oppName}` : 'Tus Maids Paticulares'\r\n        }\r\n        mode=\"privateMaids\"\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\nimport PrivateMaidsDisplay from '../../cardDisplayModal/PrivateMaidsDisplay';\r\nimport { checkChamberMaids } from '../../helpers/actions';\r\nimport { getChamberMaid, getAttachment, getVP } from './helpers/dataUpdates';\r\n\r\nexport default class ChamberZone extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    updatePlayer: PropTypes.func,\r\n    updateImage: PropTypes.func,\r\n    playerState: PropTypes.object,\r\n    draw: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show: false,\r\n      usadaJoder: 'no',\r\n      chamberMaids: [],\r\n      boughtPrivateMaids: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.oppName) {\r\n      this.context.updateParent({\r\n        getChamberMaid: (card, add) => getChamberMaid(this, card, add),\r\n        getPrivateMaid: this.getPrivateMaid,\r\n        getAttachment: (data) => getAttachment(this, data),\r\n        hasChamberMaids: () => checkChamberMaids(this.state),\r\n        hasPlayables: this.hasPlayables,\r\n        getCurrentMaid: this.getHealthyMaid,\r\n        getDefend: (data) => this.defend(data),\r\n        getResults: this.getResults,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { chamberMaids, boughtPrivateMaids } = this.state;\r\n    const { webrtc, playerName } = this.context.parentState;\r\n    if (\r\n      webrtc &&\r\n      !_.isEqual(boughtPrivateMaids, prevState.boughtPrivateMaids)\r\n    ) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { boughtPrivateMaids },\r\n      });\r\n    }\r\n    if (webrtc && !_.isEqual(chamberMaids, prevState.chamberMaids)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { chamberMaids },\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    if (!this.props.oppName) {\r\n      const oldState = this.context.parentState.gameState || '';\r\n      const newState = nextContext.parentState.gameState;\r\n      if (oldState !== newState && newState === 'startPhase') {\r\n        if (!oldState.includes('target')) this.setState({ usadaJoder: 'no' });\r\n        const currentMaid = this.getHealthyMaid();\r\n        if (currentMaid && currentMaid.onStart) {\r\n          if (currentMaid.auto) currentMaid.onStart(this.context);\r\n        } else if (!this.hasPlayables()) {\r\n          this.context.updateParent({\r\n            gameState: 'servingPhase',\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getPrivateMaid = (card) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        boughtPrivateMaids: [card, ...prevState.boughtPrivateMaids],\r\n      };\r\n    });\r\n  };\r\n\r\n  defend = (data) => {\r\n    const defensor = this.context.playerState.hand.find(\r\n      (maid) => maid.onDefend\r\n    );\r\n    if (defensor) defensor.onDefend(this, data);\r\n  };\r\n\r\n  getResults = () => {\r\n    const playerRes = {\r\n      name: this.context.parentState.playerName,\r\n      vp: getVP(this),\r\n    };\r\n    this.context.updateParent({ results: [playerRes] });\r\n    const { webrtc } = this.context.parentState;\r\n    if (webrtc)\r\n      setTimeout(\r\n        () => webrtc.shout('results', playerRes),\r\n        Math.random() * 1500\r\n      );\r\n  };\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  getRoute = (card) => {\r\n    const { name, set } = card;\r\n    return set ? `set${set}/${name}` : name;\r\n  };\r\n\r\n  hasIllness = (card) => {\r\n    if (!card.attachments) return false;\r\n    return card.attachments.find((item) => item.name === 'Illness');\r\n  };\r\n\r\n  getHealthyMaid = () => {\r\n    const currentMaid = this.state.boughtPrivateMaids[0];\r\n    if (!currentMaid) return null;\r\n    return this.hasIllness(currentMaid) ? null : currentMaid;\r\n  };\r\n\r\n  hasPlayables = () => {\r\n    const { chamberMaids, boughtPrivateMaids } = this.state;\r\n    return [...chamberMaids, boughtPrivateMaids[0] || {}].find((maid) => {\r\n      const illness = this.hasIllness(maid);\r\n      return illness && illness.restric(this.context);\r\n    });\r\n  };\r\n\r\n  getExtra = (card, idx, isPrivate) => {\r\n    const { gameState, illnessClick } = this.context.parentState;\r\n    if (gameState === 'targetIllness' && card.name === 'Illness') {\r\n      return {\r\n        className: 'playable',\r\n        onClick: (e) => {\r\n          e.stopPropagation();\r\n          illnessClick(this, idx, isPrivate);\r\n        },\r\n      };\r\n    }\r\n\r\n    if (isPrivate && this.state.usadaJoder === 'si') return {};\r\n    if (card.restric && !card.restric(this.context)) return {};\r\n    if (gameState !== 'startPhase') return {};\r\n    if (card.auto || !card.onStart || this.hasIllness(card)) return {};\r\n    return {\r\n      className: 'playable',\r\n      onClick: (e) => {\r\n        e.stopPropagation();\r\n        card.onStart(this, idx, isPrivate);\r\n      },\r\n      onMouseOver: () => this.context.updateImage(this.getRoute(card)),\r\n      onMouseOut: () => this.context.updateImage(null),\r\n    };\r\n  };\r\n\r\n  renderCard = (card, idx) => {\r\n    const { attachments, type } = card;\r\n    const hasAttachments = attachments && attachments[0];\r\n    const topAttachment = hasAttachments && attachments[attachments.length - 1];\r\n    const isPrivate = type === 'privateMaid';\r\n\r\n    return (\r\n      <div style={{ position: 'relative', float: 'left' }}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../../cards/${this.getRoute(card)}.jpg`)}\r\n          {...(this.props.oppName ? {} : this.getExtra(card, idx, isPrivate))}\r\n        />\r\n        {hasAttachments && (\r\n          <img\r\n            alt=\"noseve\"\r\n            src={require(`../../cards/${this.getRoute(topAttachment)}.jpg`)}\r\n            {...(this.props.oppName\r\n              ? {}\r\n              : this.getExtra(topAttachment, idx, isPrivate))}\r\n            style={{\r\n              position: 'absolute',\r\n              top: '0.4vw',\r\n              left: 0,\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { oppName, oppIdx } = this.props;\r\n    const { opponents, gameState } = this.context.parentState;\r\n    const data = oppName ? opponents[oppIdx].data : this.state;\r\n    const { chamberMaids, boughtPrivateMaids } = data;\r\n\r\n    const currentMaid = boughtPrivateMaids[0];\r\n    let displayLimit = currentMaid ? 7 : 8;\r\n    if (oppName) displayLimit = currentMaid ? 3 : 4;\r\n\r\n    const hasMaids =\r\n      currentMaid || chamberMaids.find((maid) => maid.type.includes('maid'));\r\n    let hasBorder = gameState === 'targetChamberMaid' && hasMaids;\r\n    hasBorder = hasBorder || gameState === 'targetEvent';\r\n\r\n    return [\r\n      <div\r\n        className={`${oppName ? 'OppChamber' : 'ChamberZone'} showesModal ${\r\n          hasBorder ? 'selectable' : ''\r\n        }`}\r\n        title={\r\n          oppName\r\n            ? `Habitacin Privada de ${oppName}`\r\n            : ' Tu Habitacin Privada'\r\n        }\r\n        onClick={this.showModal}\r\n      >\r\n        {currentMaid && this.renderCard(currentMaid)}\r\n        {chamberMaids.map((card, idx, list) => {\r\n          return idx < displayLimit ? this.renderCard(card, idx) : null;\r\n        })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        extraCmp={() => (\r\n          <PrivateMaidsDisplay\r\n            privateMaids={boughtPrivateMaids}\r\n            oppName={oppName}\r\n          />\r\n        )}\r\n        background=\"rgba(0, 190, 0, 0.8)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={chamberMaids}\r\n        oppName={oppName}\r\n        title={\r\n          oppName\r\n            ? `Habitacin Privada de ${oppName}`\r\n            : ' Tu Habitacin Privada'\r\n        }\r\n        mode=\"chamber\"\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\n\r\nexport default class DeckZone extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  render() {\r\n    const { opponents, gameState } = this.context.parentState;\r\n    const { oppName, oppIdx } = this.props;\r\n\r\n    const { discard, deck } = oppName\r\n      ? opponents[oppIdx].data\r\n      : this.context.parentState;\r\n    const deckLength = deck && deck.length;\r\n    const pileName =\r\n      gameState === 'gameEnded' ? 'Cartas Compradas' : 'Descartes';\r\n\r\n    const deckVisible = deckLength === 0 ? 'hidden' : 'visible';\r\n    const discardTop = discard.length > 0 && discard[discard.length - 1];\r\n    const { name, set } = discardTop || {};\r\n    const route = set ? `set${set}/${name}` : name;\r\n\r\n    return [\r\n      <div className={oppName ? 'OppDeck' : 'DeckZone'}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require('../../cards/cardback.jpg')}\r\n          title={oppName ? `Mazo de ${oppName}` : 'Tu Mazo'}\r\n          style={{ marginBottom: '1.5vh', visibility: deckVisible }}\r\n        />\r\n        {discardTop && (\r\n          <img\r\n            alt=\"noseve\"\r\n            className=\"showesModal\"\r\n            title={oppName ? `${pileName} de ${oppName}` : `Tus ${pileName}`}\r\n            onClick={this.showModal}\r\n            src={require(`../../cards/${route}.jpg`)}\r\n          />\r\n        )}\r\n      </div>,\r\n      <CardDisplayModal\r\n        background=\"rgba(255, 153, 153, 0.9)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={[...discard].reverse()}\r\n        title={oppName ? `${pileName} de ${oppName}` : `Tus ${pileName}`}\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function IconFooter(props) {\r\n  const { data, firstLeft } = props;\r\n  return data.map((item, idx) => {\r\n    return getIconValue(item[0], item[1], firstLeft + idx * 6);\r\n  });\r\n}\r\n\r\nfunction getIconValue(image, value, left) {\r\n  return [\r\n    <div className=\"IconFooter\" style={{ left: `${left}vw` }}>\r\n      <img alt=\"noseve\" src={require(`./icons/${image}`)} />\r\n    </div>,\r\n    <div\r\n      className=\"IconFooter\"\r\n      style={{ backgroundColor: '#ffadd7', left: `${left + 3}vw` }}\r\n    >\r\n      {value || 0}\r\n    </div>,\r\n  ];\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport './MainPlayer.css';\r\n\r\nimport PlayZone from './playerZones/PlayZone';\r\nimport HandZone from './playerZones/handZone/HandZone';\r\nimport ChamberZone from './playerZones/ChamberZone';\r\nimport DeckZone from './playerZones/DeckZone';\r\nimport './playerZones/PlayerZones.css';\r\n\r\nimport IconFooter from './iconFooter/IconFooter';\r\nimport { shuffle, handleAction, checkGameFinish } from '../helpers/actions';\r\n\r\nconst serviceStates = ['cityPick', 'targetIllness', 'targetPlayer'];\r\n\r\nexport default class MainPlayer extends React.Component {\r\n  static childContextTypes = {\r\n    playerState: PropTypes.object,\r\n    updatePlayer: PropTypes.func,\r\n    draw: PropTypes.func,\r\n  };\r\n\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hand: [], playedCards: [], love: 0, servings: 0 };\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      playerState: this.state,\r\n      updatePlayer: (data, cb) => {\r\n        this.setState(data, () => {\r\n          if (typeof cb === 'function') cb();\r\n        });\r\n      },\r\n      draw: this.drawAndReload,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.context.updateParent({\r\n      getInitialHand: () => this.drawCards(5),\r\n      getForcedAction: (data) => handleAction(data, this),\r\n      checkGameFinish: () => checkGameFinish(this),\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { hand, playedCards } = this.state;\r\n    const { webrtc, playerName } = this.context.parentState;\r\n\r\n    if (webrtc && !_.isEqual(hand, prevState.hand)) {\r\n      webrtc.shout('oppUpdate', { name: playerName, data: { hand } });\r\n    }\r\n    if (webrtc && !_.isEqual(playedCards, prevState.playedCards)) {\r\n      webrtc.shout('oppUpdate', { name: playerName, data: { playedCards } });\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const oldState = this.context.parentState.gameState;\r\n    const newState = nextContext.parentState.gameState;\r\n    if (oldState !== newState) {\r\n      if (newState === 'servingPhase' && !serviceStates.includes(oldState)) {\r\n        this.setState((prevState) => {\r\n          const { servings, contract } = prevState;\r\n          return {\r\n            servings: (servings || 0) + 1,\r\n            contract: (contract || 0) + 1,\r\n          };\r\n        });\r\n      } else if (newState === 'discardPhase') {\r\n        let playedCards = [];\r\n        this.setState((prevState) => {\r\n          playedCards = prevState.playedCards;\r\n          return { contract: 0, love: 0, playedCards: [] };\r\n        });\r\n        this.context.updateParent((prevState) => {\r\n          const discard = [...prevState.discard];\r\n          discard.push(...playedCards);\r\n          return { discard }; // pasar turno\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  drawAndReload = (amount, cb) => {\r\n    this.context.updateParent(\r\n      (prevState) => {\r\n        const { deck, discard } = prevState;\r\n        if (deck.length < amount) {\r\n          return { deck: [...deck, ...shuffle([...discard])], discard: [] };\r\n        }\r\n        return {};\r\n      },\r\n      () => this.drawCards(amount, cb)\r\n    );\r\n  };\r\n\r\n  drawCards = (amount, cb = () => {}) => {\r\n    const { deck, webrtc, playerName } = this.context.parentState;\r\n    const hand = [...deck.splice(0, amount), ...this.state.hand];\r\n    this.setState({ hand }, () => cb(hand));\r\n    this.context.updateParent({ deck }, () => {\r\n      if (webrtc)\r\n        webrtc.shout('oppUpdate', {\r\n          name: playerName,\r\n          data: { deck },\r\n        });\r\n    });\r\n  };\r\n\r\n  getRightFooter = () => {\r\n    const { deck, discard } = this.context.parentState;\r\n    const { hand } = this.state;\r\n    return {\r\n      data: [\r\n        ['deck.png', deck && deck.length],\r\n        ['hand.png', hand && hand.length],\r\n        ['trash.png', discard && discard.length],\r\n      ],\r\n      firstLeft: 57,\r\n    };\r\n  };\r\n\r\n  getLeftFooter = () => {\r\n    const { servings, love, contract } = this.state;\r\n    return {\r\n      data: [\r\n        ['servings.png', servings],\r\n        ['love.png', love],\r\n        ['contract.png', contract],\r\n      ],\r\n      firstLeft: 25,\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { parentState } = this.context;\r\n    const {\r\n      gameState,\r\n      playerClick,\r\n      playerName,\r\n      hasChamberMaids,\r\n      freeChambersToo,\r\n    } = parentState;\r\n    const checkMaids =\r\n      (typeof hasChamberMaids === 'function' && hasChamberMaids()) ||\r\n      freeChambersToo;\r\n    const circleOn = gameState === 'targetPlayer' && playerClick && checkMaids;\r\n    const playerClass = circleOn ? 'selectable' : '';\r\n    const circleClick = circleOn ? playerClick : () => {};\r\n\r\n    return (\r\n      <div className=\"PlayerArea\">\r\n        <div className=\"PlayerTable\">\r\n          <PlayZone />\r\n          <HandZone />\r\n          <ChamberZone />\r\n          <DeckZone />\r\n        </div>\r\n        <span\r\n          className={`PlayerCircle ${playerClass}`}\r\n          onClick={() => {\r\n            circleClick(null);\r\n          }}\r\n        >\r\n          {playerName}\r\n        </span>\r\n        <IconFooter {...this.getRightFooter()} />\r\n        <IconFooter {...this.getLeftFooter()} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './OppZones.css';\r\nimport './playerZones/PlayerZones.css';\r\n\r\nimport PlayZone from './playerZones/PlayZone';\r\nimport ChamberZone from './playerZones/ChamberZone';\r\nimport DeckZone from './playerZones/DeckZone';\r\nimport { checkChamberMaids } from '../helpers/actions';\r\n\r\nexport default class MainPlayer extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  getIconStructure = () => {\r\n    const { opponents } = this.context.parentState;\r\n    const { oppIdx } = this.props;\r\n    const { discard, hand, deck } = opponents[oppIdx].data;\r\n    return {\r\n      iconData: [\r\n        ['deck.png', deck ? deck.length : 5],\r\n        ['hand.png', hand ? hand.length : 5],\r\n        ['trash.png', discard && discard.length],\r\n      ],\r\n      firstTop: 3.5,\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { oppIdx } = this.props;\r\n    const { gameState, playerClick, opponents } = this.context.parentState;\r\n\r\n    const checkMaids =\r\n      checkChamberMaids(opponents[oppIdx].data) ||\r\n      this.context.parentState.freeChambersToo;\r\n    const circleOn = gameState === 'targetPlayer' && playerClick && checkMaids;\r\n    const playerClass = circleOn ? 'selectable' : '';\r\n    const circleClick = circleOn ? playerClick : () => {};\r\n\r\n    const { iconData, firstTop } = this.getIconStructure();\r\n    const playedCards = opponents[oppIdx].data.playedCards;\r\n    const oppName = opponents[oppIdx].name;\r\n\r\n    return (\r\n      <div style={{ position: 'relative' }}>\r\n        <div className={`OppTable p${oppIdx + 1}`}>\r\n          <DeckZone oppName={oppName} oppIdx={oppIdx} />\r\n          <div style={{ position: 'absolute' }}>\r\n            <PlayZone oppCards={playedCards} oppName={oppName} />\r\n            <ChamberZone oppName={oppName} oppIdx={oppIdx} />\r\n          </div>\r\n        </div>\r\n        <span\r\n          className={`OppCircle p${oppIdx + 1} ${playerClass}`}\r\n          onClick={() => {\r\n            circleClick(oppName);\r\n          }}\r\n        >\r\n          <span className=\"OppName\">{oppName}</span>\r\n        </span>\r\n        {iconData.map((item, idx) => {\r\n          return [\r\n            <div\r\n              className=\"OppIcons\"\r\n              style={{ top: `${firstTop + idx * 8}vh` }}\r\n            >\r\n              <img\r\n                alt=\"noseve\"\r\n                src={require(`./iconFooter/icons/${item[0]}`)}\r\n              />\r\n            </div>,\r\n            <div\r\n              className=\"OppIcons\"\r\n              style={{\r\n                backgroundColor: 'pink',\r\n                top: `${firstTop + 4 + idx * 8}vh`,\r\n              }}\r\n            >\r\n              {item[1]}\r\n            </div>,\r\n          ];\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Field from './field/Field';\nimport MessageArea from './messageArea/MessageArea';\nimport ImageArea from './imageArea/ImageArea';\nimport MainPlayer from './playerArea/MainPlayer';\nimport OppZones from './playerArea/OppZones';\n\nexport default class MainGame extends React.Component {\n  static contextTypes = {\n    parentState: PropTypes.object,\n  };\n\n  static childContextTypes = {\n    updateImage: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { imageName: null };\n  }\n\n  getChildContext() {\n    return {\n      updateImage: (imageName) => {\n        this.setState({ imageName });\n      },\n    };\n  }\n\n  render() {\n    const { opponents = [] } = this.context.parentState;\n\n    return (\n      <div className=\"App-base\">\n        <span style={{ width: '22vw' }} className=\"mainBlock\">\n          <MessageArea />\n          <ImageArea name={this.state.imageName} />\n        </span>\n        <span style={{ width: '56vw' }} className=\"mainBlock\">\n          <Field />\n          <MainPlayer />\n        </span>\n        <span style={{ width: '22vw' }} className=\"mainBlock\">\n          {opponents.map((foo, idx) => {\n            if (idx >= 3) return null;\n            return <OppZones oppIdx={idx} />;\n          })}\n        </span>\n      </div>\n    );\n  }\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport { defaultStyle } from './defaultStyle';\r\n\r\nimport './SCModal.css';\r\n\r\nexport default function SingleCardModal(props, context) {\r\n  const { overlay, content } = defaultStyle;\r\n  const { showSCModal } = context.parentState;\r\n  const { title, message, yesFunc, noFunc, imgRoute } =\r\n    context.parentState.scModalData || {};\r\n  return (\r\n    <ReactModal\r\n      isOpen={showSCModal}\r\n      style={{\r\n        overlay,\r\n        content: { ...content, background: 'rgba(0, 255, 255, 0.75)' },\r\n      }}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className=\"SCModal\">\r\n        <div className=\"SCtitle \">{title}</div>\r\n        <div className=\"SCmessage\">{message}</div>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${imgRoute || '1Love'}.jpg`)}\r\n        />\r\n        <button type=\"button\" style={{ left: '10%' }} onClick={yesFunc}>\r\n          S\r\n        </button>\r\n        <button type=\"button\" style={{ left: '80%' }} onClick={noFunc}>\r\n          No\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nSingleCardModal.contextTypes = {\r\n  parentState: PropTypes.object,\r\n  updateParent: PropTypes.func,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport { defaultStyle } from './defaultStyle';\r\n\r\nimport './ResultsModal.css';\r\n\r\nexport default function SingleCardModal(props, context) {\r\n  const { overlay, content } = defaultStyle;\r\n  const { showResultsModal, results } = context.parentState;\r\n  const colors = ['#ffcc00', 'gray', 'brown', 'white'];\r\n\r\n  return (\r\n    <ReactModal\r\n      isOpen={showResultsModal}\r\n      style={{\r\n        overlay,\r\n        content: {\r\n          ...content,\r\n          background: 'rgba(0, 0, 255, 0.9)',\r\n          left: '31%',\r\n          width: '36vw',\r\n        },\r\n      }}\r\n      onRequestClose={() => context.updateParent({ showResultsModal: false })}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className=\"ResultsModal\">\r\n        <div className=\"ResTitle \">Resultados</div>\r\n        {results.map((item, idx) => {\r\n          return (\r\n            <div className=\"playerRes\">\r\n              <div\r\n                style={{ width: '20%', color: colors[idx], fontSize: '40px' }}\r\n              >\r\n                {idx + 1}\r\n              </div>\r\n              <div style={{ width: '20%' }}>{item.name}</div>\r\n              <div style={{ width: '60%', color: 'pink' }}>{item.vp} VP</div>\r\n            </div>\r\n          );\r\n        })}\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => context.updateParent({ showResultsModal: false })}\r\n        >\r\n          OK\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nSingleCardModal.contextTypes = {\r\n  parentState: PropTypes.object,\r\n  updateParent: PropTypes.func,\r\n};\r\n","export const initialDeck = {\r\n  ColetteFramboise: 3,\r\n  '1Love': 7,\r\n};\r\n\r\nexport const initialOppData = {\r\n  deck: null,\r\n  hand: null,\r\n  discard: [],\r\n  playedCards: [],\r\n  chamberMaids: [],\r\n  boughtPrivateMaids: [],\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport { LioWebRTC } from 'react-liowebrtc';\r\n\r\nimport MainGame from './MainGame';\r\nimport SingleCardModal from './cardDisplayModal/SingleCardModal';\r\nimport ResultsModal from './cardDisplayModal/ResultsModal';\r\nimport { initiateCity } from './field/CityGenerator';\r\nimport { initialDeck, initialOppData } from './initialData.js';\r\nimport { shuffle, attachEvent } from './helpers/actions';\r\n\r\nexport default class ConnexionGame extends React.Component {\r\n  static childContextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      discard: [],\r\n      attachmentsLeft: [],\r\n      mainPlayer: props.mainPlayer,\r\n      playerName: props.playerName,\r\n      opponents: [],\r\n      message: '',\r\n      msgTitle: 'Preparando la partida...',\r\n      showSCModal: false,\r\n      showResultsModal: false,\r\n      results: [],\r\n    };\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      parentState: this.state,\r\n      updateParent: (data, cb) => {\r\n        this.setState(data, () => {\r\n          if (typeof cb === 'function') cb();\r\n        });\r\n      },\r\n      attachEvent: (card, selected) => attachEvent(this, card, selected),\r\n      updateMessage: this.updateMessage,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.mainPlayer) {\r\n      this.setState(initiateCity(), this.getInitialDeck);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { deck, discard, webrtc, playerName } = this.state;\r\n    if (webrtc && !_.isEqual(discard, prevState.discard)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { deck },\r\n      });\r\n    }\r\n    if (webrtc && !_.isEqual(discard, prevState.discard)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { discard },\r\n      });\r\n    }\r\n  }\r\n\r\n  updateMessage = (message) => {\r\n    const { webrtc } = this.state;\r\n    this.setState({ message });\r\n    if (webrtc) webrtc.shout('msgUpdate', message);\r\n  };\r\n\r\n  getInitialDeck = () => {\r\n    this.setState(\r\n      (prevState) => {\r\n        const newCity = prevState.city.map((card) => {\r\n          return { ...card, selected: initialDeck[card.name] };\r\n        });\r\n        return { city: newCity };\r\n      },\r\n      () => {\r\n        this.setState({ getDeck: 1, sendTo: this.sendToDeck });\r\n      }\r\n    );\r\n  };\r\n\r\n  sendToDeck = (cards) => {\r\n    this.setState(\r\n      { deck: shuffle(cards), gameState: 'gameSetUp' },\r\n      this.state.getInitialHand\r\n    );\r\n  };\r\n\r\n  join = (webrtc) => {\r\n    webrtc.joinRoom('cartasPereTantoCuore_v1');\r\n    this.setState({ webrtc });\r\n  };\r\n\r\n  onJoin = () => {\r\n    const { mainPlayer, playerName, webrtc } = this.state;\r\n    if (!mainPlayer) {\r\n      console.log('saludando');\r\n      setTimeout(() => webrtc.shout('hola', playerName), 3000);\r\n    }\r\n  };\r\n\r\n  getPeerData = (webrtcBad, type, payload, peer) => {\r\n    const { webrtc, city, privateMaids, deck, playerName } = this.state;\r\n    switch (type) {\r\n      case 'hola':\r\n        if (this.state.mainPlayer) {\r\n          (webrtc || webrtcBad).whisper(peer, 'cityUpdate', {\r\n            city,\r\n            privateMaids,\r\n          });\r\n        }\r\n        this.getOpp(peer, payload);\r\n        (webrtc || webrtcBad).whisper(peer, 'queTal', playerName);\r\n        break;\r\n      case 'queTal':\r\n        this.getOpp(peer, payload);\r\n        break;\r\n      case 'turnOrder':\r\n        this.setState({\r\n          msgTitle: `Turno de ${payload[0]}`,\r\n          turnNum: 0,\r\n          turnOrder: payload,\r\n          gameState: payload[0] === playerName ? 'startPhase' : 'opponentTurn',\r\n        });\r\n        break;\r\n      case 'cityUpdate':\r\n        this.setState(\r\n          { city: payload.city, privateMaids: payload.privateMaids },\r\n          () => {\r\n            if (!deck) this.getInitialDeck();\r\n          }\r\n        );\r\n        break;\r\n      case 'oppUpdate':\r\n        this.setState((prevState) => {\r\n          const newOpps = prevState.opponents.slice();\r\n          const oppIdx = prevState.opponents.findIndex(\r\n            (opp) => opp.name === payload.name\r\n          );\r\n          Object.keys(payload.data).forEach((key) => {\r\n            newOpps[oppIdx].data[key] = payload.data[key];\r\n          });\r\n          return { opponents: newOpps };\r\n        });\r\n        break;\r\n      case 'msgUpdate':\r\n        this.setState({ message: payload });\r\n        break;\r\n      case 'passTurn':\r\n        const { turnNum, turnOrder } = this.state;\r\n        const newTurn = turnOrder[(turnNum + 1) % turnOrder.length];\r\n        this.setState(\r\n          {\r\n            msgTitle: `Turno de ${newTurn}`,\r\n            turnNum: turnNum + 1,\r\n            gameState: newTurn === playerName ? 'startPhase' : 'opponentTurn',\r\n          },\r\n          this.state.checkGameFinish\r\n        );\r\n        break;\r\n      case 'sendEvent':\r\n        this.state.getChamberMaid(...payload);\r\n        break;\r\n      case 'sendAttach':\r\n        this.state.getAttachment(payload);\r\n        this.state.getDefend(payload);\r\n        break;\r\n      case 'sendAction':\r\n        this.state.getForcedAction(payload);\r\n        break;\r\n      case 'results':\r\n        this.setState((prevState) => {\r\n          return {\r\n            results: [...prevState.results, payload].sort((a, b) =>\r\n              a.vp > b.vp ? -1 : 1\r\n            ),\r\n          };\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  getOpp = (peer, name) => {\r\n    this.setState((prevState) => {\r\n      const opponents = _.cloneDeep(prevState.opponents);\r\n      opponents.push({ peer, name, data: initialOppData });\r\n      return { opponents };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <LioWebRTC\r\n        options={{ debug: false, dataOnly: true }}\r\n        onReady={this.join}\r\n        onReceivedPeerData={this.getPeerData}\r\n        onJoinedRoom={this.onJoin}\r\n      >\r\n        <MainGame />\r\n        <SingleCardModal />\r\n        <ResultsModal />\r\n      </LioWebRTC>\r\n    );\r\n  }\r\n}\r\n","import { set1Fixed, set1Maids } from '../cardData/set1';\r\nimport { privateMaids } from '../cardData/privateMaids';\r\nimport { love } from '../cardData/love';\r\nimport { shuffle } from '../helpers/actions';\r\n\r\nexport function initiateCity() {\r\n  const privateMaidsDeck = shuffle(privateMaids);\r\n  const city = [\r\n    ...love,\r\n    ...set1Fixed,\r\n    ...shuffle(set1Maids).filter((item, idx) => idx < 10),\r\n    { name: 'cardback', quantity: 8 },\r\n    privateMaidsDeck[0],\r\n    privateMaidsDeck[1],\r\n  ];\r\n  return {\r\n    city,\r\n    privateMaids: privateMaidsDeck.filter((item, idx) => idx >= 2),\r\n  };\r\n}\r\n","import React from 'react';\nimport './App.css';\n\nimport ConnexionGame from './game/ConnexionGame';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { playerName: '' };\n  }\n\n  getGameMenu = () => {\n    return (\n      <div className=\"App-base mainBlock\">\n        <div className=\"menuButton\">\n          <button\n            type=\"button\"\n            style={{ top: '20vh' }}\n            onClick={() => {\n              this.setState({ mainPlayer: true });\n            }}\n          >\n            Crear Partida\n          </button>\n          <button\n            type=\"button\"\n            style={{ top: '60vh' }}\n            onClick={() => {\n              this.setState({ mainPlayer: false });\n            }}\n          >\n            Unirse\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  getNameMenu = () => {\n    return (\n      <div className=\"App-base mainBlock\">\n        <div className=\"nameMenu\">\n          <div className=\"title\">Escribe Tu Nombre</div>\n          <input\n            type=\"text\"\n            value={this.state.playerName}\n            onChange={(e) => {\n              this.setState({ playerName: e.target.value });\n            }}\n          />\n          <button\n            type=\"button\"\n            onClick={() => {\n              if (this.state.playerName.length > 0)\n                this.setState({ start: true });\n            }}\n          >\n            Listos\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { playerName, mainPlayer, start } = this.state;\n    if (typeof mainPlayer === typeof undefined) return this.getGameMenu();\n    if (!start) return this.getNameMenu();\n    return <ConnexionGame playerName={playerName} mainPlayer={mainPlayer} />;\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}