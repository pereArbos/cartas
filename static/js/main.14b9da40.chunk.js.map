{"version":3,"sources":["game/cards sync /^/.*/.jpg$","game/cards/cardback.jpg","game/playerArea/iconFooter/icons/contract.png","game/playerArea/iconFooter/icons/deck.png","game/playerArea/iconFooter/icons/hand.png","game/playerArea/iconFooter/icons/love.png","game/playerArea/iconFooter/icons/servings.png","game/playerArea/iconFooter/icons/trash.png","game/playerArea/iconFooter/icons sync /^/.*$","game/cards/1Love.jpg","game/cards/2Love.jpg","game/cards/3Love.jpg","game/cards/set1/AmberTwilight.jpg","game/cards/set1/AniseGreenaway.jpg","game/cards/set1/AzureCrescent.jpg","game/cards/set1/BadHabit.jpg","game/cards/set1/ClaireSaintJuste.jpg","game/cards/set1/ColetteFramboise.jpg","game/cards/set1/ElizaRosewater.jpg","game/cards/set1/EsquineForet.jpg","game/cards/set1/EugenieFontaine.jpg","game/cards/set1/FayLongfang.jpg","game/cards/set1/GenevieveDaubigny.jpg","game/cards/set1/Illness.jpg","game/cards/set1/KagariIchinomiya.jpg","game/cards/set1/LalandeDreyfus.jpg","game/cards/set1/LucienneDeMarlboro.jpg","game/cards/set1/MarianneSoleil.jpg","game/cards/set1/MillyViolet.jpg","game/cards/set1/MoineDeLefevre.jpg","game/cards/set1/NatsumiFujikawa.jpg","game/cards/set1/NenaWilder.jpg","game/cards/set1/NordTwilight.jpg","game/cards/set1/OpheliaGrail.jpg","game/cards/set1/RosaTopaz.jpg","game/cards/set1/RougeCrescent.jpg","game/cards/set1/SafranVirginie.jpg","game/cards/set1/SainsburyLockwood.jpg","game/cards/set1/SoraNakachi.jpg","game/cards/set1/TanyaPetrushka.jpg","game/cards/set1/TenalysTrent.jpg","game/cards/set1/ViolaCrescent.jpg","game/playerArea/iconFooter/icons sync /^/.*/.png$","game/field/CardBlock.js","game/cardData/love.js","game/playerArea/playerZones/helpers/dataUpdates.js","game/cardData/set1Functions.js","game/cardData/set1ChamberFuncs.js","game/cardData/vpFunctions.js","game/cardData/set1.js","game/cardData/privateMaidFunctions.js","game/cardData/privateMaids.js","game/helpers/actions.js","game/field/Field.js","game/messageArea/MessageArea.js","game/imageArea/ImageArea.js","game/cardDisplayModal/defaultStyle.js","game/cardDisplayModal/CardDisplayModal.js","game/playerArea/playerZones/PlayZone.js","game/playerArea/playerZones/handZone/playerActions.js","game/playerArea/playerZones/handZone/HandZone.js","game/cardDisplayModal/PrivateMaidsDisplay.js","game/playerArea/playerZones/ChamberZone.js","game/playerArea/playerZones/DeckZone.js","game/playerArea/iconFooter/IconFooter.js","game/playerArea/MainPlayer.js","game/playerArea/OppZones.js","game/MainGame.js","game/cardDisplayModal/SingleCardModal.js","game/cardDisplayModal/ResultsModal.js","game/initialData.js","game/ConnexionGame.js","game/field/CityGenerator.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","CardBlock","props","context","card","name","set","quantity","selected","type","route","buyable","selectable","cardClick","selectCard","className","style","position","alt","src","require","cursor","title","undefined","onMouseOver","updateImage","onMouseOut","onClick","borderRight","disabled","borderLeft","visibility","contextTypes","PropTypes","func","love","cost","getChamberMaid","inst","mehCard","add","getTrueData","setState","prevState","newMaids","_","cloneDeep","chamberMaids","idx","findIndex","item","attachments","chambered","filter","foo","i","push","updateMessage","parentState","playerName","getAttachment","data","maidIdx","isPrivate","remove","cards","Array","isArray","privateMaids","boughtPrivateMaids","addOrRemove","maid","newIdx","same","list1","list2","namelist1","namelist2","isEqual","hasSameAttachments","list","length","getVP","discard","state","hasPoints","vp","hasIllness","chamberCards","pointMaids","result","forEach","inDeck","parseDiscard","maids","points","reduce","a","b","getPrivatePoints","getMaidPoints","forcedDiscard","handSelection","prevMessages","discardIdx","hand","playerState","updateParent","updatePlayer","webrtc","shout","setActions","selectionOn","ElizaFinish","gameState","freeChambersToo","playerClick","showSCModal","playFuncs","Sainsbury","message","button2Text","money","contract","restrType","restrName","sendTo","loveIdx","city","sendToHand","Esquine","button2Click","newHand","servings","includes","getServings","Tenalys","actionTenalys","drawAndReload","Natsumi","actionNatsumi","Claire","eventClick","c","d","oppName","cityIdx","removeEvent","ClaireDefend","isAttachment","cardName","prevActions","button1Text","button1Click","count","Eliza","opp","opponents","find","deck","scModalData","imgRoute","yesFunc","whisper","peer","draw","discarded","noFunc","getSCModal","ElizaDiscard","Nena","turnOrder","playerIdx","turnNum","bhIdx","bhLeft","opp1","checkChamberMaids","opp2","eventFuncs","Illness","threeLove","illIdx","healIllness","restricIllness","vpFuncs","Ophelia","Safran","r","Math","floor","BadHabit","Rouge","chamber","Viola","AzureCrescent","numRouge","RougeCrescent","min","Azure","allNums","ViolaCrescent","minThree","pairNums","num","minTwo","Colette","oppColettes","chamberColettes","deckColettes","getColettes","total","max","set1Fixed","attachTo","onStart","restric","chamberCost","set1Maids","onPlay","forcedAction","onDefend","increaseParam","param","noUpdate","getHandRandom","random","EugenieFinish","functions","Lucienne","hasPlayables","Rosa","Fay","Lalande","usadaJoder","Milly","cb","Tanya","Nord","newDiscards","maidClick","numIll","sendIllness","discardAndTarget","Sora","attachEvent","backToStart","removeAndTarget","Amber","amount","finishTurn","Eugenie","oppRandom","playerRandom","funcData","getModal","actionEugenie","newCard","onOppDiscard","auto","onDraw","shuffle","array","temporaryValue","randomIndex","currentIndex","getAttachInfo","removePendingAttach","removed","attachmentsLeft","left","newTurn","msgTitle","checkGameFinish","soldOut","playedCards","setTimeout","getResults","finishGame","Field","updateCard","index","mode","switchCard","privateSelectedTwice","sign","lovePaid","cardsOrdered","buyCards","event","sendToFunc","boughtCards","hasEvents","getBuyMsg","buyPrivateMaid","getPrivateMaid","updatePeers","sendToDiscard","bought","parsedMsg","split","msg","end","newDiscard","cardBack","newCity","newPrivateMaids","backIndex","isSelectable","hasChamberMaids","picking","nextProps","nextContext","this","getDeck","mainPlayer","buying","float","marginLeft","players","getTurnOrder","showResultsModal","React","Component","object","MessageArea","getMessage","ImageArea","display","width","maxWidth","margin","userSelect","defaultStyle","overlay","top","right","bottom","backgroundColor","content","height","border","overflow","WebkitOverflowScrolling","borderRadius","outline","padding","paddingTop","privateMaidsStyle","CardDisplayModal","showModal","hideModal","background","extraCmp","extraClass","maxAttach","attachNums","getMaxAttachment","isOpen","onRequestClose","ariaHideApp","cardIdx","AttachmentsDisplay","getImage","getRoute","getSelectInfo","info","marginTop","renderCard","selectInfo","imageClass","attach","selecting","chamberCard","clickable","PlayZone","show","oppCards","limit","config","servingPhase","loveCards","contractPhase","discardPhase","endTurn","discardAction","bullyOpp","oppMaid","getDiscardAction","opponentTurn","gameEnded","startPhase","HandZone","button1","button2","getCardPlay","selection","handSelect","msgButton","cardPlay","cardChamber","currentMaid","getCurrentMaid","newState","change","play","space","zIndex","PrivateMaidsDisplay","getDisplayedMaids","displayedMaids","getCardImage","topMaid","ChamberZone","defend","defensor","playerRes","results","getHealthyMaid","illness","getExtra","stopPropagation","hasAttachments","topAttachment","getDefend","prevProps","oldState","oppIdx","displayLimit","hasMaids","hasBorder","DeckZone","pileName","deckVisible","discardTop","marginBottom","reverse","IconFooter","firstLeft","image","value","serviceStates","MainPlayer","drawCards","splice","getRightFooter","getLeftFooter","getInitialHand","getForcedAction","handleAction","checkMaids","circleOn","playerClass","circleClick","childContextTypes","getIconStructure","iconData","firstTop","MainGame","imageName","SingleCardModal","colors","color","fontSize","initialDeck","ColetteFramboise","initialOppData","ConnexionGame","getInitialDeck","sendToDeck","join","joinRoom","onJoin","console","log","getPeerData","webrtcBad","payload","getOpp","newOpps","slice","key","sort","privateMaidsDeck","initiateCity","options","debug","dataOnly","onReady","onReceivedPeerData","onJoinedRoom","App","getGameMenu","getNameMenu","onChange","target","start","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"4FAAA,IAAIA,EAAM,CACT,cAAe,IACf,cAAe,IACf,cAAe,IACf,iBAAkB,GAClB,2BAA4B,IAC5B,4BAA6B,IAC7B,2BAA4B,IAC5B,sBAAuB,IACvB,8BAA+B,IAC/B,8BAA+B,IAC/B,4BAA6B,IAC7B,0BAA2B,IAC3B,6BAA8B,IAC9B,yBAA0B,IAC1B,+BAAgC,IAChC,qBAAsB,IACtB,8BAA+B,IAC/B,4BAA6B,IAC7B,gCAAiC,IACjC,4BAA6B,IAC7B,yBAA0B,IAC1B,4BAA6B,IAC7B,6BAA8B,IAC9B,wBAAyB,IACzB,0BAA2B,IAC3B,0BAA2B,IAC3B,uBAAwB,IACxB,2BAA4B,IAC5B,4BAA6B,IAC7B,+BAAgC,IAChC,yBAA0B,IAC1B,4BAA6B,IAC7B,0BAA2B,IAC3B,2BAA4B,KAI7B,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,I,iDCvDpBU,EAAOC,QAAU,IAA0B,sC,cCA3CD,EAAOC,QAAU,k0E,cCAjBD,EAAOC,QAAU,k/E,cCAjBD,EAAOC,QAAU,8lD,cCAjBD,EAAOC,QAAU,0oD,cCAjBD,EAAOC,QAAU,siD,cCAjBD,EAAOC,QAAU,8mD,qCCAjB,IAAId,EAAM,CACT,iBAAkB,GAClB,aAAc,GACd,aAAc,GACd,aAAc,GACd,iBAAkB,GAClB,cAAe,IAIhB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,I,+KC3BpBU,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,gD,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,kCCA3C,IAAId,EAAM,CACT,iBAAkB,GAClB,aAAc,GACd,aAAc,GACd,aAAc,GACd,iBAAkB,GAClB,cAAe,IAIhB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,qRCxBL,SAASY,EAAUC,EAAOC,GAAU,IAAD,EACAD,EAAME,KAA9CC,EADwC,EACxCA,KAAMC,EADkC,EAClCA,IAAKC,EAD6B,EAC7BA,SAAUC,EADmB,EACnBA,SAAUC,EADS,EACTA,KACjCC,EAAQJ,EAAG,aAASA,EAAT,YAAgBD,GAASA,EACpCM,EAAUT,EAAMU,WAChBC,EAAYF,EACd,WACET,EAAMY,WAAWZ,EAAME,OAEzB,aAEJ,OACE,0BAAMW,UAAWP,EAAW,EAAI,sBAAwB,cACtD,yBAAKQ,MAAO,CAAEC,SAAU,aACtB,yBACEC,IAAI,SACJC,IAAKC,MAAQ,YAAYV,EAAb,SACZK,UAAwB,IAAbR,EAAiB,UAAY,GACxCS,OAAOL,GAAaH,EAAW,EAAU,CAAEa,OAAQ,QAAf,GACpCC,MAAgB,aAATjB,EAAsB,0BAAuBkB,EACpDC,YAAa,WACXrB,EAAQsB,YAAYf,IAEtBgB,WAAY,WACVvB,EAAQsB,YAAY,OAEtBE,QAASd,IAGVL,EAAW,GACV,yBAAKO,UAAU,gBACb,4BACEN,KAAK,SACLO,MAAO,CACLY,YAAa,mBAEfD,QAAS,WACPzB,EAAMY,WAAWZ,EAAME,KAAM,WANjC,KAWA,8BAAOI,GACP,4BACEC,KAAK,SACLoB,SACW,gBAATpB,GAA0BF,IAAaC,IAAaG,EAEtDK,MAAO,CACLc,WAAY,mBAEdH,QAAS,WACPzB,EAAMY,WAAWZ,EAAME,KAAM,UATjC,OAkBI,gBAATK,EACC,wBAAIO,MAAO,CAAEe,WAAY,WAAzB,KAEA,4BAAKxB,IAMbN,EAAU+B,aAAe,CACvBP,YAAaQ,IAAUC,MCzElB,IAAMC,EAAO,CAClB,CAAE9B,KAAM,QAASI,KAAM,OAAQ2B,KAAM,EAAGD,KAAM,EAAG5B,SAAU,IAC3D,CAAEF,KAAM,QAASI,KAAM,OAAQ2B,KAAM,EAAGD,KAAM,EAAG5B,SAAU,IAC3D,CAAEF,KAAM,QAASI,KAAM,OAAQ2B,KAAM,EAAGD,KAAM,EAAG5B,SAAU,ICAtD,SAAS8B,EAAeC,EAAMC,GAAmB,IAAVC,EAAS,uDAAH,EAC5CpC,EAAOqC,EAAYF,GAiBzB,GAhBAD,EAAKI,UAAS,SAACC,GACb,IAAIC,EAAWC,IAAEC,UAAUH,EAAUI,cAC/BC,EAAMJ,EAASK,WAAU,SAACC,GAE9B,QADuBA,EAAKC,aAAeD,EAAKC,YAAY,KAClCD,EAAK7C,OAASD,EAAKC,QAU/C,OARI2C,GAAO,GACTJ,EAASI,GAAKI,UAAYR,EAASI,GAAKI,UAAYZ,EAChDI,EAASI,GAAKI,WAAa,IAC7BR,EAAWA,EAASS,QAAO,SAACC,EAAKC,GAAN,OAAYA,IAAMP,OAG/CJ,EAASY,KAAT,eAAmBpD,EAAnB,CAAyBgD,UAAW,KAE/B,CAAEL,aAAcH,MAEP,UAAdxC,EAAKK,KAAkB,CAAC,IAAD,EACc6B,EAAKnC,QAApCsD,EADiB,EACjBA,cAAeC,EADE,EACFA,YACvBD,EAAc,GAAD,OACRC,EAAYC,WADJ,mBACyBvD,EAAKC,KAD9B,qBAMV,SAASuD,EAActB,EAAMuB,GAAO,IACjCC,EAA+BD,EAA/BC,QAASC,EAAsBF,EAAtBE,UAAWC,EAAWH,EAAXG,OACxBC,EAAQJ,EAAKzD,KACZ8D,MAAMC,QAAQF,KAAQA,EAAQ,CAACJ,EAAKzD,OACpC4D,IAAQC,EAAQA,EAAM/E,IAAIuD,IAC3BsB,EACFzB,EAAKI,UAAS,SAACC,GACb,IAAMyB,EAAevB,IAAEC,UAAUH,EAAU0B,oBACrClB,EAAciB,EAAa,IAAMA,EAAa,GAAGjB,YAEvD,OADAiB,EAAa,GAAGjB,YAAcmB,EAAYnB,EAAac,EAAOD,GACvD,CAAEK,mBAAoBD,MAIjC9B,EAAKI,UAAS,SAACC,GACb,IAAIC,EAAWC,IAAEC,UAAUH,EAAUI,cAC/BwB,EAAO3B,EAASkB,GAChBX,EAAcmB,EAAYC,EAAKpB,YAAac,EAAOD,GAErDO,EAAKnB,UAAY,EACnBR,EAASkB,GAASV,WAAa,EAE/BR,EAAWA,EAASS,QAAO,SAACC,EAAKN,GAAN,OAAcA,IAAQc,KAGnD,IAAMU,EAAS5B,EAASK,WAAU,SAACC,GACjC,IAAMuB,EAmBZ,SAA4BC,EAAOC,GACjC,IAAMC,GAAaF,GAAS,IAAIxF,KAAI,SAACgE,GAAD,OAAUA,EAAK7C,QAC7CwE,GAAaF,GAAS,IAAIzF,KAAI,SAACgE,GAAD,OAAUA,EAAK7C,QACnD,OAAOwC,IAAEiC,QAAQF,EAAWC,GAtBXE,CAAmB7B,EAAKC,YAAaA,GAClD,OAAOD,EAAK7C,OAASkE,EAAKlE,MAAQoE,KAOpC,OALID,GAAU,EACZ5B,EAAS4B,GAAQpB,WAAa,EAE9BR,EAASY,KAAT,eAAmBe,EAAnB,CAAyBnB,UAAW,EAAGD,iBAElC,CAAEJ,aAAcH,MAI3B,SAAS0B,EAAYU,EAAMf,EAAOD,GAChC,OAAIA,GACMgB,GAAQ,IAAI3B,QAAO,SAACC,EAAKN,GAAN,OAAcA,EAAMgC,EAAKC,OAAS,KAEzD,GAAN,mBAAYD,GAAQ,IAApB,YAA4Bf,IAoBvB,SAASiB,EAAM5C,GAAO,IACnB6C,EAAY7C,EAAKnC,QAAQuD,YAAzByB,QADkB,EAEmB7C,EAAK8C,MAA1Cf,EAFkB,EAElBA,mBACFgB,EAAY,SAACd,GAAD,OAAUA,EAAKe,KAAOhD,EAAKiD,WAAWhB,IAClDiB,EAJoB,EAEEzC,aAEMM,OAAOgC,GACnCjB,EAAeC,EAAmBhB,OAAOgC,GACzCI,EAWR,SAAsBT,GACpB,IAAMU,EAAS,GAWf,OAVAV,EAAKW,SAAQ,SAACvF,GAAU,IACdC,EAAaD,EAAbC,KAAMiF,EAAOlF,EAAPkF,GACVA,IACEI,EAAOrF,GACTqF,EAAOrF,GAAMuF,QAAU,EAEvBF,EAAOrF,GAAQ,CAAEuF,OAAQ,EAAGxC,UAAW,EAAGkC,UAIzCI,EAvBYG,CAAaV,GAQhC,OANAK,EAAaG,SAAQ,SAACpB,GAAU,IACtBlE,EAAwBkE,EAAxBlE,KAAM+C,EAAkBmB,EAAlBnB,UAAWkC,EAAOf,EAAPe,GACrBG,EAAWpF,GACboF,EAAWpF,GAAM+C,UAAYA,EACxBqC,EAAWpF,GAAQ,CAAE+C,YAAWwC,OAAQ,EAAGN,SAoBtD,SAA0BQ,GACxB,IAAMC,EAASD,EAAM5G,KAAI,SAACkB,GAAD,OAAUA,EAAKkF,MACxC,MAAO,CAAC,GAAD,mBAAOS,IAAQC,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,KApBpCC,CAAiB/B,GAuB1B,SAAuB9B,EAAMwD,GAC3B,IAAMC,EAASlG,OAAOD,KAAKkG,GAAO5G,KAAI,SAACmB,GAAU,IAAD,EACZyF,EAAMzF,GACxC,OAAOiF,EAFuC,EACtCA,IADsC,EAClClC,UADkC,EACvBwC,OACMtD,EAAMwD,MAErC,MAAO,CAAC,GAAD,mBAAOC,IAAQC,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,KA5BHE,CAAc9D,EAAMmD,GCN9D,SAASY,EAAclG,EAASmG,EAAeC,EAAcnG,GAC3D,IAAMoG,EAAaF,EAAc,GACjC,GAAIE,GAAc,EAAG,CAAC,IACZC,EAAStG,EAAQuG,YAAjBD,KAQR,GAPAtG,EAAQwG,cAAa,SAAChE,GACpB,MAAO,CAAEwC,QAAQ,GAAD,mBAAMxC,EAAUwC,SAAhB,CAAyBsB,EAAKD,SAEhDrG,EAAQyG,cAAa,SAACjE,GAEpB,MAAO,CAAE8D,KADI,YAAO9D,EAAU8D,MACPpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,IAAQwD,SAElDpG,EAAM,CAAC,IAAD,EACuBD,EAAQuD,YAA/BmD,EADA,EACAA,OAAQlD,EADR,EACQA,WACZkD,GAAQA,EAAOC,MAAM,aAAc,CAAErG,KAAM,OAAQL,SACvDD,EAAQsD,cAAR,UACKE,EADL,sHAKA6C,GAAc,GAAKpG,IACrBD,EAAQuD,YAAYqD,WAApB,eACKR,EADL,CAEED,cAAe,KACfU,YAAa,QAkJnB,SAASC,EAAY3E,GACnBA,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,eACXC,iBAAiB,EACjBC,YAAa,KACbC,aAAa,IAoDV,IAAMC,EAAY,CACvBC,UA/TF,SAAmBjF,GACAA,EAAKnC,QAAQuG,YAAtBD,KACaxD,WAAU,SAAC7C,GAAD,MAAwB,UAAdA,EAAKC,QAChC,IAEdiC,EAAKI,SAAS,CAAE8E,QAAS,yBAA0BC,YAAa,OAChEnF,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,WACXQ,MAAO,CACLvF,KAAM,EACNwF,SAAU,GAEZC,UAAW,CAAC,YAAa,QAAS,eAClCC,UAAW,CAAC,QAAS,SACrBC,OAAQ,SAAC7D,GAAD,OAIZ,SAAoB3B,EAAM2B,GACxB,IAAKA,EAAM,GAAI,OACf3B,EAAKnC,QAAQyG,cAAa,SAACjE,GACzB,IAAM8D,EAAI,YAAO9D,EAAU8D,MAC3BA,EAAKjD,KAAL,MAAAiD,EAAI,YAASxC,IACb,IAAM8D,EAAUtB,EAAKxD,WAAU,SAAC7C,GAAD,MAAwB,UAAdA,EAAKC,QAC9C,MAAO,CAAEoG,KAAMA,EAAKpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,IAAQ+E,SAEnDzF,EAAKnC,QAAQwG,cAAa,SAAChE,GACzB,IAAMqF,EAAOnF,IAAEC,UAAUH,EAAUqF,MAC7BhF,EAAMgF,EAAK/E,WAAU,SAACC,GAAD,MAAwB,UAAdA,EAAK7C,QAE1C,OADA2H,EAAKhF,GAAKzC,UAAY,EACf,CAAE2G,UAAW,eAAgBc,WAZP,IAcvBrE,EAAerB,EAAKnC,QAAQuD,YAA5BC,WACRrB,EAAKnC,QAAQsD,cAAb,0CACqCE,EADrC,kDACyFM,EAAM,GAAG5D,KADlG,mBAnBqB4H,CAAW3F,EAAM2B,QAkTtCiE,QA1RF,SAAiB5F,GACfA,EAAKI,UAAS,SAACC,GACb,MAAO,CACL6E,QAAS,mCACTC,YAAa,QACbU,aAAc,kBAOpB,SAAqB7F,EAAMiE,GAAe,IAChCD,EAAkBhE,EAAK8C,MAAvBkB,cACAG,EAASnE,EAAKnC,QAAQuG,YAAtBD,KACRnE,EAAKnC,QAAQwG,cAAa,SAAChE,GACzB,IAAMwC,EAAO,YAAOxC,EAAUwC,SAE9B,OADAmB,EAAcX,SAAQ,SAAC3C,GAAD,OAASmC,EAAQ3B,KAAKiD,EAAKzD,OAC1C,CAAEmC,cAEX7C,EAAKnC,QAAQyG,cAAa,SAACjE,GACzB,IAAMyF,EAAO,YAAOzF,EAAU8D,MAC9B,MAAO,CACL4B,SAAU1F,EAAU0F,SAAW/B,EAAcrB,OAC7CwB,KAAM2B,EAAQ/E,QAAO,SAACC,EAAKN,GAAN,OAAesD,EAAcgC,SAAStF,UAG/DV,EAAKI,SAAL,eAAmB6D,EAAnB,CAAiCD,cAAe,KAAMU,YAAa,QAtB3CuB,CAAYjG,EAAMK,IACtC2D,cAAe,GACfU,YAAa,OAoRjBwB,QA7PF,SAAiBlG,EAAMlC,GAAO,IAAD,EACIkC,EAAKnC,QAAQuD,YAApCmD,EADmB,EACnBA,OAAQlD,EADW,EACXA,WACZkD,GAAQA,EAAOC,MAAM,aAAc,CAAErG,KAAM,OAAQL,SACvDkC,EAAKnC,QAAQsD,cAAb,UACKE,EADL,gFA2PA8E,cAtPF,SAAuBnG,GACrBA,EAAKoG,cAAc,IAsPnBC,QAnPF,SAAiBrG,EAAMlC,GACrBkC,EAAKI,UAAS,SAACC,GACb,MAAO,CACL6E,QAAS,gCACTC,YAAa,QACbU,aAAc,SAAClC,EAAGC,GAAJ,OAAUG,EAAcJ,EAAGC,EAAGvD,EAAWvC,IACvDkG,cAAe,GACfU,YAAa,OA6OjB4B,cA7MF,SAAuBtG,GACjBA,EAAK8C,MAAMqB,KAAKxB,QAAU,GAC5B3C,EAAKnC,QAAQuD,YAAYqD,YAAW,SAACpE,GACnC,MAAO,CACL6E,QAAS,mBACTC,YAAa,QACbU,aAAc,SAAClC,EAAGC,GAAJ,OAAUG,EAAcJ,EAAGC,EAAGvD,IAC5C2D,cAAe,GACfU,YAAa,OAsMnB6B,OAhMF,SAAgBvG,GACdA,EAAKnC,QAAQuD,YAAYqD,WAAW,CAClCS,QAAS,2CACTC,YAAa,WACbU,aAAc,kBACZ7F,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,oBAGjB5E,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,cACX4B,WAAY,SAAC7C,EAAGC,EAAG6C,EAAGC,GAAV,OAIhB,SAAqB1G,EAAMlC,EAAM4C,EAAKe,EAAWkF,GAAU,IAAD,EACzB3G,EAAKnC,QAAQuD,YAApCC,EADgD,EAChDA,WAAYkD,EADoC,EACpCA,OACpB,GAAIoC,EAAS,OACK,YAAd7I,EAAKC,KAEPiC,EAAKnC,QAAQuD,YAAYE,cAAc,CACrCE,QAASd,EACTe,YACAC,QAAQ,IAEL1B,EAAKnC,QAAQuD,YAAYrB,eAAejC,GAAO,GAEtD,IAAM4H,EAAOnF,IAAEC,UAAUR,EAAKnC,QAAQuD,YAAYsE,MAC5CkB,EAAUlB,EAAK/E,WAAU,SAACC,GAAD,OAAUA,EAAK7C,OAASD,EAAKC,QAC5D2H,EAAKkB,GAAS3I,UAAY,EACtBsG,GAAQA,EAAOC,MAAM,aAAc,CAAEkB,SACzC1F,EAAKnC,QAAQwG,aAAa,CACxBmC,WAAY,KACZd,OACAd,UAAW,iBAEb5E,EAAKnC,QAAQsD,cAAb,0CACqCE,EADrC,8BACqEvD,EAAKC,KAD1E,iBAzB8B8I,CAAY7G,EAAM2D,EAAGC,EAAG6C,EAAGC,OAsLzDI,aAxJF,SAAsB9G,EAAMuB,EAAMwF,GAChC,IAAMC,EAAWD,EAAe,UAAYxF,EAAK,GAAGxD,KADN,EAEfiC,EAAKnC,QAAQuD,YAApCC,EAFsC,EAEtCA,WAAYkD,EAF0B,EAE1BA,OACdW,EAAO,UAAM7D,EAAN,4BAAoC2F,EAApC,kCACbhH,EAAKnC,QAAQuD,YAAYqD,YAAW,SAACwC,GACnC,MAAO,CACL/B,QAAQ,0BAAD,OAA4B8B,EAA5B,iBACPE,YAAa,QACbC,aAAc,WACZ,IAAMzB,EAAOnF,IAAEC,UAAUR,EAAKnC,QAAQuD,YAAYsE,MAC5CkB,EAAUlB,EAAK/E,WAAU,SAACC,GAAD,OAAUA,EAAK7C,OAASiJ,KACvDtB,EAAKkB,GAAS3I,UAAYsD,EAAK6F,OAAS,EACpC7C,GAAQA,EAAOC,MAAM,aAAc,CAAEkB,SAEzC1F,EAAKnC,QAAQuD,YAAYqD,WAAWwC,GACpCjH,EAAKnC,QAAQwG,aAAa,CAAEqB,SAC5B1F,EAAKnC,QAAQsD,cAAc+D,IAE7BC,YAAa,KACbU,aAAc,WACZ7F,EAAKnC,QAAQuD,YAAYqD,WAAWwC,GAChCF,EACFzF,EAActB,EAAMuB,GACfxB,EAAc,WAAd,GAAeC,GAAf,mBAAwBuB,WAkIrC8F,MA5HF,SAAerH,EAAMlC,GACnBkC,EAAKI,SAAS,CACZ8E,QAAS,kCACTC,YAAa,OAEfnF,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,eACXE,YAAa,SAAC/G,GAAD,OAKjB,SAAoBiC,EAAM2G,EAAS7I,GAAO,IAAD,EACGkC,EAAKnC,QAAQuD,YAA/CmD,EAD+B,EAC/BA,OAAQlD,EADuB,EACvBA,WACViG,EAFiC,EACXC,UACNC,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAAS4I,KAC3Cc,GAASd,EAAUW,EAAI/F,KAAOvB,EAAKnC,QAAQuD,aAA3CqG,KACR,IAAKA,EAAK,GAER,YADA9C,EAAY3E,GALyB,MAQjByH,EAAK,GAAnB1J,EAR+B,EAQ/BA,KAAMC,EARyB,EAQzBA,IACRI,EAAQJ,EAAG,aAASA,EAAT,YAAgBD,GAASA,EAE1CiC,EAAKnC,QAAQwG,aAAa,CACxBU,aAAa,EACb2C,YAAa,CACX1I,MAAM,8BAAD,OACH2H,EAAO,oBAAgBA,GAAY,YAErCzB,QAAS,wBACTyC,SAAUvJ,EACVwJ,QAAS,WACPjD,EAAY3E,GACR2G,EACEpC,GACFA,EAAOsD,QAAQP,EAAIQ,KAAM,aAAc,CAAE3J,KAAM,OAAQL,SAEzDkC,EAAKnC,QAAQkK,KAAK,GAAG,SAAC5D,GACpB,IAAM6D,EAAY7D,EAAK,GACvBnE,EAAKnC,QAAQyG,aAAa,CACxBH,KAAMA,EAAKpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,EAAM,OAExCV,EAAKnC,QAAQwG,cAAa,SAAChE,GACzB,MAAO,CAAEwC,QAAQ,GAAD,mBAAMxC,EAAUwC,SAAhB,CAAyBmF,WAI/ChI,EAAKnC,QAAQsD,cAAb,UACKE,EADL,0EAEIsF,GAAWtF,KAIjB4G,OAAQ,kBAAMtD,EAAY3E,OA9CLkI,CAAWlI,EAAMjC,EAAMD,IAC9C+G,iBAAiB,KAqHnBsD,aA1DF,SAAsBnI,GACpBA,EAAKoG,cAAc,GAAG,SAACjC,GACrB,IAAM6D,EAAY7D,EAAK,GACvBnE,EAAKI,SAAS,CAAE+D,KAAMA,EAAKpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,EAAM,OACtDV,EAAKnC,QAAQwG,cAAa,SAAChE,GACzB,MAAO,CAAEwC,QAAQ,GAAD,mBAAMxC,EAAUwC,SAAhB,CAAyBmF,YAsD7CI,KAjDF,SAAcpI,GAAO,IAAD,EACmCA,EAAKnC,QAAQuD,YAA1DmD,EADU,EACVA,OAAQlD,EADE,EACFA,WAAYkG,EADV,EACUA,UAAWc,EADrB,EACqBA,UACjCC,EAAYtI,EAAKnC,QAAQuD,YAAYmH,QAAUF,EAAU1F,OACzD+C,EAAOnF,IAAEC,UAAUR,EAAKnC,QAAQuD,YAAYsE,MAC5C8C,EAAQ9C,EAAK/E,WAAU,SAACC,GAAD,MAAwB,aAAdA,EAAK7C,QACtC0K,EAAS/C,EAAK8C,GAAOvK,SACvBiH,EAAU,KACd,GAAIuD,EAAS,EAAG,CACd,IAAMC,EAAOnB,EAAUC,MACrB,SAACF,GAAD,OAASA,EAAIvJ,OAASsK,GAAWC,EAAY,GAAKD,EAAU1F,WAE1DgG,EAAkBD,EAAKnH,QACzBmE,EAAK8C,GAAOvK,UAAY,EACpBsG,GAAQA,EAAOsD,QAAQa,EAAKZ,KAAM,YAAa,CAACpC,EAAK8C,KACzDtD,EAAO,UAAM7D,EAAN,qEAA6EqH,EAAK3K,OAG7F,GAAI0K,EAAS,EAAG,CACd,IAAMG,EAAOrB,EAAUC,MACrB,SAACF,GAAD,OACEA,EAAIvJ,OACJsK,GAAWC,EAAYD,EAAU1F,OAAS,GAAK0F,EAAU1F,WAEzDgG,EAAkBC,EAAKrH,QACzBmE,EAAK8C,GAAOvK,UAAY,EACpBsG,GAAQA,EAAOsD,QAAQe,EAAKd,KAAM,YAAa,CAACpC,EAAK8C,KACzDtD,EAAUA,EAAO,UACVA,EADU,gBACK0D,EAAK7K,MADV,UAEVsD,EAFU,qEAE6DuH,EAAK7K,OAGnFmH,IACFlF,EAAKnC,QAAQwG,aAAa,CAAEqB,SAC5BnB,EAAOC,MAAM,aAAc,CAAEkB,SAC7B1F,EAAKnC,QAAQsD,cAAc+D,MCpRxB,IAAM2D,EAAa,CAAEC,QA1C5B,SAAiB9I,EAAMwB,EAASC,GAC9BzB,EAAKnC,QAAQuD,YAAYqD,YAAW,SAACwC,GACnC,MAAO,CACL/B,QACE,kEACFgC,YAAa,QACbC,aAAc,kBAOpB,SAAqBnH,EAAMwB,EAASC,EAAWwF,GAC7C,IAAM9C,EAAO5D,IAAEC,UAAUR,EAAKnC,QAAQuG,YAAYD,MAC5CsB,EAAUtB,EAAKxD,WAAU,SAACC,GAAD,MAAwB,UAAdA,EAAK7C,QACxCgL,EAAY5E,EAAKsB,GACvBzF,EAAKnC,QAAQyG,aAAa,CACxBH,KAAMA,EAAKpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,IAAQ+E,OALgB,MAO3BzF,EAAKnC,QAAQuD,YAApCmD,EAPkD,EAOlDA,OAAQlD,EAP0C,EAO1CA,WAChBrB,EAAKnC,QAAQwG,cAAa,SAAChE,GACzB,IAAMqF,EAAOnF,IAAEC,UAAUH,EAAUqF,MAC7BsD,EAAStD,EAAK/E,WAAU,SAACC,GAAD,MAAwB,YAAdA,EAAK7C,QAC7C2H,EAAKsD,GAAQ/K,UAAY,EACrBsG,GAAQA,EAAOC,MAAM,aAAc,CAAEkB,SAEzC,IAAM7C,EAAO,YAAOxC,EAAUwC,SAE9B,OADAA,EAAQ3B,KAAK6H,GACN,CAAElG,UAAS6C,WAEpBpE,EAActB,EAAM,CAAEwB,UAASC,YAAWC,QAAQ,IAClD1B,EAAKnC,QAAQuD,YAAYqD,WAAWwC,GACpCjH,EAAKnC,QAAQsD,cAAb,gCAC2BE,EAD3B,mEA3BwB4H,CAAYjJ,EAAMwB,EAASC,EAAWwF,IAC1D9B,YAAa,KACbU,aAAc,kBAAM7F,EAAKnC,QAAQuD,YAAYqD,WAAWwC,SAkCzBiC,eAJrC,SAAwBrL,GACtB,OAAOA,EAAQuG,YAAYD,KAAKqD,MAAK,SAAC1J,GAAD,MAAwB,UAAdA,EAAKC,UCmB/C,IAAMoL,EAAU,CACrBC,QA9DF,SAAiBtI,EAAWwC,GAC1B,OAAIA,GAAU,EAAU,EACjBA,GAAUA,EAAS,IAAM,EAAI,GAAK,IA6DzC+F,OA1DF,SAAgBvI,GACd,IACMwI,EAAIxI,EAAY,EAClB2C,EAAa,GAFP8F,KAAKC,MAAM1I,EAAY,GAKjC,OAFIwI,GAAK,IAAG7F,GAAU,GAClB6F,GAAK,IAAG7F,GAAU,GACfA,GAqDPgG,SAlDF,SAAkB3I,GAChB,OAAOA,GAAaA,GAAa,GAAK,GAAK,IAkD3C4I,MA/CF,SAAeC,EAASrG,GACtB,OAAOqG,EAAUrG,GA+CjBsG,MA5CF,SAAeD,EAASrG,EAAQtD,EAAMwD,GACpC,IAAIC,EAASH,EAASqG,EACtB,GAAInG,EAAMqG,cAAe,OAAOpG,EAChC,IAAMqG,EAAWtG,EAAMuG,cAAgBvG,EAAMuG,cAAcjJ,UAAY,EACvE,OAAO2C,EAAuC,EAA9B8F,KAAKS,IAAIF,EAAUH,IAyCnCM,MAtCF,SAAeN,EAASrG,EAAQtD,EAAMwD,GACpC,IAAIC,EAASH,EAASqG,EAChBG,EAAWtG,EAAMuG,cAAgBvG,EAAMuG,cAAcjJ,UAAY,EAEjEoJ,EAAU,CAACP,EADAnG,EAAM2G,cAAgB3G,EAAM2G,cAAcrJ,UAAY,EACnCgJ,GAC9BM,EAAWb,KAAKS,IAAL,MAAAT,KAAYW,GACvBG,EAAWH,EACdtN,KAAI,SAAC0N,GAAD,OAASA,EAAMF,KACnBrJ,QAAO,SAACuJ,GAAD,OAASA,EAAM,KACnBC,EAA6B,IAApBF,EAAS1H,OAAe4G,KAAKS,IAAL,MAAAT,KAAI,YAAQc,IAAY,EAC/D,OAAO5G,EAAoB,EAAX2G,EAAwB,EAATG,GA6B/BC,QA1BF,SAAiBb,EAASrG,EAAQtD,GAAO,IAEjCyK,EADgBzK,EAAKnC,QAAQuD,YAA3BmG,UACsB3K,KAAI,SAAC0K,GAAD,OAKpC,SAAqBA,EAAKtH,GAAO,IAAD,EACIsH,EAAI/F,KAA9BsB,EADsB,EACtBA,QACF6H,EAFwB,EACbjK,aACoB+G,MAAK,SAAC5G,GACzC,MAAqB,qBAAdA,EAAK7C,OAAgCiC,EAAKiD,WAAWrC,MAE1D+J,EAAe,EAInB,OAHA9H,EAAQQ,SAAQ,SAACzC,GACG,qBAAdA,EAAK7C,OAA6B4M,GAAgB,MAEjDA,GAAgBD,EAAkBA,EAAgB5J,UAAY,GAd1B8J,CAAYtD,EAAKtH,MACtD6K,EAAQlB,EAAUrG,EACxB,OAAOuH,GAASA,EAAQtB,KAAKuB,IAAL,MAAAvB,KAAI,YAAQkB,IAAe,EAAI,KC1C5CM,EAAY,CACvB,CACEhN,KAAM,UACNC,IAAK,EACLG,KAAM,QACN2B,KAAM,EACN7B,SAAU,GACV+M,SAAU,OACVC,QAASpC,EAAWC,QACpBoC,QAASrC,EAAWK,gBAEtB,CACEnL,KAAM,WACNC,IAAK,EACLG,KAAM,QACN2B,KAAM,EACNkD,GAAImG,EAAQM,SACZxL,SAAU,IAEZ,CACEF,KAAM,mBACNC,IAAK,EACLG,KAAM,YACN2B,KAAM,EACNkD,GAAImG,EAAQqB,QACZW,YAAa,EACblN,SAAU,IAEZ,CACEF,KAAM,iBACNC,IAAK,EACLG,KAAM,YACN2B,KAAM,EACNkD,GAAI,SAAC2G,EAASlC,GAAV,OAAmB,GAAKkC,EAAUlC,IACtCxJ,SAAU,IAIDmN,EAAY,CACvB,CACErN,KAAM,iBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNkD,GAAI,SAAC2G,EAASlC,GAAV,OAAmB,EAAIA,GAC3BM,KAAM,EACN1C,SAAU,EACVpH,SAAU,GAEZ,CACEF,KAAM,eACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNiI,KAAM,EACNhC,SAAU,EACVlG,KAAM,EACNwF,SAAU,EACVrC,GAAImG,EAAQC,QACZnL,SAAU,GAEZ,CACEF,KAAM,oBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNuL,OAAQrG,EAAUC,UAClBhH,SAAU,IAEZ,CACEF,KAAM,eACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACND,KAAM,EACNwF,SAAU,EACVgG,OAAQrG,EAAUkB,QAClBoF,aAActG,EAAUmB,cACxBlI,SAAU,IAEZ,CACEF,KAAM,aACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACND,KAAM,EACNwL,OAAQrG,EAAUoD,KAClBnK,SAAU,IAEZ,CACEF,KAAM,kBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNiI,KAAM,EACNhC,SAAU,EACVsF,OAAQrG,EAAUqB,QAClBiF,aAActG,EAAUsB,cACxBrI,SAAU,IAEZ,CACEF,KAAM,eACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNiI,KAAM,EACNsD,OAAQrG,EAAUY,QAClB3H,SAAU,IAEZ,CACEF,KAAM,oBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNiI,KAAM,EACNhC,SAAU,EACVlG,KAAM,EACN5B,SAAU,IAEZ,CACEF,KAAM,iBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNiI,KAAM,EACN1C,SAAU,EACVpH,SAAU,IAEZ,CACEF,KAAM,iBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACND,KAAM,EACNwL,OAAQrG,EAAUqC,MAClBiE,aAActG,EAAUmD,aACxBlK,SAAU,IAEZ,CACEF,KAAM,iBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNkD,GAAImG,EAAQE,OACZxJ,KAAM,EACNsL,YAAa,EACblN,SAAU,IAEZ,CACEF,KAAM,mBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNiG,SAAU,EACV9H,SAAU,IAEZ,CACEF,KAAM,mBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNiG,SAAU,EACVsF,OAAQrG,EAAUuB,OAClBgF,SAAUvG,EAAU8B,aACpB7I,SAAU,IAEZ,CACEF,KAAM,gBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNkD,GAAImG,EAAQc,MACZ5E,SAAU,EACV8F,YAAa,EACblN,SAAU,IAEZ,CACEF,KAAM,gBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNkD,GAAImG,EAAQS,MACZ7B,KAAM,EACNoD,YAAa,EACblN,SAAU,IAEZ,CACEF,KAAM,gBACNC,IAAK,EACLG,KAAM,OACN2B,KAAM,EACNkD,GAAImG,EAAQO,MACZ7J,KAAM,EACNsL,YAAa,EACblN,SAAU,K,QClKd,SAASuN,EAAc3N,EAAS4N,EAAO1N,EAAM2N,GAC3C7N,EAAQyG,cAAa,SAACjE,GACpB,OAAO,eAAGoL,EAAQpL,EAAUoL,GAAS,MAElCC,GAAU7N,EAAQwG,aAAa,CAAEO,UAAW,iBAJI,IAK7CvD,EAAexD,EAAQuD,YAAvBC,WACRxD,EAAQsD,cAAR,UAEIuK,EAAW,qBAAuB,uBAFtC,aAGOrK,EAHP,oBAG6BoK,EAH7B,iCAG2D1N,EAH3D,MAsPF,SAAS4N,EAAcxH,GACrB,IAAMzD,EAAM6I,KAAKC,MAAMD,KAAKqC,SAAWzH,EAAKxB,QAC5C,MAAO,CAAEjC,MAAK5C,KAAMqG,EAAKzD,IAG3B,SAASmL,EAAc7L,GACrBA,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,aACXC,iBAAiB,EACjBC,YAAa,KACbC,aAAa,IAIV,IAAM+G,EAAY,CACvBC,SAxSF,SAAkBlO,GAChB,IAAM6N,EAAW7N,EAAQuD,YAAY4K,eACrCR,EAAc3N,EAAS,WAAY,WAAY6N,IAuS/CO,KApSF,SAAcpO,GACZ,IAAM6N,EAAW7N,EAAQuD,YAAY4K,eACrCR,EAAc3N,EAAS,OAAQ,OAAQ6N,IAmSvCQ,IAhSF,SAAarO,GACX,IAAM6N,EAAW7N,EAAQuD,YAAY4K,eACrCnO,EAAQuD,YAAYqD,YAAW,SAACwC,GAC9B,MAAO,CACL/B,QAAS,2CACTgC,YAAa,SACb/B,YAAa,oBACbgC,aAAc,WACZtJ,EAAQuD,YAAYqD,WAAWwC,GAC/BuE,EAAc3N,EAAS,OAAQ,MAAO6N,IAExC7F,aAAc,WACZhI,EAAQuD,YAAYqD,WAAWwC,GAC/BuE,EAAc3N,EAAS,WAAY,MAAO6N,SAoRhDS,QAjQF,SAAiBnM,GAAO,IACdqB,EAAerB,EAAKnC,QAAQuD,YAA5BC,WACRrB,EAAKnC,QAAQkK,KAAK,GAClB/H,EAAKI,SAAS,CAAEgM,WAAY,OACvBpM,EAAKnC,QAAQuD,YAAY4K,gBAC5BhM,EAAKnC,QAAQwG,aAAa,CAAEO,UAAW,iBACzC5E,EAAKnC,QAAQsD,cAAb,gCAC2BE,EAD3B,gDA4PAgL,MAvPF,SAAerM,EAAMsM,GACnBtM,EAAKI,SAAS,CAAEgM,WAAY,OAC5BZ,EAAcxL,EAAKnC,QAAS,WAAY,SAAS,GACjDyO,KAqPAC,MAlPF,SAAevM,EAAMsM,GACnBtM,EAAKI,UAAS,SAACC,GACb,MAAO,CACL6E,QAAS,sCACTgC,YAAa,QACb/B,YAAa,KACbgC,aAAc,WACZnH,EAAKnC,QAAQkK,KAAK,GAClB/H,EAAKI,SAAL,eAAmBC,EAAnB,CAA8B+L,WAAY,OAAQE,GAFhC,MAGqBtM,EAAKnC,QAApCsD,EAHU,EAGVA,cAAeC,EAHL,EAGKA,YACvBD,EAAc,uBAAD,OACYC,EAAYC,WADxB,iDAIfwE,aAAc,kBAAM7F,EAAKI,SAASC,EAAWiM,SAqOjDE,KAhOF,SAAcxM,GACZA,EAAKI,SAAS,CAAEgM,WAAY,OAC5BpM,EAAKnC,QAAQuD,YAAYqD,YAAW,SAACwC,GACnC,MAAO,CACL/B,QAAS,sCACTgC,YAAa,QACbC,aAAc,WAAiBnH,EAAKnC,QAQhCuD,YAAYqD,WAAW,CAC7BS,QAAS,iCACTgC,YAAa,KACb/B,YAAa,QACbU,aAAc,SAAClC,EAAGC,GAAJ,OAMlB,SAA0B/F,EAASmG,GACjC,IAAMyI,EAAc5O,EAAQuG,YAAYD,KAAKpD,QAC3C,SAACC,EAAKN,GAAN,OAAcA,IAAQsD,EAAc,MAEtCnG,EAAQuD,YAAYqD,WAAW,CAC7BS,QAAS,kCACTC,YAAa,KACbnB,cAAe,KACfU,YAAa,OAEf7G,EAAQyG,cAAa,SAACjE,GAEpB,MAAO,CAAE8D,KADC,YAAO9D,EAAU8D,MACPpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,IAAQsD,EAAc,UAEjEnG,EAAQwG,cAAa,SAAChE,GACpB,IAAMwC,EAAO,YAAOxC,EAAUwC,SAE9B,OADAA,EAAQ3B,KAAR,MAAA2B,EAAO,YAAS4J,IACT,CACL5J,UACA+B,UAAW,oBACX8H,UAAW,SAAC/I,EAAGC,EAAG6C,GAAP,OAKjB,SAAqB5I,EAAS2D,EAASC,EAAWkF,GAChD,IAAMjB,EAAOnF,IAAEC,UAAU3C,EAAQuD,YAAYsE,MACvCsD,EAAStD,EAAK/E,WAAU,SAACC,GAAD,MAAwB,YAAdA,EAAK7C,QACvC4O,EAASpD,KAAKS,IAAItE,EAAKsD,GAAQ/K,SAAU,GACzCH,EAAO,GACT6O,EAAS,GAAG7O,EAAKoD,KAAKwE,EAAKsD,IAC3B2D,EAAS,GAAG7O,EAAKoD,KAAKwE,EAAKsD,IAE/BtD,EAAKsD,GAAQ/K,UAAY0O,EACzB9O,EAAQwG,aAAa,CAAEqB,OAAMd,UAAW,eATiB,MAWf/G,EAAQuD,YAA1CmD,EAXiD,EAWjDA,OAAQgD,EAXyC,EAWzCA,UAAWlG,EAX8B,EAW9BA,WAC3BkD,EAAOC,MAAM,aAAc,CAAEkB,SAC7B,IAAMnE,EAAO,CAAEC,UAAS1D,OAAM2D,YAAW2F,MAAOuF,GAChD,GAAIhG,EAAS,CACX,IAAMW,EAAMC,EAAUC,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAAS4I,KAC/CpC,GAAQA,EAAOsD,QAAQP,EAAIQ,KAAM,aAAcvG,QAC9C1D,EAAQuD,YAAYE,cAAc,CAAEE,UAAS1D,OAAM2D,cAC1D5D,EAAQsD,cAAR,UACKE,EADL,qBACyBsL,EADzB,sCAEIhG,GAAWtF,EAFf,MAvB4BuL,CAAY/O,EAAS8F,EAAGC,EAAG6C,QA1B7BoG,CAAiBlJ,EAAGC,IAC5CI,cAAe,GACfU,YAAa,KAbXS,YAAa,KACbU,aAAc,kBAAM7F,EAAKnC,QAAQuD,YAAYqD,WAAWwC,SAyN5D6F,KAvJF,SAAc9M,GACZA,EAAKnC,QAAQuD,YAAYqD,WAAW,CAClCS,QAAS,oCACTC,YAAa,WACbU,aAAc,kBACZ7F,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,aACX4B,WAAY,UAGlBxG,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,cACX4B,WAAY,SAAC7C,EAAGC,EAAG6C,EAAGC,GAAV,OAKhB,SAAyB1G,EAAMlC,EAAM4C,EAAKe,EAAWkF,GAAU,IAAD,EAClB3G,EAAKnC,QAAQuD,YAA/CmD,EADoD,EACpDA,OAAQgD,EAD4C,EAC5CA,UAAWlG,EADiC,EACjCA,WAC3B,GAAKsF,EAKE,CACL,IAAMW,EAAMC,EAAUC,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAAS4I,KACnD,GAAkB,YAAd7I,EAAKC,KAAoB,CAC3B,IAAMwD,EAAO,CAAEC,QAASd,EAAKe,YAAWC,QAAQ,GAC5C6C,GAAQA,EAAOsD,QAAQP,EAAIQ,KAAM,aAAcvG,QAC1CgD,GACTA,EAAOsD,QAAQP,EAAIQ,KAAM,YAAa,CAAChK,GAAO,QAV9B,YAAdA,EAAKC,KAEPuD,EAActB,EAAM,CAAEwB,QAASd,EAAKe,YAAWC,QAAQ,IAClD3B,EAAeC,EAAMlC,GAAO,GAUrCkC,EAAKnC,QAAQwG,aAAa,CAAEmC,WAAY,OACxCxG,EAAKnC,QAAQkP,YAAb,eAA8BjP,EAA9B,CAAoCkP,aAAa,IAAQ,GACzDhN,EAAKnC,QAAQsD,cAAb,gCAC2BE,EAD3B,mBAEIvD,EAAKC,KAFT,mCAII4I,GAAWtF,EAJf,mCAvB8B4L,CAAgBjN,EAAM2D,EAAGC,EAAG6C,EAAGC,MAE7D1G,EAAKI,SAAS,CAAEgM,WAAY,QA0I5Bc,MA5GF,SAAerP,GACbA,EAAQkK,KAAK,GAAG,SAAC5D,GACf,IAAM6D,EAAY7D,EAAK,GACvBtG,EAAQyG,aAAa,CAAEH,KAAM,KAC7BtG,EAAQwG,cAAa,SAAChE,GACpB,MAAO,CAAEwC,QAAQ,GAAD,mBAAMxC,EAAUwC,SAAhB,CAAyBmF,QAE3C,IAAMmF,EAASnF,EAAU7J,KAAK6H,SAAS,QAAU,EAAI,EACrDnI,EAAQkK,KAAKoF,GAAQ,kBAAMC,EAAWvP,MAPd,IAQhBwD,EAAexD,EAAQuD,YAAvBC,WACRxD,EAAQsD,cAAR,kDAC6CE,EAD7C,qBAEI2G,EAAUjK,KAFd,uBAIe,IAAXoP,EACI,+DACA,SA6FVE,QAvFF,SAAiBrN,GACfA,EAAKI,SAAS,CAAEgM,WAAY,OAC5BpM,EAAKnC,QAAQuD,YAAYqD,WAAW,CAClCS,QAAS,mCACTC,YAAa,OAEfnF,EAAKnC,QAAQwG,aAAa,CACxBO,UAAW,eACXE,YAAa,SAAC/G,GAAD,OAKjB,SAAkBiC,EAAM2G,GACtB,IAAKA,EAAS,OADiB,MAEW3G,EAAKnC,QAAQuD,YAA/CmD,EAFuB,EAEvBA,OAAQlD,EAFe,EAEfA,WACViG,EAHyB,EAEHC,UACNC,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAAS4I,KAC7C2G,EAAY3B,EAAcrE,EAAI/F,KAAK4C,MAJV,EAKTmJ,EAAUxP,KAAxBC,EALuB,EAKvBA,KAAMC,EALiB,EAKjBA,IACRI,EAAQJ,EAAG,aAASA,EAAT,YAAgBD,GAASA,EAE1CiC,EAAKnC,QAAQwG,aAAa,CACxBU,aAAa,EACb2C,YAAa,CACX1I,MAAM,2CAAD,OAA6C2H,GAClDzB,QAAS,8DACTyC,SAAUvJ,EACVwJ,QAAS,WACP,IAAM2F,EAAe5B,EAAc3L,EAAKnC,QAAQuG,YAAYD,MAC5DnE,EAAKnC,QAAQyG,cAAa,SAACjE,GACzB,IAAM8D,EAAO5D,IAAEC,UAAUH,EAAU8D,MAEnC,OADAA,EAAKoJ,EAAa7M,KAAOP,EAAYmN,EAAUxP,MACxC,CAAEqG,WAEPI,GACFA,EAAOsD,QAAQP,EAAIQ,KAAM,aAAc,CACrC3J,KAAM,OACNL,KAAM,CACJC,KAAM,kBACNC,IAAK,EACLG,KAAM,eAERqP,SAAU,CAACF,EAAU5M,IAAK6M,EAAazP,QAG3CkC,EAAKnC,QAAQsD,cAAb,gCAC2BE,EAD3B,6FAC0HsF,IAE1HkF,EAAc7L,IAEhBiI,OAAQ,kBAAM4D,EAAc7L,OA1CPyN,CAASzN,EAAMjC,IACtC8G,iBAAiB,KA+EnB6I,cAjCF,SAAuB1N,EAAMU,EAAKiN,GAChC3N,EAAKI,UAAS,SAACC,GACb,IAAM8D,EAAO5D,IAAEC,UAAUH,EAAU8D,MAEnC,OADAA,EAAKzD,GAAOP,EAAYwN,GACjB,CAAExJ,aC1RArC,EAAe,CAC1B,CACE/D,KAAM,gBACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,IAAK,EACL4K,aAAc9B,EAAUoB,OAE1B,CACEnP,KAAM,eACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,IAAK,EACLiI,QAASa,EAAUU,MAErB,CACEzO,KAAM,cACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJiI,QAASa,EAAUgB,MAErB,CACE/O,KAAM,cACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJ6K,MAAM,EACN5C,QAASa,EAAUI,KAErB,CACEnO,KAAM,iBACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJiI,QAASa,EAAUK,SAErB,CACEpO,KAAM,cACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJ8K,OAAQhC,EAAUO,OAEpB,CACEtO,KAAM,kBACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJiI,QAASa,EAAUuB,QACnB/B,aAAcQ,EAAU4B,eAE1B,CACE3P,KAAM,qBACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJ6K,MAAM,EACN5C,QAASa,EAAUC,UAErB,CACEhO,KAAM,YACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJ6K,MAAM,EACN5C,QAASa,EAAUG,MAErB,CACElO,KAAM,iBACNC,IAAK,EACLG,KAAM,cACN2B,KAAM,EACNkD,GAAI,EACJ8K,OAAQhC,EAAUS,QCjFf,SAASwB,EAAQC,GAMtB,IALA,IACEC,EACAC,EAFEC,EAAeH,EAAMrL,OAKlB,IAAMwL,GAEXD,EAAc3E,KAAKC,MAAMD,KAAKqC,SAAWuC,GAIzCF,EAAiBD,EAHjBG,GAAgB,GAIhBH,EAAMG,GAAgBH,EAAME,GAC5BF,EAAME,GAAeD,EAGvB,OAAOD,EAGF,SAAS7N,EAAYrC,GAC1B,IAAKA,EAAM,OAAO,KAClB,OAAQA,EAAKK,MACX,IAAK,OACH,OAAO0B,EAAK2H,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAASD,EAAKC,QAChD,IAAK,cACH,OAAO+D,EAAa0F,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAASD,EAAKC,QACxD,IAAK,OACH,OAAOqN,EAAU5D,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAASD,EAAKC,QACrD,QACE,OAAOgN,EAAUvD,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAASD,EAAKC,SAIlD,SAAS4K,EAAkBpH,GAAO,IAC/Bd,EAAqCc,EAArCd,aACR,OAD6Cc,EAAvBQ,mBAED,IACnBtB,EAAa+G,MAAK,SAACvF,GAAD,OAAUA,EAAK9D,KAAK6H,SAAS,WA0B5C,SAASoI,EAAcpO,EAAMlC,GAClC,OAAQA,EAAKkN,UACX,IAAK,OACH,MAAO,CACLpG,UAAW,oBACX8H,UAAW,SAAClL,EAASC,EAAWkF,GAC9B0H,EAAoBrO,GADsB,MAEAA,EAAK8C,MAAvCyB,EAFkC,EAElCA,OAAQgD,EAF0B,EAE1BA,UAAWlG,EAFe,EAEfA,WAC3B,GAAIsF,EAAS,CACX,IAAMW,EAAMC,EAAUC,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAAS4I,KAC7CpF,EAAO,CAAEC,UAAS1D,OAAM2D,aAC1B8C,GAAQA,EAAOsD,QAAQP,EAAIQ,KAAM,aAAcvG,QAC9CvB,EAAK8C,MAAMxB,cAAc,CAAEE,UAAS1D,OAAM2D,cACjDzB,EAAKmB,cAAL,UACKE,EADL,uBAC2BvD,EAAKC,KADhC,cAC0C4I,GAAWtF,EADrD,QAKN,QACE,MAAO,CACLuD,UAAW,eACXE,YAAa,SAAC/G,GACZsQ,EAAoBrO,GADC,MAEqBA,EAAK8C,MAAvCyB,EAFa,EAEbA,OAAQgD,EAFK,EAELA,UAAWlG,EAFN,EAEMA,WAC3B,GAAItD,EAAM,CACR,IAAMuJ,EAAMC,EAAUC,MAAK,SAAC5G,GAAD,OAAUA,EAAK7C,OAASA,KAC/CwG,GAAQA,EAAOsD,QAAQP,EAAIQ,KAAM,YAAa,CAAChK,SAC9CkC,EAAK8C,MAAM/C,eAAejC,GACjCkC,EAAKmB,cAAL,UACKE,EADL,uBAC2BvD,EAAKC,KADhC,cAC0CA,GAAQsD,EADlD,SAQV,SAASgN,EAAoBrO,GAC3BA,EAAKI,UAAS,SAACC,GACb,IAAMiO,EAAUjO,EAAUkO,gBAAgB,GACpCC,EAAO,YAAInO,EAAUkO,iBAAiBxN,QAAO,SAACC,EAAKN,GAAN,OAAcA,EAAM,KACnEa,EAAO,CAAEgN,gBAAiBC,GAM9B,OALIA,EAAK,GACPjN,EAAI,eAAQA,EAAR,GAAiB6M,EAAcpO,EAAMwO,EAAK,KACrCF,EAAQtB,YACjBzL,EAAKqD,UAAY,aACZrD,EAAKqD,UAAY,eACjBrD,KA+BJ,SAAS6L,EAAWvP,GAAU,IAAD,EACiBA,EAAQuD,YAAnDmD,EAD0B,EAC1BA,OAAQ8D,EADkB,EAClBA,UAAWE,EADO,EACPA,QAASlH,EADF,EACEA,WAChCkD,GAAQA,EAAOC,MAAM,WAAY,IACrC,IAAMiK,EAAUpG,GAAWE,EAAU,GAAKF,EAAU1F,QACpD9E,EAAQwG,aACN,CACEqK,SAAS,YAAD,OAAcD,GACtBlG,QAASA,EAAU,EACnB3D,UAAW6J,IAAYpN,EAAa,aAAe,gBAErDxD,EAAQuD,YAAYuN,iBAIjB,SAASA,EAAgB3O,GAAO,IAC7B0F,EAAS1F,EAAKnC,QAAQuD,YAAtBsE,KACJkJ,EAAU,EACdlJ,EAAKrC,SAAQ,SAACzC,GAAU,IACdzC,EAAyByC,EAAzBzC,KAAMJ,EAAmB6C,EAAnB7C,KAAME,EAAa2C,EAAb3C,UACO,aAATF,IAAwBI,GAAQ,IAAI6H,SAAS,UACjC,IAAb/H,IAAgB2Q,GAAW,MAE1CA,GAAW,GAKjB,SAAoB5O,GAAO,IAAD,EACMA,EAAK8C,MAA3B+L,EADgB,EAChBA,YAAa1K,EADG,EACHA,KACrBnE,EAAKnC,QAAQwG,cACX,SAAChE,GAAe,IACNoH,EAAkBpH,EAAlBoH,KAAM5E,EAAYxC,EAAZwC,QACd,MAAO,CACLA,QAAQ,GAAD,mBAAMA,GAAN,YAAkB4E,GAAlB,YAA2BtD,GAA3B,YAAoC0K,IAC3CpH,KAAM,GACN7C,UAAW,YACX8J,SAAU,oBACVxJ,QAAS,uDAGb,kBAAM4J,WAAW9O,EAAKnC,QAAQuD,YAAY2N,WAAY,QAExD/O,EAAKI,SAAS,CAAEyO,YAAa,GAAI1K,KAAM,KAnBrC6K,CAAWhP,G,IChKMiP,E,kDAQnB,WAAYrR,GAAQ,IAAD,8BACjB,cAAMA,IAWRsR,WAAa,SAACnR,EAAM4P,EAASrB,GAC3B,EAAKzO,QAAQwG,cAAa,SAAChE,GAAe,IAChCqF,EAASrF,EAATqF,KACFyJ,EAAQzJ,EAAK/E,WAAU,SAAC7C,GAAD,OAAUA,EAAKC,OAASA,KAErD,OADA2H,EAAKyJ,GAASxB,EACP,CAAEjI,UACR4G,IAlBc,EAqBnB9N,WAAa,SAACV,GAAwB,IAAlBsR,EAAiB,uDAAV,MACzB,GAAKtR,EAAL,CACA,OAAQsR,GACN,IAAK,OACHtR,EAAKI,UAAY,EACjB,EAAKmR,WAAWvR,EAAM,GACtB,MACF,IAAK,QACHA,EAAKI,UAAY,EACjB,EAAKmR,WAAWvR,GAAO,GACvB,MACF,QACwB,IAAlBA,EAAKG,UAAmB,EAAKqR,qBAAqBxR,MAC/CA,EAAKI,UAAYJ,EAAKI,SAAW,KACpCJ,EAAKI,SAAW,EAChB,EAAKmR,WAAWvR,EAAM,IAI9B,EAAKoR,WAAWpR,EAAKC,KAAMD,KAxCV,EA2CnBuR,WAAa,SAACvR,EAAMyR,GAClB,EAAKnP,UAAS,SAACC,GAAe,IACpBmP,EAA2BnP,EAA3BmP,SAAUC,EAAiBpP,EAAjBoP,aAClB,MAAO,CACLD,SAAUA,EAAWD,EAAOzR,EAAKgC,KACjC2P,aAAcA,EAAeF,OAhDhB,EAqDnBD,qBAAuB,SAACxR,GAItB,OAHc,EAAKD,QAAQuD,YAAYsE,KAAK/E,WAAU,SAACC,GACrD,OAAOA,EAAK1C,UAAY,GAAmB,gBAAd0C,EAAKzC,SAEpB,GAAmB,gBAAdL,EAAKK,MAzDT,EA4DnBuR,SAAW,SAACC,EAAOC,GACjB,IAAMC,EAAc,GAChBC,GAAY,EACVpK,EAAOnF,IAAEC,UAAU,EAAK3C,QAAQuD,YAAYsE,MAC7CkK,GAAY,EAAK/R,QAAQsD,cAAc,EAAK4O,UAAUrK,IAE3DA,EAAKrC,SAAQ,SAACvF,GAAU,IACdI,EAAyBJ,EAAzBI,SAAUH,EAAeD,EAAfC,KAAMI,EAASL,EAATK,KACxB,GAAID,GAAYA,EAAW,EACzB,GAAa,gBAATC,EACF,EAAK6R,eAAejS,GACpB,EAAKF,QAAQuD,YAAY6O,eAAe9P,EAAYrC,SAKpD,GAHAA,EAAKI,SAAW,EAChBJ,EAAKG,UAAYC,EACjB,EAAKgR,WAAWnR,EAAMD,EAAM,EAAKoS,aACpB,UAAT/R,EACF2R,GAAY,EACZ,EAAKjS,QAAQkP,YAAYjP,EAAMI,QAE/B,IAAK,IAAI+C,EAAI,EAAGA,EAAI/C,EAAU+C,IAC5B4O,EAAY3O,KAAKf,EAAYrC,QAMC,oBAAf8R,EACIA,EAAa,EAAKO,eAEtCN,GACT,EAAKzP,SAAS,CAAEoP,SAAU,EAAGC,aAAc,IAEtCK,GAAcF,GACjB,EAAK/R,QAAQwG,aAAa,CAAEO,UAAW,kBA9FxB,EAiGnBmL,UAAY,SAACrK,GAAU,IACbrE,EAAe,EAAKxD,QAAQuD,YAA5BC,WACJ6D,EAAO,UAAM7D,EAAN,WACP+O,GAAS,EACb1K,EAAKrC,SAAQ,SAACvF,GACRA,EAAKI,WACPgH,EAAO,UAAMA,EAAN,YAAiBpH,EAAKI,SAAtB,YAAkCJ,EAAKC,KAAvC,KACPqS,GAAS,MAGb,IAAIC,EAAY,GAMhB,OALAnL,EAAQoL,MAAM,KAAKjN,SAAQ,SAACkN,EAAK7P,EAAKgC,GACpC,IAAI8N,EAAM9P,IAAQgC,EAAKC,OAAS,EAAI,KAAO,IAC3C6N,EAAM9P,GAAOgC,EAAKC,OAAS,EAAI,GAAK6N,EACpCH,EAAS,UAAMA,GAAN,OAAkBE,GAAlB,OAAwBC,MAE5BJ,EAAM,UAAMC,EAAN,eAAwBhP,EAAxB,qBAjHI,EAoHnB8O,cAAgB,SAACxO,GACf,EAAK9D,QAAQwG,cAAa,SAAChE,GACzB,IAAMoQ,EAAU,YAAOpQ,EAAUwC,SAEjC,OADA4N,EAAWvP,KAAX,MAAAuP,EAAU,YAAS9O,IACZ,CAAEkB,QAAS4N,OAxHH,EA4HnBT,eAAiB,SAACjS,GAChB,EAAKF,QAAQwG,cAAa,SAAChE,GAAe,IAChCqF,EAAuBrF,EAAvBqF,KAAM5D,EAAiBzB,EAAjByB,aACR4O,EAAWhL,EAAK8B,MAAK,SAAC1J,GAAD,MAAwB,aAAdA,EAAKC,SAAwB,GAC5D4S,EAAUjL,EAAK3E,QAAO,SAACjD,GAAD,OAAUA,EAAKC,OAASA,KAChD6S,EAAkB9O,EACtB,GAAIA,EAAa,GAAI,CACnB,IAAM+O,EAAYF,EAAQhQ,WAAU,SAAC7C,GAAD,MAAwB,aAAdA,EAAKC,QACnD4S,EAAQE,GAAR,eACKH,EADL,CAEEzS,SAAUyS,EAASzS,SAAW,IAEhC0S,EAAQzP,KAAKY,EAAa,IAC1B8O,EAAkB9O,EAAaf,QAAO,SAACjD,EAAM4C,GAAP,OAAeA,EAAM,KAE7D,MAAO,CAAEgF,KAAMiL,EAAS7O,aAAc8O,KACrC,EAAKV,cA5IS,EA+InBY,aAAe,SAAChT,GAAU,IDjHDD,ECkHfiC,EAAqBhC,EAArBgC,KAAM/B,EAAeD,EAAfC,KAAMI,EAASL,EAATK,KACpB,GAAa,aAATJ,EAAqB,OAAO,EAChC,GAAa,UAATI,MDpHmBN,ECoHa,EAAKA,SDnH/BuD,YAAY2P,oBACjBlT,EAAQuD,YAAYmG,UAAUC,MAAK,SAACF,GACzC,OAAOqB,EAAkBrB,EAAI/F,UCiHsB,OAAO,EAHnC,MAK4B,EAAK1D,QAAQuD,YAAxDwD,EALe,EAKfA,UAAWU,EALI,EAKJA,UAAWC,EALP,EAKOA,UAAWH,EALlB,EAKkBA,MACnC4L,EAAwB,aAAdpM,EAChB,GAAIoM,GAAW1L,EAAUU,SAAS7H,GAAO,OAAO,EAChD,GAAI6S,GAAWzL,EAAUS,SAASjI,GAAO,OAAO,EARzB,IAUf8B,EAAmBuF,EAAnBvF,KAAMwF,EAAaD,EAAbC,SAVS,EAWY,EAAKvC,MAAhC0M,EAXe,EAWfA,SAAUC,EAXK,EAWLA,aAClB,OAAO5P,GAAQC,EAAO0P,GAAYnK,EAAWoK,GA3J5B,EA8JnBS,YAAc,WAAO,IAAD,EACqB,EAAKrS,QAAQuD,YAA5CsE,EADU,EACVA,KAAM5D,EADI,EACJA,aAAcyC,EADV,EACUA,OACxBA,GAAQA,EAAOC,MAAM,aAAc,CAAEkB,OAAM5D,kBA9J/C,EAAKgB,MAAQ,CAAE0M,SAAU,EAAGC,aAAc,GAFzB,E,sEAKOwB,EAAWC,IACfC,KAAKtT,QAAQuD,YAAzBgQ,SACQF,EAAY9P,YAAYgQ,SACtCD,KAAKzB,SAAS,KAAMwB,EAAY9P,YAAYoE,U,+BA2JtC,IAAD,SACyC2L,KAAKtT,QAAQuD,YAArDsE,EADD,EACCA,KAAMd,EADP,EACOA,UAAWY,EADlB,EACkBA,OAAQ6L,EAD1B,EAC0BA,WAC3BL,EAAwB,aAAdpM,EACV0M,EAAuB,kBAAd1M,GAAiCoM,EAEhD,OACE,yBAAKvS,UAAU,SACb,yBAAKC,MAAO,CAAE6S,MAAO,SAClB7L,GACCA,EAAK9I,KAAI,SAACgE,GAAD,OACP,kBAACjD,EAAD,CACEG,KAAM8C,EACNpC,WAAY,EAAKA,WACjBF,WAAYgT,GAAU,EAAKR,aAAalQ,QAG7C0Q,GACC,4BACEnT,KAAK,SACLO,MAAO,CAAE8S,WAAY,OACrBnS,QAAS,kBAAM,EAAKqQ,SAAS,KAAMsB,EAAUxL,EAAS,QAHxD,SAQa,cAAdZ,GAA6ByM,GAC5B,4BACElT,KAAK,SACLO,MAAO,CAAE8S,WAAY,OACrBnS,QAAS,kBDpFhB,SAAsBxB,GAAU,IAAD,EACMA,EAAQuD,YAA1CmG,EAD4B,EAC5BA,UAAWlG,EADiB,EACjBA,WAAYkD,EADK,EACLA,OACzBkN,EAAUlK,EAAU3K,KAAI,SAAC0K,GAAD,OAASA,EAAIvJ,QAC3C0T,EAAQvQ,KAAKG,GACb,IAAMgH,EAAY0F,EAAQ0D,GACtBvM,EAAU,wBACdmD,EAAUhF,SAAQ,SAACtF,EAAM2C,GACvBwE,EAAO,UAAMA,EAAN,YAAiBxE,EAAM,EAAI,MAAQ,IAAnC,OAAwC3C,MAE7CwG,IACFA,EAAOC,MAAM,YAAa6D,GAC1BxK,EAAQsD,cAAc+D,GACtBrH,EAAQwG,aAAa,CACnBqK,SAAS,YAAD,OAAcrG,EAAU,IAChCE,QAAS,EACT3D,UAAWyD,EAAU,KAAOhH,EAAa,aAAe,eACxDgH,eCoEuBqJ,CAAa,EAAK7T,WAHnC,WAQa,cAAd+G,GACC,4BACEzG,KAAK,SACLkB,QAAS,WACP,EAAKxB,QAAQwG,aAAa,CAAEsN,kBAAkB,MAHlD,oB,GA9MuBC,IAAMC,WAApB5C,EACZvP,aAAe,CACpB0B,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,KACxBmN,YAAapN,IAAUC,KACvBuB,cAAexB,IAAUC,M,WCRRmS,E,4MAKnBC,WAAa,WACX,OAAO,EAAKnU,QAAQuD,YAAY8D,QAAQoL,MAAM,KAAK1T,KAAI,SAACgE,EAAMF,GAC5D,OAAIA,EAAM,IAAM,EAAUE,EAExB,yBACEhC,IAAI,OACJC,IAAKC,OAAQ,YAAkC8B,EAAnC,e,uDAOlB,OACE,yBAAKnC,UAAU,WACb,yBAAKA,UAAU,YAAY0S,KAAKtT,QAAQuD,YAAYsN,UACpD,yBAAKjQ,UAAU,cAAc0S,KAAKa,mB,GArBDJ,IAAMC,WCHhC,SAASI,EAAUrU,GAChC,OACE,yBAAKc,MAAO,CAAEwT,QAAS,QAASC,MAAO,SACpCvU,EAAMG,MAAuB,aAAfH,EAAMG,MACnB,yBACEa,IAAI,SACJC,IAAKC,MAAQ,YAAYlB,EAAMG,KAAnB,SACZW,MAAO,CACL0T,SAAU,OACVb,MAAO,SACPW,QAAS,QACTG,OAAQ,OACRC,WAAY,WDTHP,EACZrS,aAAe,CACpB0B,YAAazB,IAAUmS,Q,4BEPdS,G,OAAe,CAC1BC,QAAS,CACP7T,SAAU,QACV8T,IAAK,EACLjE,KAAM,EACNkE,MAAO,EACPC,OAAQ,EACRC,gBAAiB,0BAEnBC,QAAS,CACPlU,SAAU,WACV8T,IAAK,MACLjE,KAAM,MACN2D,MAAO,OACPW,OAAQ,OACRC,OAAQ,OACRC,SAAU,OACVC,wBAAyB,QACzBC,aAAc,MACdC,QAAS,OACTC,QAAS,OACTC,WAAY,UAIHC,EAAoB,CAC/Bd,QAAS,CACP7T,SAAU,QACV8T,IAAK,EACLjE,KAAM,EACNkE,MAAO,EACPC,OAAQ,EACRC,gBAAiB,0BAEnBC,QAAS,CACPlU,SAAU,WACV8T,IAAK,MACLjE,KAAM,MACN2D,MAAO,OACPW,OAAQ,OACRC,OAAQ,OACRC,SAAU,OACVC,wBAAyB,QACzBC,aAAc,MACdC,QAAS,OACTC,QAAS,OACTC,WAAY,SCvCD,SAASE,EAAiB3V,EAAOC,GAAU,IAEtD2V,EAQE5V,EARF4V,UACAC,EAOE7V,EAPF6V,UACAC,EAME9V,EANF8V,WACA/R,EAKE/D,EALF+D,MACA3C,EAIEpB,EAJFoB,MACAoQ,EAGExR,EAHFwR,KACAuE,EAEE/V,EAFF+V,SACAhN,EACE/I,EADF+I,QATqD,EAa5C,iBAATyI,EAA0BkE,EAAoBf,EADxCC,EAZ+C,EAY/CA,QAASK,EAZsC,EAYtCA,QAGbe,EAAsB,iBAATxE,EAA0B,4BAA8B,GAC5D,YAATA,IAAoBwE,EAAa,gBAErC,IAAMC,EAkFR,SAA0BlS,GACxB,IAAMmS,EAAanS,EAAM/E,KAAI,SAACgE,GAAD,OAC3BA,EAAKC,YAAcD,EAAKC,YAAY8B,OAAS,KAE/C,OAAO4G,KAAKuB,IAAL,MAAAvB,KAAI,YAAQuK,IAtFDC,CAAiBpS,GAEnC,OACE,kBAAC,IAAD,CACEqS,OAAQR,EACR9U,MAAO,CAAE8T,UAASK,QAAQ,eAAMA,EAAP,CAAgBa,gBACzCO,eAAgBR,EAChBS,aAAa,GAEb,yBAAKzV,UAAS,2BAAsBmV,IAClC,4BAAK5U,GACL,yBAAKP,UAAU,SACQ,oBAAbkV,GAA2BA,IAClChS,EAAM/E,KAAI,SAACkB,EAAM4C,GAAP,OAqCrB,SAAoB5C,EAAMqW,EAAStW,EAASuR,EAAMyE,EAAWlN,GAAU,IAC7D7F,EAA2BhD,EAA3BgD,UACFsT,GAD6BtW,EAAhB+C,aACwB,IAAIjE,KAAI,SAACgE,EAAMF,GACxD,OAAO2T,EACLC,EAAS1T,GACT/C,EACA,CAAEc,SAAU,WAAY8T,IAAI,GAAD,OAAK,KAAO/R,EAAM,GAAlB,MAA0B8N,KAAM,GAC3D+F,GAAcnF,EAAMtR,EAAMqW,EAAStW,EAAS8I,EAAS/F,OAGnD4T,EAAOD,GAAcnF,EAAMtR,EAAMqW,EAAStW,EAAS8I,GAEzD,OACE,yBAAKlI,UAAU,aACb,yBAAKC,MAAO,CAAEC,SAAU,aACrB0V,EAASC,EAASxW,GAAOD,EAAS,GAAI2W,GACtCJ,GAEO,YAAThF,GACC,wBAAI1Q,MAAO,CAAE+V,UAAU,QAAD,OAAsB,IAAZZ,EAAV,eACnB/S,IAxDC4T,CAAW5W,EAAM4C,EAAK7C,EAASuR,EAAMyE,EAAWlN,OAGpD,4BAAQxI,KAAK,SAASkB,QAASoU,GAA/B,QAaR,SAASY,EAASjW,EAAOP,EAASa,EAAOiW,GAAa,IAC5CC,EAAwBD,EAAxBC,WAAYvV,EAAYsV,EAAZtV,QAEpB,OACE,yBACET,IAAI,SACJC,IAAKC,MAAQ,YAAYV,EAAb,SACZK,UAAWmW,EACX1V,YAAa,WACXrB,EAAQsB,YAAYf,IAEtBgB,WAAY,WACVvB,EAAQsB,YAAY,OAEtBE,QAASA,EACTX,MAAOA,GAAS,KAgCtB,SAAS4V,EAASxW,GAAO,IACfC,EAAcD,EAAdC,KAAMC,EAAQF,EAARE,IACd,OAAOA,EAAG,aAASA,EAAT,YAAgBD,GAASA,EAUrC,SAASwW,GAAcnF,EAAMtR,EAAMqW,EAAStW,EAAS8I,EAASkO,GAAS,IAAD,EACvBhX,EAAQuD,YAA7CwD,EAD4D,EAC5DA,UAAW8H,EADiD,EACjDA,UAAWlG,EADsC,EACtCA,WACtBrI,EAASL,EAATK,KAER,GAAkB,gBAAdyG,GAA+B4B,IACpB,UAATrI,GAAoB0W,GACtB,MAAO,CACLD,WAAY,aACZvV,QAAS,kBACPmH,EAAWqO,GAAU/W,EAAMqW,EAAkB,gBAAThW,EAAwBwI,KAIpE,IAAMmO,EAAYpI,GAA2B,sBAAd9H,EACzBmQ,EAAuB,YAAT3F,GAAsBjR,EAAK6H,SAAS,QAElDgP,EAAYF,IAAcC,GADH,gBAAT5W,GAAsC,IAAZgW,GAQ9C,MAAO,CAAES,WALUI,EAAY,aAAe,GAKzB3V,QADL2V,EAHG,WACjBtI,EAAUyH,EAAkB,gBAAThW,EAAwBwI,IAEJ,cAtF3C4M,EAAiB7T,aAAe,CAC9BP,YAAaQ,IAAUC,KACvBwB,YAAazB,IAAUmS,Q,IC/CJmD,G,kDAMnB,WAAYrX,GAAQ,IAAD,8BACjB,cAAMA,IAIR6V,UAAY,kBAAM,EAAKrT,SAAS,CAAE8U,MAAM,KALrB,EAMnB1B,UAAY,kBAAM,EAAKpT,SAAS,CAAE8U,MAAM,KAJtC,EAAKpS,MAAQ,CAAEoS,MAAM,GAFJ,E,qDAQT,IACArG,GAAgBsC,KAAKtT,QAAQuG,aAAe,IAA5CyK,YADD,EAEuBsC,KAAKvT,MAA3BuX,EAFD,EAECA,SAAUxO,EAFX,EAEWA,QACZhF,EAAQwT,GAAYtG,EACpBuG,EAAQD,EAAW,EAAI,GAE7B,MAAO,CACL,yBACE1W,UAAS,UAAK0W,EAAW,UAAY,WAA5B,gBACTnW,MACEmW,EAAQ,6BAAyBxO,GAAY,qBAE/CtH,QAAS8R,KAAKqC,WAEb7R,EAAM/E,KAAI,SAACkB,EAAM4C,GAAS,IACjB3C,EAAcD,EAAdC,KAAMC,EAAQF,EAARE,IACRI,EAAQJ,EAAG,aAASA,EAAT,YAAgBD,GAASA,EAC1C,OACE2C,EAAM0U,GACJ,yBAAKxW,IAAI,SAASC,IAAKC,MAAQ,YAAeV,EAAhB,eAKtC,kBAAC,EAAD,CACEsV,WAAW,0BACXF,UAAWrC,KAAKrO,MAAMoS,KACtBzB,UAAWtC,KAAKsC,UAChB9R,MAAOA,EACP3C,MACEmW,EAAQ,6BAAyBxO,GAAY,4B,GA5CjBiL,IAAMC,WAAvBoD,GACZvV,aAAe,CACpB0E,YAAazE,IAAUmS,OACvB1Q,YAAazB,IAAUmS,Q,aCNduD,GAAS,CACpBC,aAAc,CACZpQ,QAAS,oBACTC,YAAa,0BACbU,aAAc,SAAChI,GAAa,IAClBsG,EAAStG,EAAQuG,YAAjBD,KACA9C,EAAexD,EAAQuD,YAAvBC,WACFkU,EAAYpR,EAAKpD,QAAO,SAACjD,GAAD,MAAwB,SAAdA,EAAKK,QACvCsO,EAActI,EAAKpD,QAAO,SAACjD,GAAD,MAAwB,SAAdA,EAAKK,QAC3C0B,EAAO,EACPwF,EAAW,EAEfxH,EAAQyG,cACN,SAACjE,GACCR,EAAOQ,EAAUR,KACjBwF,EAAWhF,EAAUgF,SACrB,IAAMwJ,EAAW,YAAOxO,EAAUwO,aAGlC,OAFAA,EAAY3N,KAAZ,MAAA2N,EAAW,YAAS0G,IACpBA,EAAUlS,SAAQ,SAACvF,GAAD,OAAW+B,GAAQ/B,EAAK+B,QACnC,CAAEA,OAAMkG,SAAU,EAAG5B,KAAM,GAAI0K,kBAExC,WACEhR,EAAQwG,cAAa,SAAChE,GACpB,IAAMwC,EAAO,YAAOxC,EAAUwC,SAE9B,OADAA,EAAQ3B,KAAR,MAAA2B,EAAO,YAAS4J,IACT,CACL7H,UAAW,gBACX/B,UACAuC,MAAO,CAAEvF,OAAMwF,gBAGnBxH,EAAQsD,cAAR,UACKE,EADL,6CACoDxB,EADpD,qBACqEwF,EADrE,qBAORmQ,cAAe,CAAEtQ,QAAS,2BAC1BuQ,aAAc,CACZtQ,YAAa,eACbU,aAAc,SAAChI,GACb,IAAM6X,EAAU,WACd7X,EAAQkK,KAAK,GAAG,kBAAMqF,EAAWvP,OAE7B8X,EAiBZ,SAA0B9X,GAAU,IAE5B+X,EADgB/X,EAAQuD,YAAtBmG,UACmBC,MAAK,SAACF,GAC/B,IASgBxJ,EATV+X,EAAU1V,EAAYmH,EAAI/F,KAAKQ,mBAAmB,IACxD,SAAK8T,IAAYA,EAAQjI,kBAQT9P,EAPG+X,GAQXhV,aACH/C,EAAK+C,YAAY2G,MAAK,SAAC5G,GAAD,MAAwB,YAAdA,EAAK7C,YAP5C,OACE6X,GAAYzV,EAAYyV,EAASrU,KAAKQ,mBAAmB,IAAI6L,aAzBrCkI,CAAiBjY,GACnC8X,EACFA,EAAc9X,EAAS6X,GAClBA,MAGXK,aAAc,CAAE7Q,QAAS,GAAIC,YAAa,MAC1C6Q,UAAW,CAAE9Q,QAAS,GAAIC,YAAa,MACvC8Q,WAAY,CACV/Q,QAAS,iBACTC,YAAa,oBACbU,aAAc,SAAChI,GACbA,EAAQwG,aAAa,CAAEO,UAAW,oB,ICrDnBsR,G,kDAWnB,WAAYtY,GAAQ,IAAD,8BACjB,cAAMA,IAwCRuY,QAAU,kBAAM,EAAKrT,MAAMqE,aAAa,EAAKtJ,UAzC1B,EA0CnBuY,QAAU,kBACR,EAAKtT,MAAM+C,aAAa,EAAKhI,QAAS,EAAKiF,MAAMkB,gBA3ChC,EA6CnBqS,YAAc,SAACvY,EAAM4C,GAAS,IAAD,EACU,EAAKoC,MAAlC4B,EADmB,EACnBA,YAAawC,EADM,EACNA,YACrB,GAAIxC,EAAa,OAAO,kBfgBrB,SAAoB1E,EAAMU,GAC/B,IAAM0U,EAAQpV,EAAK8C,MAAM4B,YACzB1E,EAAKI,UAAS,SAACC,GACb,IAAIiW,EAAS,YAAOjW,EAAU2D,eAI9B,OAHIsS,EAAU9O,MAAK,SAAC5G,GAAD,OAAUA,IAASF,MAAQ,EAC5C4V,EAAYA,EAAUvV,QAAO,SAACH,GAAD,OAAUA,IAASF,KACvC4V,EAAU3T,OAASyS,GAAOkB,EAAUpV,KAAKR,GAC7C,CAAEsD,cAAesS,MevBMC,CAAW,gBAAM7V,IAC/C,GAAIwG,EAAa,OAAO,KAHG,IAKnBnB,EAAa,EAAKlI,QAAQuG,YAA1B2B,SACA5H,EAAsBL,EAAtBK,KAAMgN,EAAgBrN,EAAhBqN,YACd,OAAIA,GAAepF,GAAYoF,EAChB,SAAThN,GAAmB4H,EAAW,EACzB,WACL,EAAK3F,UAAS,SAACC,GACb,IAAMkB,EAAO,CAAElB,YAAWvC,OAAM4C,OAChC,MAAO,CACLwE,QAAQ,4BAAD,OAA2BpH,EAAKC,KAAhC,MACPmJ,YAAa,UACb/B,YAAa,sBACbgC,aAAc,kBAAM,EAAKqP,UAAUjV,EAAM,EAAKkV,WAC9C5Q,aAAc,kBAAM,EAAK2Q,UAAUjV,EAAM,EAAKmV,mBAK/C,kBAAM,EAAKA,YAAY5Y,EAAM4C,IAClB,SAATvC,GAAmB4H,EAAW,EAChC,kBAAM,EAAK0Q,SAAS3Y,EAAM4C,IAE5B,MAvEU,EA0EnB8V,UAAY,SAACjV,EAAM3B,GAAU,IACnBS,EAAyBkB,EAAzBlB,UAAWvC,EAAcyD,EAAdzD,KAAM4C,EAAQa,EAARb,IACzB,EAAKN,SAASC,GAAW,kBAAMT,EAAK9B,EAAM4C,OA5EzB,EA+EnB+V,SAAW,SAAC3Y,EAAMqW,GAAa,IAAD,EAC6BrW,EAAjD+B,YADoB,MACb,EADa,IAC6B/B,EAAvCiI,gBADU,MACC,EADD,IAC6BjI,EAAzBuH,gBADJ,MACe,EADf,EACkBgG,EAAWvN,EAAXuN,OAC1CvN,EAAKiK,KAAO,EACd,EAAKA,KAAKjK,EAAKiK,MAAM,WACG,oBAAXsD,GAAuBA,EAAO,gBAAMvN,MAEtB,oBAAXuN,GAAuBA,EAAO,gBAAMvN,GACtD,EAAKD,QAAQyG,cAAa,SAACjE,GACzB,IAAM8D,EAAI,YAAO9D,EAAU8D,MACrB0K,EAAW,YAAOxO,EAAUwO,aAElC,OADAA,EAAY3N,KAAKpD,GACV,CACL+B,KAAMQ,EAAUR,KAAOA,EACvBkG,SAAU1F,EAAU0F,SAAWA,EAAW,EAC1CV,SAAUhF,EAAUgF,SAAWA,EAC/BlB,KAAMA,EAAKpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,IAAQyT,KACxCtF,mBA/Fa,EAoGnB6H,YAAc,SAAC5Y,EAAMqW,GACnB,EAAKtW,QAAQyG,cAAa,SAACjE,GACzB,IAAM8D,EAAO,YAAI9D,EAAU8D,MAAMpD,QAAO,SAACC,EAAKN,GAAN,OAAcA,IAAQyT,KAC9D,MAAO,CAAEpO,SAAU1F,EAAU0F,SAAWjI,EAAKqN,YAAahH,WAE5D,EAAKtG,QAAQuD,YAAYrB,eAAejC,IAzGvB,EA4GnBiK,KAAO,SAACoF,EAAQb,GACd,EAAKzO,QAAQkK,KAAKoF,GAClB,IAAMwJ,EAAc,EAAK9Y,QAAQuD,YAAYwV,iBACzCD,GAAeA,EAAY7I,QAAoC,OAA1B,EAAKhL,MAAMsJ,WAClDuK,EAAY7I,OAAZ,gBAAyBxB,GACpBA,KA/GP,EAAKxJ,MAAQ,CAAEoC,QAAS,GAAIkH,WAAY,MAFvB,E,gEAKE,IAAD,OAClB+E,KAAKtT,QAAQwG,aAAa,CAAEI,WAAY,SAAClD,GAAD,OAAU,EAAKnB,SAASmB,Q,gDAGxC0P,EAAWC,GACnC,IAAM2F,EAAW3F,EAAY9P,YAAYwD,UACnCkS,EAAS3F,KAAKtT,QAAQuD,YAAYwD,YAAciS,EAClDC,GAAUzB,GAAOwB,IACnB1F,KAAK/Q,SAAL,aACE8E,QAAS,GACTgC,YAAa,KACb/B,YAAa,MACVkQ,GAAOwB,KARkC,IAWxCtI,EAAoB2C,EAAY9P,YAAhCmN,gBACR,GAAIuI,GAAuB,iBAAbD,GAA+BtI,EAAgB,GAAI,CAAC,IACxDxQ,EAASwQ,EAAgB,GAAzBxQ,KACRoT,KAAK/Q,SAAS,CAAE8E,QAAQ,UAAD,OAAYnH,EAAZ,mBAEzB,GAAI+Y,GAAuB,sBAAbD,GAAoCtI,EAAgB,GAAI,CAAC,IAC7DxQ,EAASwQ,EAAgB,GAAzBxQ,KACRoT,KAAK/Q,SAAS,CAAE8E,QAAQ,UAAD,OAAYnH,EAAZ,qBAErB+Y,GAAuB,eAAbD,GACZ1F,KAAK/Q,SAAS,CAAEgM,WAAY,OAE1B0K,GAAiD,iBAAvC3F,KAAKtT,QAAQuD,YAAYwD,WACrCuM,KAAK/Q,SAAS,CACZgM,WAAY,KACZpI,cAAe,KACfU,YAAa,S,+BAgFT,IAAD,OACCP,EAASgN,KAAKtT,QAAQuG,YAAtBD,KADD,EAEuDgN,KAAKrO,MAA3DoC,EAFD,EAECA,QAASlB,EAFV,EAEUA,cAAekD,EAFzB,EAEyBA,YAAaC,EAFtC,EAEsCA,aAFtC,EAG+BgK,KAAKrO,MAAnCqC,EAHD,EAGCA,YAAaU,EAHd,EAGcA,aAGrB,OACE,yBAAKpH,UAAU,YACb,4BAAKyG,GACL,yBAAKzG,UAAU,aACZ0F,EAAKvH,KAAI,SAACkB,EAAM4C,EAAKgC,GAAU,IACtB3E,EAAcD,EAAdC,KAAMC,EAAQF,EAARE,IACR+Y,EAAO,EAAKV,YAAYvY,EAAM4C,GAC9BxC,EAAW8F,GAAiBA,EAAcgC,SAAStF,GACnDtC,EAAQJ,EAAG,aAASA,EAAT,YAAgBD,GAASA,EAC1C,OACE,yBACEa,IAAI,SACJC,IAAKC,MAAQ,YAAkBV,EAAnB,SACZK,UAAS,UAAKsY,EAAO,WAAa,GAAzB,YACP7Y,EAAW,WAAa,IAE1BgB,YAAa,WACX,EAAKrB,QAAQsB,YAAYf,IAE3BgB,WAAY,WACV,EAAKvB,QAAQsB,YAAY,OAE3BE,QAAyB,oBAAT0X,EAAsBA,EAAO,aAC7CrY,MAAO,CACL8P,KAAK,GAAD,OAAK,IAAMwI,IAAYtW,EA1B3B,GA0ByCgC,EAAKC,OAA1C,MACJsU,OAAQvU,EAAKC,OAASjC,SAM/BwG,GAAeC,GACd,4BAAQhJ,KAAK,SAASO,MAAO,CAAE8P,KAAM,OAASnP,QAAS8R,KAAKgF,SACzDjP,GAGJ/B,GAAeU,GACd,4BAAQ1H,KAAK,SAASO,MAAO,CAAEgU,MAAO,OAASrT,QAAS8R,KAAKiF,SAC1DjR,Q,GA3KyByM,IAAMC,WAAvBqE,GACZxW,aAAe,CACpB0E,YAAazE,IAAUmS,OACvB3S,YAAaQ,IAAUC,KACvBwB,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,KACxB0E,aAAc3E,IAAUC,KACxBmI,KAAMpI,IAAUC,KAChBuB,cAAexB,IAAUC,M,ICTRsX,G,kDAMnB,WAAYtZ,GAAQ,IAAD,8BACjB,cAAMA,IAIR6V,UAAY,kBAAM,EAAKrT,SAAS,CAAE8U,MAAM,KALrB,EAMnB1B,UAAY,kBAAM,EAAKpT,SAAS,CAAE8U,MAAM,KANrB,EAQnBiC,kBAAoB,WAGlB,IAHyB,IACjBrV,EAAiB,EAAKlE,MAAtBkE,aACFsV,EAAiB,GACdnW,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,GAAIa,EAAab,GACfmW,EAAelW,KAAK,EAAKoT,SAASxS,EAAab,MACvBa,EAAab,GAA7BJ,aACQ,IAAIwC,SAAQ,SAACzC,GAC3BwW,EAAelW,KAAK,EAAKoT,SAAS1T,OAIxC,OAAOwW,EAAerW,QAAO,SAACC,EAAKN,GACjC,OAAOA,GAAO0W,EAAezU,OAAS,MArBvB,EAyBnB2R,SAAW,SAACxW,GAAU,IACZC,EAAcD,EAAdC,KAAMC,EAAQF,EAARE,IACd,OAAOA,EAAG,aAASA,EAAT,YAAgBD,GAASA,GA3BlB,EA8BnBsZ,aAAe,SAACvZ,EAAMwZ,EAAS5Y,GAAW,IAChCkG,EAAc,EAAK/G,QAAQuD,YAA3BwD,UACFkQ,EACU,sBAAdlQ,GAAmD,gBAAdA,EACvC,OACE,yBACEhG,IAAI,SACJH,UAAS,sBAAiBqW,EAAY,aAAe,IACrD9V,MAAM,yBACNH,IAAKC,MAAQ,YAAYhB,EAAb,SACZoB,YAAa,WACX,EAAKrB,QAAQsB,YAAYmY,IAE3BlY,WAAY,WACV,EAAKvB,QAAQsB,YAAY,OAE3BE,QAAS,EAAKmU,UACd9U,MAAOA,KA7CX,EAAKoE,MAAQ,CAAEoS,MAAM,GAFJ,E,qDAoDT,IACAvO,EAAYwK,KAAKvT,MAAjB+I,QACFyQ,EAAiBjG,KAAKgG,oBAC5B,GAAIC,EAAezU,QAAU,EAAG,OAAO,KACvC,IAAM2U,EAAUF,EAAeA,EAAezU,OAAS,GAEvD,MAAO,CACL,yBAAKlE,UAAU,YAAYC,MAAO,CAAEC,SAAU,aAC3CwS,KAAKkG,aAAaD,EAAe,GAAIE,EAAS,IAC9CF,EAAe,IACdjG,KAAKkG,aAAaD,EAAe,GAAIE,EAAS,CAC5C3Y,SAAU,WACV8T,IAAK,QACLjE,KAAM,IAET4I,EAAe,IACdjG,KAAKkG,aAAaD,EAAe,GAAIE,EAAS,CAC5C3Y,SAAU,WACV8T,IAAK,MACLjE,KAAM,KAGZ,kBAAC,EAAD,CACEgF,UAAWrC,KAAKrO,MAAMoS,KACtBxB,WAAW,mBACX/R,MAAOwP,KAAKvT,MAAMkE,aAClB2R,UAAWtC,KAAKsC,UAChB9M,QAASA,EACT3H,MACE2H,EAAO,gCAA4BA,GAAY,wBAEjDyI,KAAK,sB,GAzFoCwC,IAAMC,WAAlCqF,GACZxX,aAAe,CACpBP,YAAaQ,IAAUC,KACvBwB,YAAazB,IAAUmS,Q,ICCNyF,G,kDAYnB,WAAY3Z,GAAQ,IAAD,8BACjB,cAAMA,IA8DRqS,eAAiB,SAACnS,GAChB,EAAKsC,UAAS,SAACC,GACb,MAAO,CACL0B,mBAAmB,CAAEjE,GAAH,mBAAYuC,EAAU0B,0BAlE3B,EAuEnByV,OAAS,SAACjW,EAAMwF,GACd,IAAM0Q,EAAW,EAAK5Z,QAAQuG,YAAYD,KAAKqD,MAC7C,SAACvF,GAAD,OAAUA,EAAKsJ,YAEbkM,IAAalW,EAAKG,OACpB+V,EAASlM,SAAT,gBAAwBhK,EAAMwF,GAE1BA,EACFzF,EAAc,gBAAMC,GAEpBxB,EAAc,WAAd,uCAAwBwB,MAjFX,EAsFnBwN,WAAa,WACX,IAAM2I,EAAY,CAChB3Z,KAAM,EAAKF,QAAQuD,YAAYC,WAC/B2B,GAAIJ,EAAM,kBAEZ,EAAK/E,QAAQwG,aAAa,CAAEsT,QAAS,CAACD,KALrB,IAMTnT,EAAW,EAAK1G,QAAQuD,YAAxBmD,OACJA,GACFuK,YACE,kBAAMvK,EAAOC,MAAM,UAAWkT,KACd,KAAhBnO,KAAKqC,WAhGQ,EAoGnB6H,UAAY,kBAAM,EAAKrT,SAAS,CAAE8U,MAAM,KApGrB,EAqGnB1B,UAAY,kBAAM,EAAKpT,SAAS,CAAE8U,MAAM,KArGrB,EAuGnBZ,SAAW,SAACxW,GAAU,IACZC,EAAcD,EAAdC,KAAMC,EAAQF,EAARE,IACd,OAAOA,EAAG,aAASA,EAAT,YAAgBD,GAASA,GAzGlB,EA4GnBkF,WAAa,SAACnF,GACZ,QAAKA,EAAK+C,aACH/C,EAAK+C,YAAY2G,MAAK,SAAC5G,GAAD,MAAwB,YAAdA,EAAK7C,SA9G3B,EAiHnB6Z,eAAiB,WACf,IAAMjB,EAAc,EAAK7T,MAAMf,mBAAmB,GAClD,OAAK4U,EACE,EAAK1T,WAAW0T,GAAe,KAAOA,EADpB,MAnHR,EAuHnB3K,aAAe,WAAO,IAAD,EAC0B,EAAKlJ,MAA1CrC,EADW,EACXA,aAAcsB,EADH,EACGA,mBACtB,MAAO,sBAAItB,GAAJ,CAAkBsB,EAAmB,IAAM,KAAIyF,MAAK,SAACvF,GAC1D,IAAM4V,EAAU,EAAK5U,WAAWhB,GAChC,OAAO4V,GAAWA,EAAQ3M,QAAQ,EAAKrN,aA3HxB,EA+HnBia,SAAW,SAACha,EAAM4C,EAAKe,GAAe,IAC5BmD,EAAc,EAAK/G,QAAQuD,YAA3BwD,UACR,OAAInD,GAAuC,OAA1B,EAAKqB,MAAMsJ,YACxBtO,EAAKoN,UAAYpN,EAAKoN,QAAQ,EAAKrN,UACrB,eAAd+G,GACA9G,EAAK+P,OAAS/P,EAAKmN,SAAW,EAAKhI,WAAWnF,GAHM,GAIjD,CACLW,UAAW,WACXY,QAAS,SAAClC,GACRA,EAAE4a,kBACFja,EAAKmN,QAAL,gBAAmBvK,EAAKe,IAE1BvC,YAAa,kBAAM,EAAKrB,QAAQsB,YAAY,EAAKmV,SAASxW,KAC1DsB,WAAY,kBAAM,EAAKvB,QAAQsB,YAAY,SA5I5B,EAgJnBuV,WAAa,SAAC5W,EAAM4C,GAAS,IACnBG,EAAsB/C,EAAtB+C,YAAa1C,EAASL,EAATK,KACf6Z,EAAiBnX,GAAeA,EAAY,GAC5CoX,EAAgBD,GAAkBnX,EAAYA,EAAY8B,OAAS,GACnElB,EAAqB,gBAATtD,EAElB,OACE,yBAAKO,MAAO,CAAEC,SAAU,WAAY4S,MAAO,SACzC,uCACE3S,IAAI,SACJC,IAAKC,MAAQ,YAAe,EAAKwV,SAASxW,GAA9B,UACP,EAAKF,MAAM+I,QAAU,GAAK,EAAKmR,SAASha,EAAM4C,EAAKe,KAEzDuW,GACC,uCACEpZ,IAAI,SACJC,IAAKC,MAAQ,YAAe,EAAKwV,SAAS2D,GAA9B,UACP,EAAKra,MAAM+I,QACZ,GACA,EAAKmR,SAASG,EAAevX,EAAKe,GALxC,CAME/C,MAAO,CACLC,SAAU,WACV8T,IAAK,QACLjE,KAAM,QArKhB,EAAK1L,MAAQ,CACXoS,MAAM,EACN9I,WAAY,KACZ3L,aAAc,GACdsB,mBAAoB,IANL,E,gEAUE,IAAD,OACboP,KAAKvT,MAAM+I,SACdwK,KAAKtT,QAAQwG,aAAa,CACxBtE,eAAgB,SAACjC,EAAMoC,GAAP,OAAeH,EAAe,EAAMjC,EAAMoC,IAC1D+P,eAAgBkB,KAAKlB,eACrB3O,cAAe,SAACC,GAAD,OAAUD,EAAc,EAAMC,IAC7CwP,gBAAiB,kBAAMpI,EAAkB,EAAK7F,QAC9CkJ,aAAcmF,KAAKnF,aACnB4K,eAAgBzF,KAAKyG,eACrBM,UAAW,SAAC3W,EAAMwF,GAAP,OAAwB,EAAKyQ,OAAOjW,EAAMwF,IACrDgI,WAAYoC,KAAKpC,e,yCAKJoJ,EAAW9X,GAAY,IAAD,EACM8Q,KAAKrO,MAA1CrC,EAD+B,EAC/BA,aAAcsB,EADiB,EACjBA,mBADiB,EAERoP,KAAKtT,QAAQuD,YAApCmD,EAF+B,EAE/BA,OAAQlD,EAFuB,EAEvBA,WAEdkD,IACChE,IAAEiC,QAAQT,EAAoB1B,EAAU0B,qBAEzCwC,EAAOC,MAAM,YAAa,CACxBzG,KAAMsD,EACNE,KAAM,CAAEQ,wBAGRwC,IAAWhE,IAAEiC,QAAQ/B,EAAcJ,EAAUI,eAC/C8D,EAAOC,MAAM,YAAa,CACxBzG,KAAMsD,EACNE,KAAM,CAAEd,oB,gDAKYwQ,EAAWC,GACnC,IAAKC,KAAKvT,MAAM+I,QAAS,CACvB,IAAMyR,EAAWjH,KAAKtT,QAAQuD,YAAYwD,WAAa,GACjDiS,EAAW3F,EAAY9P,YAAYwD,UACzC,GAAIwT,IAAavB,GAAyB,eAAbA,EAA2B,CACjDuB,EAASpS,SAAS,WAAWmL,KAAK/Q,SAAS,CAAEgM,WAAY,OAC9D,IAAMuK,EAAcxF,KAAKyG,iBACrBjB,GAAeA,EAAY1L,QACzB0L,EAAY9I,MAAM8I,EAAY1L,QAAQkG,KAAKtT,SACrCsT,KAAKnF,gBACfmF,KAAKtT,QAAQwG,aAAa,CACxBO,UAAW,qB,+BAuHX,IAAD,SACqBuM,KAAKvT,MAAzB+I,EADD,EACCA,QAAS0R,EADV,EACUA,OADV,EAE0BlH,KAAKtT,QAAQuD,YAAtCmG,EAFD,EAECA,UAAW3C,EAFZ,EAEYA,UACbrD,EAAOoF,EAAUY,EAAU8Q,GAAQ9W,KAAO4P,KAAKrO,MAC7CrC,EAAqCc,EAArCd,aAAcsB,EAAuBR,EAAvBQ,mBAEhB4U,EAAc5U,EAAmB,GACnCuW,EAAe3B,EAAc,EAAI,EACjChQ,IAAS2R,EAAe3B,EAAc,EAAI,GAE9C,IAAM4B,EACJ5B,GAAelW,EAAa+G,MAAK,SAACvF,GAAD,OAAUA,EAAK9D,KAAK6H,SAAS,WAC5DwS,EAA0B,sBAAd5T,GAAqC2T,EAGrD,OAFAC,EAAYA,GAA2B,gBAAd5T,EAElB,CACL,yBACEnG,UAAS,UAAKkI,EAAU,aAAe,cAA9B,wBACP6R,EAAY,aAAe,IAE7BxZ,MACE2H,EAAO,mCACsBA,GACzB,4BAENtH,QAAS8R,KAAKqC,WAEbmD,GAAexF,KAAKuD,WAAWiC,GAC/BlW,EAAa7D,KAAI,SAACkB,EAAM4C,EAAKgC,GAC5B,OAAOhC,EAAM4X,EAAe,EAAK5D,WAAW5W,EAAM4C,GAAO,SAG7D,kBAAC,EAAD,CACEiT,SAAU,kBACR,kBAAC,GAAD,CACE7R,aAAcC,EACd4E,QAASA,KAGb+M,WAAW,uBACXF,UAAWrC,KAAKrO,MAAMoS,KACtBzB,UAAWtC,KAAKsC,UAChB9R,MAAOlB,EACPkG,QAASA,EACT3H,MACE2H,EAAO,mCACsBA,GACzB,4BAENyI,KAAK,iB,GA5O4BwC,IAAMC,WAA1B0F,GACZ7X,aAAe,CACpB0B,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,KACxB0E,aAAc3E,IAAUC,KACxBT,YAAaQ,IAAUC,KACvBwE,YAAazE,IAAUmS,OACvB/J,KAAMpI,IAAUC,KAChBuB,cAAexB,IAAUC,KACzBmN,YAAapN,IAAUC,M,ICbN6Y,G,kDAKnB,WAAY7a,GAAQ,IAAD,8BACjB,cAAMA,IAIR6V,UAAY,kBAAM,EAAKrT,SAAS,CAAE8U,MAAM,KALrB,EAMnB1B,UAAY,kBAAM,EAAKpT,SAAS,CAAE8U,MAAM,KAJtC,EAAKpS,MAAQ,CAAEoS,MAAM,GAFJ,E,qDAQT,IAAD,EAC0B/D,KAAKtT,QAAQuD,YAAtCmG,EADD,EACCA,UAAW3C,EADZ,EACYA,UADZ,EAEqBuM,KAAKvT,MAAzB+I,EAFD,EAECA,QAAS0R,EAFV,EAEUA,OAFV,EAImB1R,EACtBY,EAAU8Q,GAAQ9W,KAClB4P,KAAKtT,QAAQuD,YAFTyB,EAJD,EAICA,QAAS4E,EAJV,EAIUA,KAIXiR,EACU,cAAd9T,EAA4B,mBAAqB,YAE7C+T,EAA6B,KAJhBlR,GAAQA,EAAK9E,QAIO,SAAW,UAC5CiW,EAAa/V,EAAQF,OAAS,GAAKE,EAAQA,EAAQF,OAAS,GAZ3D,EAaeiW,GAAc,GAA5B7a,EAbD,EAaCA,KAAMC,EAbP,EAaOA,IACRI,EAAQJ,EAAG,aAASA,EAAT,YAAgBD,GAASA,EAE1C,MAAO,CACL,yBAAKU,UAAWkI,EAAU,UAAY,YACpC,yBACE/H,IAAI,SACJC,IAAKC,EAAQ,IACbE,MAAO2H,EAAO,kBAAcA,GAAY,UACxCjI,MAAO,CAAEma,aAAc,QAASpZ,WAAYkZ,KAE7CC,GACC,yBACEha,IAAI,SACJH,UAAU,cACVO,MAAO2H,EAAO,UAAM+R,EAAN,eAAqB/R,GAArB,cAAwC+R,GACtDrZ,QAAS8R,KAAKqC,UACd3U,IAAKC,MAAQ,YAAeV,EAAhB,YAIlB,kBAAC,EAAD,CACEsV,WAAW,2BACXF,UAAWrC,KAAKrO,MAAMoS,KACtBzB,UAAWtC,KAAKsC,UAChB9R,MAAO,YAAIkB,GAASiW,UACpB9Z,MAAO2H,EAAO,UAAM+R,EAAN,eAAqB/R,GAArB,cAAwC+R,U,GApDxB9G,IAAMC,WAAvB4G,GACZ/Y,aAAe,CACpB0B,YAAazB,IAAUmS,Q,MCLZ,SAASiH,GAAWnb,GAAQ,IACjC2D,EAAoB3D,EAApB2D,KAAMyX,EAAcpb,EAAdob,UACd,OAAOzX,EAAK3E,KAAI,SAACgE,EAAMF,GACrB,OAIkBuY,EAJErY,EAAK,GAIAsY,EAJItY,EAAK,GAIF4N,EAJMwK,EAAkB,EAANtY,EAK7C,CACL,yBAAKjC,UAAU,aAAaC,MAAO,CAAE8P,KAAK,GAAD,OAAKA,EAAL,QACvC,yBAAK5P,IAAI,SAASC,IAAKC,MAAQ,YAAWma,OAE5C,yBACExa,UAAU,aACVC,MAAO,CAAEkU,gBAAiB,UAAWpE,KAAK,GAAD,OAAKA,EAAO,EAAZ,QAExC0K,GAAS,IAThB,IAAsBD,EAAOC,EAAO1K,KCKpC,IAAM2K,GAAgB,CAAC,WAAY,cAAe,gBAE7BC,G,kDAYnB,WAAYxb,GAAQ,IAAD,8BACjB,cAAMA,IA+DRwI,cAAgB,SAAC+G,EAAQb,GACvB,EAAKzO,QAAQwG,cACX,SAAChE,GAAe,IACNoH,EAAkBpH,EAAlBoH,KAAM5E,EAAYxC,EAAZwC,QACd,OAAI4E,EAAK9E,OAASwK,EACT,CAAE1F,KAAK,GAAD,mBAAMA,GAAN,YAAesG,EAAQ,YAAIlL,MAAYA,QAAS,IAExD,MAET,kBAAM,EAAKwW,UAAUlM,EAAQb,OAzEd,EA6EnB+M,UAAY,SAAClM,GAA2B,IAAnBb,EAAkB,uDAAb,aAAa,EACA,EAAKzO,QAAQuD,YAA1CqG,EAD6B,EAC7BA,KAAMlD,EADuB,EACvBA,OAAQlD,EADe,EACfA,WAChB8C,EAAI,sBAAOsD,EAAK6R,OAAO,EAAGnM,IAAtB,YAAkC,EAAKrK,MAAMqB,OACvD,EAAK/D,SAAS,CAAE+D,SAAQ,kBAAMmI,EAAGnI,MACjC,EAAKtG,QAAQwG,aAAa,CAAEoD,SAAQ,WAC9BlD,GACFA,EAAOC,MAAM,YAAa,CACxBzG,KAAMsD,EACNE,KAAM,CAAEkG,cArFG,EA0FnB8R,eAAiB,WAAO,IAAD,EACK,EAAK1b,QAAQuD,YAA/BqG,EADa,EACbA,KAAM5E,EADO,EACPA,QACNsB,EAAS,EAAKrB,MAAdqB,KACR,MAAO,CACL5C,KAAM,CACJ,CAAC,WAAYkG,GAAQA,EAAK9E,QAC1B,CAAC,WAAYwB,GAAQA,EAAKxB,QAC1B,CAAC,YAAaE,GAAWA,EAAQF,SAEnCqW,UAAW,KAnGI,EAuGnBQ,cAAgB,WAAO,IAAD,EACiB,EAAK1W,MAC1C,MAAO,CACLvB,KAAM,CACJ,CAAC,eAJe,EACZwE,UAIJ,CAAC,WALe,EACFlG,MAKd,CAAC,eANe,EACIwF,WAOtB2T,UAAW,KA7Gb,EAAKlW,MAAQ,CAAEqB,KAAM,GAAI0K,YAAa,GAAIhP,KAAM,EAAGkG,SAAU,GAF5C,E,8DAKA,IAAD,OAChB,MAAO,CACL3B,YAAa+M,KAAKrO,MAClBwB,aAAc,SAAC/C,EAAM+K,GACnB,EAAKlM,SAASmB,GAAM,WACA,oBAAP+K,GAAmBA,QAGlCvE,KAAMoJ,KAAK/K,iB,0CAIM,IAAD,OAClB+K,KAAKtT,QAAQwG,aAAa,CACxBoV,eAAgB,kBAAM,EAAKJ,UAAU,IACrCK,gBAAiB,SAACnY,GAAD,ObsEhB,SAAsBA,EAAMvB,GACN,IAAD,EAAR,SAAduB,EAAKpD,OACP,EAAAgC,EAAYoB,EAAKzD,OAAMwN,aAAvB,SAAoCtL,GAApC,mBAA8CuB,EAAKiM,UAAY,MaxElCmM,CAAapY,EAAM,IAC9CoN,gBAAiB,kBAAMA,EAAgB,Q,yCAIxBwJ,EAAW9X,GAAY,IAAD,EACT8Q,KAAKrO,MAA3BqB,EAD+B,EAC/BA,KAAM0K,EADyB,EACzBA,YADyB,EAERsC,KAAKtT,QAAQuD,YAApCmD,EAF+B,EAE/BA,OAAQlD,EAFuB,EAEvBA,WAEZkD,IAAWhE,IAAEiC,QAAQ2B,EAAM9D,EAAU8D,OACvCI,EAAOC,MAAM,YAAa,CAAEzG,KAAMsD,EAAYE,KAAM,CAAE4C,UAEpDI,IAAWhE,IAAEiC,QAAQqM,EAAaxO,EAAUwO,cAC9CtK,EAAOC,MAAM,YAAa,CAAEzG,KAAMsD,EAAYE,KAAM,CAAEsN,mB,gDAIhCoC,EAAWC,GACnC,IAAMkH,EAAWjH,KAAKtT,QAAQuD,YAAYwD,UACpCiS,EAAW3F,EAAY9P,YAAYwD,UACzC,GAAIwT,IAAavB,EACf,GAAiB,iBAAbA,GAAgCsC,GAAcnT,SAASoS,IAQpD,GAAiB,iBAAbvB,EAA6B,CACtC,IAAIhI,EAAc,GAClBsC,KAAK/Q,UAAS,SAACC,GAEb,OADAwO,EAAcxO,EAAUwO,YACjB,CAAExJ,SAAU,EAAGxF,KAAM,EAAGgP,YAAa,OAE9CsC,KAAKtT,QAAQwG,cAAa,SAAChE,GACzB,IAAMwC,EAAO,YAAOxC,EAAUwC,SAE9B,OADAA,EAAQ3B,KAAR,MAAA2B,EAAO,YAASgM,IACT,CAAEhM,oBAhBXsO,KAAK/Q,UAAS,SAACC,GAEb,MAAO,CACL0F,UAF6B1F,EAAvB0F,UAEiB,GAAK,EAC5BV,UAH6BhF,EAAbgF,UAGO,GAAK,Q,+BAqE5B,IACAjE,EAAgB+P,KAAKtT,QAArBuD,YAENwD,EAKExD,EALFwD,UACAE,EAIE1D,EAJF0D,YACAzD,EAGED,EAHFC,WACA0P,EAEE3P,EAFF2P,gBACAlM,EACEzD,EADFyD,gBAEI+U,EACwB,oBAApB7I,GAAkCA,KAC1ClM,EACIgV,EAAyB,iBAAdjV,GAAgCE,GAAe8U,EAC1DE,EAAcD,EAAW,aAAe,GACxCE,EAAcF,EAAW/U,EAAc,aAE7C,OACE,yBAAKrG,UAAU,cACb,yBAAKA,UAAU,eACb,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEF,0BACEA,UAAS,uBAAkBqb,GAC3Bza,QAAS,WACP0a,EAAY,QAGb1Y,GAEH,kBAAC0X,GAAe5H,KAAKoI,kBACrB,kBAACR,GAAe5H,KAAKqI,sB,GAhKW5H,IAAMC,WAAzBuH,GACZY,kBAAoB,CACzB5V,YAAazE,IAAUmS,OACvBxN,aAAc3E,IAAUC,KACxBmI,KAAMpI,IAAUC,MAJCwZ,GAOZ1Z,aAAe,CACpB0B,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,M,WCfPwZ,G,kDAMnB,WAAYxb,GAAQ,IAAD,8BACjB,cAAMA,IAIRqc,iBAAmB,WAAO,IAAD,EACD,EAAKpc,QAAQuD,YAA3BmG,UACW,EAAK3J,MAAhBya,QAC0C9W,KAA1CsB,EAHe,EAGfA,QAASsB,EAHM,EAGNA,KAAMsD,EAHA,EAGAA,KACvB,MAAO,CACLyS,SAAU,CACR,CAAC,WAAYzS,EAAOA,EAAK9E,OAAS,GAClC,CAAC,WAAYwB,EAAOA,EAAKxB,OAAS,GAClC,CAAC,YAAaE,GAAWA,EAAQF,SAEnCwX,SAAU,MAbZ,EAAKrX,MAAQ,GAFI,E,qDAmBT,IACAuV,EAAWlH,KAAKvT,MAAhBya,OADD,EAEuClH,KAAKtT,QAAQuD,YAAnDwD,EAFD,EAECA,UAAWE,EAFZ,EAEYA,YAAayC,EAFzB,EAEyBA,UAE1BqS,EACJjR,EAAkBpB,EAAU8Q,GAAQ9W,OACpC4P,KAAKtT,QAAQuD,YAAYyD,gBACrBgV,EAAyB,iBAAdjV,GAAgCE,GAAe8U,EAC1DE,EAAcD,EAAW,aAAe,GACxCE,EAAcF,EAAW/U,EAAc,aATtC,EAWwBqM,KAAK8I,mBAA5BC,EAXD,EAWCA,SAAUC,EAXX,EAWWA,SACZtL,EAActH,EAAU8Q,GAAQ9W,KAAKsN,YACrClI,EAAUY,EAAU8Q,GAAQta,KAElC,OACE,yBAAKW,MAAO,CAAEC,SAAU,aACtB,yBAAKF,UAAS,oBAAe4Z,EAAS,IACpC,kBAAC,GAAD,CAAU1R,QAASA,EAAS0R,OAAQA,IACpC,yBAAK3Z,MAAO,CAAEC,SAAU,aACtB,kBAAC,GAAD,CAAUwW,SAAUtG,EAAalI,QAASA,IAC1C,kBAAC,GAAD,CAAaA,QAASA,EAAS0R,OAAQA,MAG3C,0BACE5Z,UAAS,qBAAgB4Z,EAAS,EAAzB,YAA8ByB,GACvCza,QAAS,WACP0a,EAAYpT,KAGd,0BAAMlI,UAAU,WAAWkI,IAE5BuT,EAAStd,KAAI,SAACgE,EAAMF,GACnB,MAAO,CACL,yBACEjC,UAAU,WACVC,MAAO,CAAE+T,IAAI,GAAD,OAAK0H,EAAiB,EAANzZ,EAAhB,QAEZ,yBACE9B,IAAI,SACJC,IAAKC,MAAQ,YAAsB8B,EAAK,QAG5C,yBACEnC,UAAU,WACVC,MAAO,CACLkU,gBAAiB,OACjBH,IAAI,GAAD,OAAK0H,EAAW,EAAU,EAANzZ,EAApB,QAGJE,EAAK,a,GA3EoBgR,IAAMC,WAAzBuH,GACZ1Z,aAAe,CACpB0B,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,M,ICJPwa,G,kDASnB,WAAYxc,GAAQ,IAAD,8BACjB,cAAMA,IACDkF,MAAQ,CAAEuX,UAAW,MAFT,E,8DAKA,IAAD,OAChB,MAAO,CACLlb,YAAa,SAACkb,GACZ,EAAKja,SAAS,CAAEia,kB,+BAKZ,IAAD,EACoBlJ,KAAKtT,QAAQuD,YAAhCmG,iBADD,MACa,GADb,EAGP,OACE,yBAAK9I,UAAU,YACb,0BAAMC,MAAO,CAAEyT,MAAO,QAAU1T,UAAU,aACxC,kBAAC,EAAD,MACA,kBAACwT,EAAD,CAAWlU,KAAMoT,KAAKrO,MAAMuX,aAE9B,0BAAM3b,MAAO,CAAEyT,MAAO,QAAU1T,UAAU,aACxC,kBAAC,EAAD,MACA,kBAAC,GAAD,OAEF,0BAAMC,MAAO,CAAEyT,MAAO,QAAU1T,UAAU,aACvC8I,EAAU3K,KAAI,SAACoE,EAAKN,GACnB,OAAIA,GAAO,EAAU,KACd,kBAAC,GAAD,CAAU2X,OAAQ3X,a,GAtCCkR,IAAMC,WAAvBuI,GACZ1a,aAAe,CACpB0B,YAAazB,IAAUmS,QAFNsI,GAKZJ,kBAAoB,CACzB7a,YAAaQ,IAAUC,M,OCRZ,SAAS0a,GAAgB1c,EAAOC,GAAU,IAC/C2U,EAAqBD,EAArBC,QAASK,EAAYN,EAAZM,QACT9N,EAAgBlH,EAAQuD,YAAxB2D,YAF8C,EAIpDlH,EAAQuD,YAAYsG,aAAe,GAD7B1I,EAH8C,EAG9CA,MAAOkG,EAHuC,EAGvCA,QAAS0C,EAH8B,EAG9BA,QAASK,EAHqB,EAGrBA,OAAQN,EAHa,EAGbA,SAEzC,OACE,kBAAC,IAAD,CACEqM,OAAQjP,EACRrG,MAAO,CACL8T,UACAK,QAAQ,eAAMA,EAAP,CAAgBa,WAAY,6BAErCQ,aAAa,GAEb,yBAAKzV,UAAU,WACb,yBAAKA,UAAU,YAAYO,GAC3B,yBAAKP,UAAU,aAAayG,GAC5B,yBACEtG,IAAI,SACJC,IAAKC,MAAQ,YAAY6I,GAAY,QAAzB,WAEd,4BAAQxJ,KAAK,SAASO,MAAO,CAAE8P,KAAM,OAASnP,QAASuI,GAAvD,SAGA,4BAAQzJ,KAAK,SAASO,MAAO,CAAE8P,KAAM,OAASnP,QAAS4I,GAAvD,QAQRqS,GAAgB5a,aAAe,CAC7B0B,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,M,OClCX,SAAS0a,GAAgB1c,EAAOC,GAAU,IAC/C2U,EAAqBD,EAArBC,QAASK,EAAYN,EAAZM,QADqC,EAEhBhV,EAAQuD,YAAtCuQ,EAF8C,EAE9CA,iBAAkBgG,EAF4B,EAE5BA,QACpB4C,EAAS,CAAC,UAAW,OAAQ,QAAS,SAE5C,OACE,kBAAC,IAAD,CACEvG,OAAQrC,EACRjT,MAAO,CACL8T,UACAK,QAAQ,eACHA,EADE,CAELa,WAAY,uBACZlF,KAAM,MACN2D,MAAO,UAGX8B,eAAgB,kBAAMpW,EAAQwG,aAAa,CAAEsN,kBAAkB,KAC/DuC,aAAa,GAEb,yBAAKzV,UAAU,gBACb,yBAAKA,UAAU,aAAf,cACCkZ,EAAQ/a,KAAI,SAACgE,EAAMF,GAClB,OACE,yBAAKjC,UAAU,aACb,yBACEC,MAAO,CAAEyT,MAAO,MAAOqI,MAAOD,EAAO7Z,GAAM+Z,SAAU,SAEpD/Z,EAAM,GAET,yBAAKhC,MAAO,CAAEyT,MAAO,QAAUvR,EAAK7C,MACpC,yBAAKW,MAAO,CAAEyT,MAAO,MAAOqI,MAAO,SAAW5Z,EAAKoC,GAAnD,WAIN,4BACE7E,KAAK,SACLkB,QAAS,kBAAMxB,EAAQwG,aAAa,CAAEsN,kBAAkB,MAF1D,QAWR2I,GAAgB5a,aAAe,CAC7B0B,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,MCvDnB,IAAM8a,GAAc,CACzBC,iBAAkB,EAClB,QAAS,GAGEC,GAAiB,CAC5BnT,KAAM,KACNtD,KAAM,KACNtB,QAAS,GACTgM,YAAa,GACbpO,aAAc,GACdsB,mBAAoB,ICCD8Y,G,kDAQnB,WAAYjd,GAAQ,IAAD,8BACjB,cAAMA,IAkDRuD,cAAgB,SAAC+D,GAAa,IACpBX,EAAW,EAAKzB,MAAhByB,OACR,EAAKnE,SAAS,CAAE8E,YACZX,GAAQA,EAAOC,MAAM,YAAaU,IAtDrB,EAyDnB4V,eAAiB,WACf,EAAK1a,UACH,SAACC,GAIC,MAAO,CAAEqF,KAHOrF,EAAUqF,KAAK9I,KAAI,SAACkB,GAClC,OAAO,eAAKA,EAAZ,CAAkBI,SAAUwc,GAAY5c,EAAKC,eAIjD,WACE,EAAKqC,SAAS,CAAEgR,QAAS,EAAG5L,OAAQ,EAAKuV,iBAlE5B,EAuEnBA,WAAa,SAACpZ,GACZ,EAAKvB,SACH,CAAEqH,KAAMsG,EAAQpM,GAAQiD,UAAW,aACnC,EAAK9B,MAAM2W,iBA1EI,EA8EnBuB,KAAO,SAACzW,GACNA,EAAO0W,SAAS,2BAChB,EAAK7a,SAAS,CAAEmE,YAhFC,EAmFnB2W,OAAS,WAAO,IAAD,EAC8B,EAAKpY,MAAxCuO,EADK,EACLA,WAAYhQ,EADP,EACOA,WAAYkD,EADnB,EACmBA,OAC3B8M,IACH8J,QAAQC,IAAI,aACZtM,YAAW,kBAAMvK,EAAOC,MAAM,OAAQnD,KAAa,OAvFpC,EA2FnBga,YAAc,SAACC,EAAWnd,EAAMod,EAASzT,GAAU,IAAD,EACS,EAAKhF,MAAtDyB,EADwC,EACxCA,OAAQmB,EADgC,EAChCA,KAAM5D,EAD0B,EAC1BA,aAAc2F,EADY,EACZA,KAAMpG,EADM,EACNA,WAC1C,OAAQlD,GACN,IAAK,OACC,EAAK2E,MAAMuO,aACZ9M,GAAU+W,GAAWzT,QAAQC,EAAM,aAAc,CAChDpC,OACA5D,iBAGJ,EAAK0Z,OAAO1T,EAAMyT,IACjBhX,GAAU+W,GAAWzT,QAAQC,EAAM,SAAUzG,GAC9C,MACF,IAAK,SACH,EAAKma,OAAO1T,EAAMyT,GAClB,MACF,IAAK,YACH,EAAKnb,SAAS,CACZsO,SAAS,YAAD,OAAc6M,EAAQ,IAC9BhT,QAAS,EACTF,UAAWkT,EACX3W,UAAW2W,EAAQ,KAAOla,EAAa,aAAe,iBAExD,MACF,IAAK,aACH,EAAKjB,SACH,CAAEsF,KAAM6V,EAAQ7V,KAAM5D,aAAcyZ,EAAQzZ,eAC5C,WACO2F,GAAM,EAAKqT,oBAGpB,MACF,IAAK,YACH,EAAK1a,UAAS,SAACC,GACb,IAAMob,EAAUpb,EAAUkH,UAAUmU,QAC9BrD,EAAShY,EAAUkH,UAAU5G,WACjC,SAAC2G,GAAD,OAASA,EAAIvJ,OAASwd,EAAQxd,QAKhC,OAHAR,OAAOD,KAAKie,EAAQha,MAAM8B,SAAQ,SAACsY,GACjCF,EAAQpD,GAAQ9W,KAAKoa,GAAOJ,EAAQha,KAAKoa,MAEpC,CAAEpU,UAAWkU,MAEtB,MACF,IAAK,YACH,EAAKrb,SAAS,CAAE8E,QAASqW,IACzB,MACF,IAAK,WAAL,MACiC,EAAKzY,MAA5ByF,EADV,EACUA,QAASF,EADnB,EACmBA,UACXoG,EAAUpG,GAAWE,EAAU,GAAKF,EAAU1F,QACpD,EAAKvC,SACH,CACEsO,SAAS,YAAD,OAAcD,GACtBlG,QAASA,EAAU,EACnB3D,UAAW6J,IAAYpN,EAAa,aAAe,gBAErD,EAAKyB,MAAM6L,iBAEb,MACF,IAAK,YACH,EAAK7L,MAAMoV,UAAUqD,GAAS,GAC9B,MACF,IAAK,aACH,EAAKzY,MAAMoV,UAAUqD,GAAS,GAC9B,MACF,IAAK,aACH,EAAKzY,MAAM4W,gBAAgB6B,GAC3B,MACF,IAAK,UACH,EAAKnb,UAAS,SAACC,GACb,MAAO,CACLsX,QAAS,sBAAItX,EAAUsX,SAAd,CAAuB4D,IAASK,MAAK,SAACjY,EAAGC,GAAJ,OAC5CD,EAAEX,GAAKY,EAAEZ,IAAM,EAAI,WAnKZ,EA6KnBwY,OAAS,SAAC1T,EAAM/J,GACd,EAAKqC,UAAS,SAACC,GACb,IAAMkH,EAAYhH,IAAEC,UAAUH,EAAUkH,WAExC,OADAA,EAAUrG,KAAK,CAAE4G,OAAM/J,OAAMwD,KAAMqZ,KAC5B,CAAErT,iBA/KX,EAAKzE,MAAQ,CACXD,QAAS,GACT0L,gBAAiB,GACjB8C,WAAYzT,EAAMyT,WAClBhQ,WAAYzD,EAAMyD,WAClBkG,UAAW,GACXrC,QAAS,GACTwJ,SAAU,2BACV3J,aAAa,EACb4M,kBAAkB,EAClBgG,QAAS,IAZM,E,8DAgBA,IAAD,OAChB,MAAO,CACLvW,YAAa+P,KAAKrO,MAClBuB,aAAc,SAAC9C,EAAM+K,GACnB,EAAKlM,SAASmB,GAAM,WACA,oBAAP+K,GAAmBA,QAGlCS,YAAa,SAACjP,EAAMI,GAAP,OnBSZ,SAAqB8B,EAAMlC,EAAMI,GACtC8B,EAAKI,UAAS,SAACC,GACb,IAAIkB,EAAO,CACTgN,gBAAgB,YAAKlO,EAAUkO,kBAEG,IAAhChN,EAAKgN,gBAAgB5L,SACvBpB,EAAI,eAAQA,EAAR,GAAiB6M,EAAcpO,EAAMlC,KAE3C,IAAK,IAAImD,EAAI,EAAGA,EAAI/C,EAAU+C,IAC5BM,EAAKgN,gBAAgBrN,KAAKpD,GAE5B,OAAOyD,KmBpB4BwL,CAAY,EAAMjP,EAAMI,IACzDiD,cAAegQ,KAAKhQ,iB,0CAKlBgQ,KAAKrO,MAAMuO,YACbF,KAAK/Q,SC9CJ,WACL,IAAMyb,EAAmB9N,EAAQjM,GASjC,MAAO,CACL4D,KATQ,sBACL7F,GADK,YAELkL,GAFK,YAGLgD,EAAQ3C,GAAWrK,QAAO,SAACH,EAAMF,GAAP,OAAeA,EAAM,OAH1C,CAIR,CAAE3C,KAAM,WAAYE,SAAU,GAC9B4d,EAAiB,GACjBA,EAAiB,KAIjB/Z,aAAc+Z,EAAiB9a,QAAO,SAACH,EAAMF,GAAP,OAAeA,GAAO,MDkC5Cob,GAAgB3K,KAAK2J,kB,yCAIpB3C,EAAW9X,GAAY,IAAD,EACO8Q,KAAKrO,MAA3C2E,EAD+B,EAC/BA,KAAM5E,EADyB,EACzBA,QAAS0B,EADgB,EAChBA,OAAQlD,EADQ,EACRA,WAC3BkD,IAAWhE,IAAEiC,QAAQK,EAASxC,EAAUwC,UAC1C0B,EAAOC,MAAM,YAAa,CACxBzG,KAAMsD,EACNE,KAAM,CAAEkG,UAGRlD,IAAWhE,IAAEiC,QAAQK,EAASxC,EAAUwC,UAC1C0B,EAAOC,MAAM,YAAa,CACxBzG,KAAMsD,EACNE,KAAM,CAAEsB,e,+BAwIZ,OACE,kBAAC,IAAD,CACEkZ,QAAS,CAAEC,OAAO,EAAOC,UAAU,GACnCC,QAAS/K,KAAK6J,KACdmB,mBAAoBhL,KAAKkK,YACzBe,aAAcjL,KAAK+J,QAEnB,kBAAC,GAAD,MACA,kBAACZ,GAAD,MACA,kBAAC,GAAD,W,GAvMmC1I,IAAMC,WAA5BgJ,GACZb,kBAAoB,CACzB5Y,YAAazB,IAAUmS,OACvBzN,aAAc1E,IAAUC,KACxBmN,YAAapN,IAAUC,KACvBuB,cAAexB,IAAUC,M,IEZRyc,G,kDACnB,WAAYze,GAAQ,IAAD,8BACjB,cAAMA,IAIR0e,YAAc,WACZ,OACE,yBAAK7d,UAAU,sBACb,yBAAKA,UAAU,cACb,4BACEN,KAAK,SACLO,MAAO,CAAE+T,IAAK,QACdpT,QAAS,WACP,EAAKe,SAAS,CAAEiR,YAAY,MAJhC,iBASA,4BACElT,KAAK,SACLO,MAAO,CAAE+T,IAAK,QACdpT,QAAS,WACP,EAAKe,SAAS,CAAEiR,YAAY,MAJhC,aAlBW,EAgCnBkL,YAAc,WACZ,OACE,yBAAK9d,UAAU,sBACb,yBAAKA,UAAU,YACb,yBAAKA,UAAU,SAAf,qBACA,2BACEN,KAAK,OACL+a,MAAO,EAAKpW,MAAMzB,WAClBmb,SAAU,SAACrf,GACT,EAAKiD,SAAS,CAAEiB,WAAYlE,EAAEsf,OAAOvD,WAGzC,4BACE/a,KAAK,SACLkB,QAAS,WACH,EAAKyD,MAAMzB,WAAWsB,OAAS,GACjC,EAAKvC,SAAS,CAAEsc,OAAO,MAJ7B,aA1CN,EAAK5Z,MAAQ,CAAEzB,WAAY,IAFV,E,qDA0DT,IAAD,EACmC8P,KAAKrO,MAAvCzB,EADD,EACCA,WAAYgQ,EADb,EACaA,WAAYqL,EADzB,EACyBA,MAChC,MAA0B,qBAAfrL,EAAwCF,KAAKmL,cACnDI,EACE,kBAAC,GAAD,CAAerb,WAAYA,EAAYgQ,WAAYA,IADvCF,KAAKoL,kB,GA9DK3K,IAAMC,WCOnB8K,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFC,SAASC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLzC,QAAQyC,MAAMA,EAAM1Y,c","file":"static/js/main.14b9da40.chunk.js","sourcesContent":["var map = {\n\t\"./1Love.jpg\": 132,\n\t\"./2Love.jpg\": 133,\n\t\"./3Love.jpg\": 134,\n\t\"./cardback.jpg\": 45,\n\t\"./set1/AmberTwilight.jpg\": 135,\n\t\"./set1/AniseGreenaway.jpg\": 136,\n\t\"./set1/AzureCrescent.jpg\": 137,\n\t\"./set1/BadHabit.jpg\": 138,\n\t\"./set1/ClaireSaintJuste.jpg\": 139,\n\t\"./set1/ColetteFramboise.jpg\": 140,\n\t\"./set1/ElizaRosewater.jpg\": 141,\n\t\"./set1/EsquineForet.jpg\": 142,\n\t\"./set1/EugenieFontaine.jpg\": 143,\n\t\"./set1/FayLongfang.jpg\": 144,\n\t\"./set1/GenevieveDaubigny.jpg\": 145,\n\t\"./set1/Illness.jpg\": 146,\n\t\"./set1/KagariIchinomiya.jpg\": 147,\n\t\"./set1/LalandeDreyfus.jpg\": 148,\n\t\"./set1/LucienneDeMarlboro.jpg\": 149,\n\t\"./set1/MarianneSoleil.jpg\": 150,\n\t\"./set1/MillyViolet.jpg\": 151,\n\t\"./set1/MoineDeLefevre.jpg\": 152,\n\t\"./set1/NatsumiFujikawa.jpg\": 153,\n\t\"./set1/NenaWilder.jpg\": 154,\n\t\"./set1/NordTwilight.jpg\": 155,\n\t\"./set1/OpheliaGrail.jpg\": 156,\n\t\"./set1/RosaTopaz.jpg\": 157,\n\t\"./set1/RougeCrescent.jpg\": 158,\n\t\"./set1/SafranVirginie.jpg\": 159,\n\t\"./set1/SainsburyLockwood.jpg\": 160,\n\t\"./set1/SoraNakachi.jpg\": 161,\n\t\"./set1/TanyaPetrushka.jpg\": 162,\n\t\"./set1/TenalysTrent.jpg\": 163,\n\t\"./set1/ViolaCrescent.jpg\": 164\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 11;","module.exports = __webpack_public_path__ + \"static/media/cardback.7a704a7f.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAeCAYAAAA2Lt7lAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH5AQNDwAqlgwDwgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNC0xM1QxNTowMDo0Mi0wNDowMIFULV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDQtMTNUMTU6MDA6NDItMDQ6MDDwCZXhAAADoklEQVRIS82WXUiTURjH/3s3dVNxluUna8YYaeY+NAqhDwpKUbtIoyzaTeCsQIIuoojowkD0pqtuCoLuCusmjJlFmUqmlZUpSswkv+dHllrazJ2e8+5dzbHJpl70g2e85znvOf9z3vOcZ48MjDEEwSaysqYmNFdWYnx0FPuPHsVIeTkaoqIgUN842U/+og/LCqjJzAsLiPv1C/rJSTyhSWPWrcOzujqkpqbioMWCRbUazOVCfGEharZuxWf30L8EFNhIZu3sRE9VFUbtdsgVCgwNDsLe1yf2nzx7FjW3bsGclYUFpxPh1G+6exc3dTq4xDfc8N35ZffsLNovXsTwwACaW1owOTcHQSaTegElrdxoNOJVayvevnuHH9TPnj9HKvVFkXkm9ivAp0keGcGXnh68bGgQfZ1v3iBMLhefOXzjGxISpBZNmpSEqcZGFNMurDYbDs/MQEX+gAKqxUXIfL6eXAi4YThJ/OG9e3haUYGHZWVQXbmC/Pn5wJ8oqNDyYpEWtGPvXrR3dcHe34/XtbV4oFQGFggVvusX9fXuBhFBh85ZU4ElSAGxZgKB+L8EQj14jigQTsZzTRpdeX5RIrjTD8qwMOkJUNAh8tvrIVDGkSmo59TUFBS3b6ObbqV22zYkl5ZCPT2NO/n56OrtlV4NDWN6Ojq6uyFk0qpnq6vx5MYNJMXE4H1NDTpPn4ZpbAyuZS5W0JxwOJjZbKZ9/CPTYGAFBQVMp9VKntAxpKUx/t0EZ3g4lJGRkpybjg8f0EYJbmJiQvKsHOFjbCwMR47AQLncmzHK/yqvQ10pwif6UZSUIDI62u3xYoQOf7UIPLjqExOxhzJghl7v9q4hYpjYyQaLihCr0aCYQnQtEQX4Lurov9Z47hw6vDLianBR+HP+Bjr/2sO5uTDt2oVcumCrReYvmzbRH0T6+fPo/8SPfuVYL1zAhk08+fgIfCWzZWdjv9WKNKoOVkrbo0fIOHRIfF4iwGkn+04RpaNyJCcnx+0MgUIKEhWFvLO4WPLQdfa1SLKrfX3swL59LGfnTmoFx6kzZ5h+82Z26fFjlkJtcT7fyT2mIbtGIscsFqbTaFheURF5/GO5fJkZMjPZdpOJXbfZGF+SZ55lS8cYsgNUUCVQQTVw/z6GKEfNUxr3jOeRIlDGVScnY0teHsKOH0eLVouP7uEiQRW/vEZNp7JEQ/kpzuGAnFLIeqp55iMi8C0+Ho6UFPRQqud16W9xhAfgD87i9a2OcMd+AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAeCAIAAACwp+nIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARpSURBVEhL7VXLbhxFFK1n9zxtj8ev2IntJA4JeZkVi0jAErFCrNjAF/BHrPkBJARLYAEKEKEkPEIeNgn2hDhjezwPT09PVd3LabvRyFYiJGR2nMX0TPWtU/eec2+NFMzipKHy54nif9KTxwvc/7XZ7w29JC7F5spMOV89iltbvcQ5o1Q1Llytx/nq3zhCenO99XBr9/l+2h048qFWiV85NbVUr16dK+URQnzxcHf9z52d/V6aDAqRGS9Xl+Zq7746m78+wIj0swcb399vPNnpJiryJjbSRDysKnd+euLK+YV3lqcQ8/GPG3d/f9rqDx2zUVoF1iKMl6KLC9Mf3Vg55AFy0i+fPP/89r3NXuJVxduyI6OVMiHVrlcUycrC3JXLK7ud/e/uPGqlgnUcSEiEBDZaaEqqlLyxsvTB6zlvbtTas+2n/TQUa30VpUGA0AdOSISomJjK/e32N/caP/3R2nMsTIHIBmlSqbtCdYLsy7gt9INnzUMqICO9ubmz2UQGNmUtSeB84YNltkp7kimpjlOPm63NZjuIOHhmIkaq5FUknNGpNmSrjW7vk1trI9J+6rqpE7pArDxIZVCUshsqCkKYILVnk3rtpCGWgNFsNQsKBCCahJdyKE3H0YjUC3Y+eBwvlYwUCU4pDQZUHHCK0sEYr1CyGkp2ioMIxA4WScZLaKW8QwE6odzzXNMQApP03gctveVgKVVhIFGhyPaxQv7Z2VlGnGqU4LQMmkl7LLNBNkguqyxDRhopXdRGBC8FSYdSpC0UcT5eaWmwaGA4CVSs0C0SsmOfRICSEuJmb7U2zJHMU8weZRvVytWCEBUdRQrpwSg0iibYRMEEVqyQlGFsgoaShWUdIX1JUpMysNcPEV0v6xFp1Rbn6pOYOWhk0HmefOqUsFrFko1A+nBCwHIPPrAoFEBZq0Axoyy2SecmK8W5seqI9NJsfHq2VitHnCYKTahjw7HAyLCBaaBEFEvohboVNGD8ICxFUkI1BPlSrC4szM5PjI1IgbfPTV5bmqkqtLWLtEKRQ4X09BCdIy2hZAxeZi5BEWKGnyIy0hrYWfTJYjW+PF+7Wi8esuWkwLX5yYtTYwUeMKfoahjuIb7S8C3zBNbgy4EIpNFqWcMY9jENpqPw2uLUm2cmc6Jjt9S3jb2v76w92N0ZxGN9oQbBWGWNkJgCOEZSoX3QZ2ytZWndoMxuJhI3Lsy/v7qcUxzg+H361Vrzh0dP1nY7HTKkcVFGWISILuBDkVEehQsRi2ExTU5VzOrZUx9eXzzYOsJxUuBmo317bWN9a6eZhD7ctwUyFgMKCUij2b3wwwnpz43H15fPvHf5yE16iBeQHuLTn9fvPt7e2Ot3pXG4MozB2JAbWqJaKb40M7a6OP3W6Yk8+iheSvq4NWh0+79t7T1q7m119/vDtGijerk0P1Y5O1c/N1VdrWNcXoyXkh7il7ZvtPc3t1vtTq8Y2eWZmYXx0rXp439Kx/APpP8Ooz49QfwHpEL8BRCsX0JV74i5AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQcSURBVEhLtZVbbxtFFIDnzMzO7tqx15c4jqMmilvRgFohaAVSkUA8IOCF/8DPRAgJKQ9cChUVClUJtIU2cW6OHdtr7+7cDuNmJRLIxRH0e7Cl3TOfZs6ccxYIInk10Pz/FfA/7/rh006q1SQeapX9V/XPzw6OhiNJdGa1tEoDMoNUmnKxeGX1gxdbcSKTJFFSa0WtRc459XmCMkPFOPBEl73g07u3r6Be/+m3iUkSYoF7lvAsywJeBACjbKZSEAQFAZU1wtJHt2+6+FnV3z/qHBzta0qMR50XiTs3Y8jTVBd9HoRe4LNCKO4t1/IFM6ofPh92u91EjgmlyGkqkXCfi2KpUCrNBRyhJMha/Z/FNlPxbR8dHGWpNERKbaXLAatUatVm88/D/pfr97/+9ofeoJeHnuBy9frznb5OMmFZIKgQFqwmEFu7ub11//dHT8eHL9LBrpZ59AkuV4/GCQK1lCtAA2iBIoVUpeVqZb5Ry2QyHg201nn0CS7J9frmH51BjJ67fg7WUDuNtkCA+6VqdTCOKUAlDEqctObC65UgX/aSi9Qbu/0n2zuJM7HQRQG6H+PMSChwEpXKvgiNnIBSOElBZ0uN+q32Yr744oR0uyOGQoBPppl4uQOKCJaAJtb097sHO53Dg/3hYV/KkdGSU/ZyXc656h+fdON4rAwYY4jrX0SLmloDgNN9oxEeBJQXKGNWU4OlYkDsqcs8OyEb3Xhra3/ijukaD5mloJwegBA93TUhDKezImReFBYFtwHn5WJhdbFyvPyYU+ovNp519vZqC/PV6vxoMNSJQmuNE3vc7dpQba2202ygQIwK4WLUeHP5lO4kufqrze7m7k5/PHYjEYi92V5eWWr1O3vJMPa9grs3d5eWKE0koPbAMuCrzcW3rzWOLWcC9590f93e3xuNJwCKMyo8YrVORtfq9bXVlXQ4nBwOXV+7WiYuo0QR1IKiS/HK4tIbrb8nxr9hdz74pB8nrnJBBBlipqfZpMDcOE8naavZCoJwkmRolODAKKFKc4KV4tyd9lLuOAf47vHu7mD8vNs9zDL0A8Io9wN3aiu1T2gjilZaDZ9if78ndTIdfFY3apV7a6u54HzyXD942tvu9/Z6g8SiBJYqM7031+BIl+qV19tNqtN+76josQ9vXS495lSF/LI7HEsyUHqvF3d6g9RMe9rTyUK5cH25tVyPbkY8D52Bs+v6m63hg8cvBq5hRAh67Jk48tlbr914d2Uhj5iBs7sxEBBOvyZKqjjTCTLq+SGYU318KWer7yyUarU5n2ok0n1UXR/OV6J32vX89WycO0PmClyACYgRqBuh+Ox2O38xM+eqP77RakUVkWWRzT5//27+9Cqcq3asLDQi3yueHpWzc5H6vXajWa40q1dLcQ4hfwHMETZQJP9CvwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACf1BMVEUA//8B//8F7+8B4OAA398A398A398E6ekC//8C/PwKpqYJOTkAGxsAGhoAGxsAGxsGLCwOiooE9fULvLwFEhILCAguLCwyMDAyMDAwLi4SDw8EBwcNnp4B//8A//8I5eUPu7sPu7sPu7sQu7sPU1MAAABDQ0OgoKCkpKSkpKSjo6NZWVkAAAAMPDwRuLgPu7sPu7sPu7sK3NwA//8A//8InJwGAwMFBQUFCAgFCAgCAgIAAAAFBQUICAgHBwcHBwcHBwcGBgYBAQEFBwcFCAgFBwcFAwMLe3sB//8A//8IwMAIW1sMOjoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCAgMHR0JV1cKqakA//8B//8C/v4Pl5cEAgICAgICAgICAgILPj4G8/MB//8A//8OlpYCAAAJPT0E9PQA//8OlpYCAABGRkYzMzMBAQFTU1MiIiIHBwdYWFgTExMSEhJZWVkKCgoJPT0E9PQCAACTk5Nra2sBAQGtra1GRkYPDw+3t7cnJycmJia7u7sVFRWRkZFqamoBAQGrq6tFRUUPDw+1tbUmJiYmJia4uLgVFRWRkZFqamoOlpYCAACUlJRsbGwBAQGurq5GRkYPDw+4uLgnJycmJia7u7sVFRUJPT0E9PQA//8OlpYCAABRUVE7OzsBAQFgYGAnJycICAhmZmYWFhYVFRVoaGgLCwsJPDwE9PQA//8NsrIFCgoBAAAAAAABAAABAAABAAABAAABAAABAAACAAANXV0D+voD9vYNq6sQiIgQiIgQiIgQiIgQiIgQiIgQiIgQiIgQiIgPkpIH398A//8A//8B//8B//8B//8B//////8LKaYKAAAAAWJLR0TUCbsLhQAAAAlwSFlzAAAOwgAADsIBFShKgAAAAAd0SU1FB+QEDQ8KGko62+QAAAEmSURBVCjPY2CgE2BkYmZhZWPnwC7LycXNw8vHLyAohFVaWERUTFxCUkpaRhZVQk5eQVFJWUVVTV1DU0tbR1dP38DQyBgubWJqZm5haWVtY2tn7+Bo7eTs4urm7gGX9vTy9vH18w8IDAoODgoJCA0Lj4iMikaYHhMbF5+QmAAHSckpqci2p6VnWCODzCwUx2Xn5Frn5RcUFhWXlJaVV1hXVqFJV1vX1NbVNzQ2Nbe0tmGTbu/o7Oru6e3rnzARm/SkySNQespU62nTZ8ycNXvO3HnzF1gvXIQivXjJUutly1esXLV6zdp16zdYb9yEIr15y9Zt1tt3WO/cZb17j/XeffsPoKang4cOHzl67PjREydPnDh1+szZc2gJ8fyFi3Bw6TIDPQAAT762M8B9n2MAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDQtMTNUMTU6MTA6MjYtMDQ6MDBy+t8JAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA0LTEzVDE1OjEwOjI2LTA0OjAwA6dntQAAAABJRU5ErkJggg==\"","var map = {\n\t\"./contract.png\": 46,\n\t\"./deck.png\": 47,\n\t\"./hand.png\": 48,\n\t\"./love.png\": 49,\n\t\"./servings.png\": 50,\n\t\"./trash.png\": 51\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 56;","module.exports = __webpack_public_path__ + \"static/media/1Love.db0e25e8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2Love.ca010494.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3Love.a0cd1c8c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AmberTwilight.0fa84819.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AniseGreenaway.a6408b39.jpg\";","module.exports = __webpack_public_path__ + \"static/media/AzureCrescent.29609aa1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/BadHabit.3d2ef91d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ClaireSaintJuste.8b728681.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ColetteFramboise.fa4e6730.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ElizaRosewater.bec1b095.jpg\";","module.exports = __webpack_public_path__ + \"static/media/EsquineForet.33dae02e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/EugenieFontaine.619c0a75.jpg\";","module.exports = __webpack_public_path__ + \"static/media/FayLongfang.75d2ba96.jpg\";","module.exports = __webpack_public_path__ + \"static/media/GenevieveDaubigny.33fbde6a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Illness.99e5fb4b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/KagariIchinomiya.434d1e7c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/LalandeDreyfus.72569947.jpg\";","module.exports = __webpack_public_path__ + \"static/media/LucienneDeMarlboro.a76caafe.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MarianneSoleil.df3e7a79.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MillyViolet.8c0587a5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MoineDeLefevre.9df9873e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NatsumiFujikawa.02aaa1c7.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NenaWilder.0431c421.jpg\";","module.exports = __webpack_public_path__ + \"static/media/NordTwilight.4b0c4613.jpg\";","module.exports = __webpack_public_path__ + \"static/media/OpheliaGrail.e1e4d0e6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/RosaTopaz.907abd95.jpg\";","module.exports = __webpack_public_path__ + \"static/media/RougeCrescent.96984c87.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SafranVirginie.7a164140.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SainsburyLockwood.44beb43c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/SoraNakachi.c7aeb118.jpg\";","module.exports = __webpack_public_path__ + \"static/media/TanyaPetrushka.de1694ea.jpg\";","module.exports = __webpack_public_path__ + \"static/media/TenalysTrent.143c78f9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ViolaCrescent.fbce74e2.jpg\";","var map = {\n\t\"./contract.png\": 46,\n\t\"./deck.png\": 47,\n\t\"./hand.png\": 48,\n\t\"./love.png\": 49,\n\t\"./servings.png\": 50,\n\t\"./trash.png\": 51\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 166;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function CardBlock(props, context) {\r\n  const { name, set, quantity, selected, type } = props.card;\r\n  const route = set ? `set${set}/${name}` : name;\r\n  const buyable = props.selectable;\r\n  const cardClick = buyable\r\n    ? () => {\r\n        props.selectCard(props.card);\r\n      }\r\n    : () => {};\r\n\r\n  return (\r\n    <span className={selected > 0 ? 'card-block selected' : 'card-block'}>\r\n      <div style={{ position: 'relative' }}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${route}.jpg`)}\r\n          className={quantity === 0 ? 'soldOut' : ''}\r\n          style={buyable && !(selected > 0) ? {} : { cursor: 'auto' }}\r\n          title={name === 'cardback' ? 'Maids Particulares' : undefined}\r\n          onMouseOver={() => {\r\n            context.updateImage(route);\r\n          }}\r\n          onMouseOut={() => {\r\n            context.updateImage(null);\r\n          }}\r\n          onClick={cardClick}\r\n        />\r\n\r\n        {selected > 0 && (\r\n          <div className=\"cardSelector\">\r\n            <button\r\n              type=\"button\"\r\n              style={{\r\n                borderRight: '1px solid black',\r\n              }}\r\n              onClick={() => {\r\n                props.selectCard(props.card, 'minus');\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n            <span>{selected}</span>\r\n            <button\r\n              type=\"button\"\r\n              disabled={\r\n                type === 'privateMaid' || quantity === selected || !buyable\r\n              }\r\n              style={{\r\n                borderLeft: '1px solid black',\r\n              }}\r\n              onClick={() => {\r\n                props.selectCard(props.card, 'plus');\r\n              }}\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {type === 'privateMaid' ? (\r\n        <h3 style={{ visibility: 'hidden' }}>1</h3>\r\n      ) : (\r\n        <h3>{quantity}</h3>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\nCardBlock.contextTypes = {\r\n  updateImage: PropTypes.func,\r\n};\r\n","export const love = [\r\n  { name: '1Love', type: 'love', cost: 1, love: 1, quantity: 36 },\r\n  { name: '2Love', type: 'love', cost: 4, love: 2, quantity: 12 },\r\n  { name: '3Love', type: 'love', cost: 7, love: 3, quantity: 8 },\r\n];\r\n","import _ from 'lodash';\r\nimport { getTrueData } from '../../../helpers/actions';\r\n\r\nexport function getChamberMaid(inst, mehCard, add = 1) {\r\n  const card = getTrueData(mehCard);\r\n  inst.setState((prevState) => {\r\n    let newMaids = _.cloneDeep(prevState.chamberMaids);\r\n    const idx = newMaids.findIndex((item) => {\r\n      const hasAttachments = item.attachments && item.attachments[0];\r\n      return !hasAttachments && item.name === card.name;\r\n    });\r\n    if (idx >= 0) {\r\n      newMaids[idx].chambered = newMaids[idx].chambered + add;\r\n      if (newMaids[idx].chambered <= 0) {\r\n        newMaids = newMaids.filter((foo, i) => i !== idx);\r\n      }\r\n    } else {\r\n      newMaids.push({ ...card, chambered: 1 });\r\n    }\r\n    return { chamberMaids: newMaids };\r\n  });\r\n  if (card.type !== 'event') {\r\n    const { updateMessage, parentState } = inst.context;\r\n    updateMessage(\r\n      `${parentState.playerName} pone 1 ${card.name} como Doncella.`\r\n    );\r\n  }\r\n}\r\n\r\nexport function getAttachment(inst, data) {\r\n  const { maidIdx, isPrivate, remove } = data;\r\n  let cards = data.card;\r\n  if (!Array.isArray(cards)) cards = [data.card];\r\n  if (!remove) cards = cards.map(getTrueData);\r\n  if (isPrivate) {\r\n    inst.setState((prevState) => {\r\n      const privateMaids = _.cloneDeep(prevState.boughtPrivateMaids);\r\n      const attachments = privateMaids[0] && privateMaids[0].attachments;\r\n      privateMaids[0].attachments = addOrRemove(attachments, cards, remove);\r\n      return { boughtPrivateMaids: privateMaids };\r\n    });\r\n    return;\r\n  }\r\n  inst.setState((prevState) => {\r\n    let newMaids = _.cloneDeep(prevState.chamberMaids);\r\n    const maid = newMaids[maidIdx];\r\n    const attachments = addOrRemove(maid.attachments, cards, remove);\r\n    // Quitar maid con antiguos attachments\r\n    if (maid.chambered > 1) {\r\n      newMaids[maidIdx].chambered -= 1;\r\n    } else {\r\n      newMaids = newMaids.filter((foo, idx) => idx !== maidIdx);\r\n    }\r\n    // Meter maid con nuevos attachments\r\n    const newIdx = newMaids.findIndex((item) => {\r\n      const same = hasSameAttachments(item.attachments, attachments);\r\n      return item.name === maid.name && same;\r\n    });\r\n    if (newIdx >= 0) {\r\n      newMaids[newIdx].chambered += 1;\r\n    } else {\r\n      newMaids.push({ ...maid, chambered: 1, attachments });\r\n    }\r\n    return { chamberMaids: newMaids };\r\n  });\r\n}\r\n\r\nfunction addOrRemove(list, cards, remove) {\r\n  if (remove) {\r\n    return (list || []).filter((foo, idx) => idx < list.length - 1);\r\n  }\r\n  return [...(list || []), ...cards];\r\n}\r\n\r\nfunction hasSameAttachments(list1, list2) {\r\n  const namelist1 = (list1 || []).map((item) => item.name);\r\n  const namelist2 = (list2 || []).map((item) => item.name);\r\n  return _.isEqual(namelist1, namelist2);\r\n}\r\n\r\nexport function handSelect(inst, idx) {\r\n  const limit = inst.state.selectionOn;\r\n  inst.setState((prevState) => {\r\n    let selection = [...prevState.handSelection];\r\n    if (selection.find((item) => item === idx) >= 0) {\r\n      selection = selection.filter((item) => item !== idx);\r\n    } else if (selection.length < limit) selection.push(idx);\r\n    return { handSelection: selection };\r\n  });\r\n}\r\n\r\nexport function getVP(inst) {\r\n  const { discard } = inst.context.parentState;\r\n  const { boughtPrivateMaids, chamberMaids } = inst.state;\r\n  const hasPoints = (maid) => maid.vp && !inst.hasIllness(maid);\r\n  const chamberCards = chamberMaids.filter(hasPoints);\r\n  const privateMaids = boughtPrivateMaids.filter(hasPoints);\r\n  const pointMaids = parseDiscard(discard);\r\n\r\n  chamberCards.forEach((maid) => {\r\n    const { name, chambered, vp } = maid;\r\n    if (pointMaids[name]) {\r\n      pointMaids[name].chambered = chambered;\r\n    } else pointMaids[name] = { chambered, inDeck: 0, vp };\r\n  });\r\n  return getPrivatePoints(privateMaids) + getMaidPoints(inst, pointMaids);\r\n}\r\n\r\nfunction parseDiscard(list) {\r\n  const result = {};\r\n  list.forEach((card) => {\r\n    const { name, vp } = card;\r\n    if (vp) {\r\n      if (result[name]) {\r\n        result[name].inDeck += 1;\r\n      } else {\r\n        result[name] = { inDeck: 1, chambered: 0, vp };\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nfunction getPrivatePoints(maids) {\r\n  const points = maids.map((card) => card.vp);\r\n  return [0, ...points].reduce((a, b) => a + b);\r\n}\r\n\r\nfunction getMaidPoints(inst, maids) {\r\n  const points = Object.keys(maids).map((name) => {\r\n    const { vp, chambered, inDeck } = maids[name];\r\n    return vp(chambered, inDeck, inst, maids);\r\n  });\r\n  return [0, ...points].reduce((a, b) => a + b);\r\n}\r\n","import _ from 'lodash';\r\nimport {\r\n  getAttachment,\r\n  getChamberMaid,\r\n} from '../playerArea/playerZones/helpers/dataUpdates';\r\nimport { checkChamberMaids } from '../helpers/actions';\r\n\r\nfunction Sainsbury(inst) {\r\n  const { hand } = inst.context.playerState;\r\n  const loveIdx = hand.findIndex((card) => card.name === '1Love');\r\n  if (loveIdx < 0) return;\r\n\r\n  inst.setState({ message: 'Elige una maid o 2Love', button2Text: null });\r\n  inst.context.updateParent({\r\n    gameState: 'cityPick',\r\n    money: {\r\n      love: 4,\r\n      contract: 1,\r\n    },\r\n    restrType: ['maidChief', 'event', 'privateMaid'],\r\n    restrName: ['1Love', '3Love'],\r\n    sendTo: (cards) => sendToHand(inst, cards),\r\n  });\r\n}\r\n\r\nfunction sendToHand(inst, cards) {\r\n  if (!cards[0]) return;\r\n  inst.context.updatePlayer((prevState) => {\r\n    const hand = [...prevState.hand];\r\n    hand.push(...cards);\r\n    const loveIdx = hand.findIndex((card) => card.name === '1Love');\r\n    return { hand: hand.filter((foo, idx) => idx !== loveIdx) };\r\n  });\r\n  inst.context.updateParent((prevState) => {\r\n    const city = _.cloneDeep(prevState.city);\r\n    const idx = city.findIndex((item) => item.name === '1Love');\r\n    city[idx].quantity += 1;\r\n    return { gameState: 'servingPhase', city };\r\n  });\r\n  const { playerName } = inst.context.parentState;\r\n  inst.context.updateMessage(\r\n    `Con los servicios de Sainsbury, ${playerName} intercambia un 1Love de su mano por 1 ${cards[0].name} de la ciudad.`\r\n  );\r\n}\r\n\r\nfunction Esquine(inst) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Selecciona cartas para descartar',\r\n      button2Text: 'Hecho',\r\n      button2Click: () => getServings(inst, prevState),\r\n      handSelection: [],\r\n      selectionOn: 2,\r\n    };\r\n  });\r\n}\r\n\r\nfunction getServings(inst, prevMessages) {\r\n  const { handSelection } = inst.state;\r\n  const { hand } = inst.context.playerState;\r\n  inst.context.updateParent((prevState) => {\r\n    const discard = [...prevState.discard];\r\n    handSelection.forEach((idx) => discard.push(hand[idx]));\r\n    return { discard };\r\n  });\r\n  inst.context.updatePlayer((prevState) => {\r\n    const newHand = [...prevState.hand];\r\n    return {\r\n      servings: prevState.servings + handSelection.length,\r\n      hand: newHand.filter((foo, idx) => !handSelection.includes(idx)),\r\n    };\r\n  });\r\n  inst.setState({ ...prevMessages, handSelection: null, selectionOn: null });\r\n}\r\n\r\nfunction Tenalys(inst, card) {\r\n  const { webrtc, playerName } = inst.context.parentState;\r\n  if (webrtc) webrtc.shout('sendAction', { type: 'auto', card });\r\n  inst.context.updateMessage(\r\n    `${playerName} usa los servicios de TenalysTrent y los demás jugadores roban 1 carta.`\r\n  );\r\n}\r\n\r\nfunction actionTenalys(inst) {\r\n  inst.drawAndReload(1);\r\n}\r\n\r\nfunction Natsumi(inst, card) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Descarta, si quieres, 1 carta',\r\n      button2Text: 'Hecho',\r\n      button2Click: (a, b) => forcedDiscard(a, b, prevState, card),\r\n      handSelection: [],\r\n      selectionOn: 1,\r\n    };\r\n  });\r\n}\r\n\r\nfunction forcedDiscard(context, handSelection, prevMessages, card) {\r\n  const discardIdx = handSelection[0];\r\n  if (discardIdx >= 0) {\r\n    const { hand } = context.playerState;\r\n    context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, hand[discardIdx]] };\r\n    });\r\n    context.updatePlayer((prevState) => {\r\n      const newHand = [...prevState.hand];\r\n      return { hand: newHand.filter((foo, idx) => idx !== discardIdx) };\r\n    });\r\n    if (card) {\r\n      const { webrtc, playerName } = context.parentState;\r\n      if (webrtc) webrtc.shout('sendAction', { type: 'auto', card });\r\n      context.updateMessage(\r\n        `${playerName} descarta 1 carta con la habilidad de NatsumiFujikawa, lo que obliga a los demás jugadores a hacer lo mismo.`\r\n      );\r\n    }\r\n  }\r\n  if (discardIdx >= 0 || card)\r\n    context.parentState.setActions({\r\n      ...prevMessages,\r\n      handSelection: null,\r\n      selectionOn: null,\r\n    });\r\n}\r\n\r\nfunction actionNatsumi(inst) {\r\n  if (inst.state.hand.length >= 4) {\r\n    inst.context.parentState.setActions((prevState) => {\r\n      return {\r\n        message: 'Descarta 1 carta',\r\n        button2Text: 'Hecho',\r\n        button2Click: (a, b) => forcedDiscard(a, b, prevState),\r\n        handSelection: [],\r\n        selectionOn: 1,\r\n      };\r\n    });\r\n  }\r\n}\r\n\r\nfunction Claire(inst) {\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige 1 Evento para devolver a la ciudad',\r\n    button2Text: 'Cancelar',\r\n    button2Click: () =>\r\n      inst.context.updateParent({\r\n        gameState: 'servingPhase',\r\n      }),\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetEvent',\r\n    eventClick: (a, b, c, d) => removeEvent(inst, a, b, c, d),\r\n  });\r\n}\r\n\r\nfunction removeEvent(inst, card, idx, isPrivate, oppName) {\r\n  const { playerName, webrtc } = inst.context.parentState;\r\n  if (oppName) return;\r\n  if (card.name === 'Illness') {\r\n    // if is attachment\r\n    inst.context.parentState.getAttachment({\r\n      maidIdx: idx,\r\n      isPrivate,\r\n      remove: true,\r\n    });\r\n  } else inst.context.parentState.getChamberMaid(card, -1);\r\n\r\n  const city = _.cloneDeep(inst.context.parentState.city);\r\n  const cityIdx = city.findIndex((item) => item.name === card.name);\r\n  city[cityIdx].quantity += 1;\r\n  if (webrtc) webrtc.shout('cityUpdate', { city });\r\n  inst.context.updateParent({\r\n    eventClick: null,\r\n    city,\r\n    gameState: 'servingPhase',\r\n  });\r\n  inst.context.updateMessage(\r\n    `Usando los servicios de Claire, ${playerName} devuelve 1 de sus ${card.name} a la ciudad`\r\n  );\r\n}\r\n\r\nfunction ClaireDefend(inst, data, isAttachment) {\r\n  const cardName = isAttachment ? 'Illness' : data[0].name; // tehepelo\r\n  const { playerName, webrtc } = inst.context.parentState;\r\n  const message = `${playerName} se defiende del ${cardName} revelando 1 Claire de su mano`;\r\n  inst.context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: `Quieres defenderte del ${cardName} con Claire ?`,\r\n      button1Text: 'Sí',\r\n      button1Click: () => {\r\n        const city = _.cloneDeep(inst.context.parentState.city);\r\n        const cityIdx = city.findIndex((item) => item.name === cardName);\r\n        city[cityIdx].quantity += data.count || 1;\r\n        if (webrtc) webrtc.shout('cityUpdate', { city });\r\n\r\n        inst.context.parentState.setActions(prevActions);\r\n        inst.context.updateParent({ city });\r\n        inst.context.updateMessage(message);\r\n      },\r\n      button2Text: 'No',\r\n      button2Click: () => {\r\n        inst.context.parentState.setActions(prevActions);\r\n        if (isAttachment) {\r\n          getAttachment(inst, data);\r\n        } else getChamberMaid(inst, ...data);\r\n      },\r\n    };\r\n  });\r\n}\r\n\r\nfunction Eliza(inst, card) {\r\n  inst.setState({\r\n    message: 'Elige un jugador para el efecto',\r\n    button2Text: null,\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetPlayer',\r\n    playerClick: (name) => getSCModal(inst, name, card),\r\n    freeChambersToo: true,\r\n  });\r\n}\r\n\r\nfunction getSCModal(inst, oppName, card) {\r\n  const { webrtc, playerName, opponents } = inst.context.parentState;\r\n  const opp = opponents.find((item) => item.name === oppName);\r\n  const { deck } = oppName ? opp.data : inst.context.parentState;\r\n  if (!deck[0]) {\r\n    ElizaFinish(inst);\r\n    return;\r\n  }\r\n  const { name, set } = deck[0];\r\n  const route = set ? `set${set}/${name}` : name;\r\n\r\n  inst.context.updateParent({\r\n    showSCModal: true,\r\n    scModalData: {\r\n      title: `Esta es la primera carta de${\r\n        oppName ? `l mazo de ${oppName}` : ' tu mazo'\r\n      }`,\r\n      message: 'Quieres descartarla ?',\r\n      imgRoute: route,\r\n      yesFunc: () => {\r\n        ElizaFinish(inst);\r\n        if (oppName) {\r\n          if (webrtc)\r\n            webrtc.whisper(opp.peer, 'sendAction', { type: 'auto', card });\r\n        } else {\r\n          inst.context.draw(1, (hand) => {\r\n            const discarded = hand[0];\r\n            inst.context.updatePlayer({\r\n              hand: hand.filter((foo, idx) => idx > 0),\r\n            });\r\n            inst.context.updateParent((prevState) => {\r\n              return { discard: [...prevState.discard, discarded] };\r\n            });\r\n          });\r\n        }\r\n        inst.context.updateMessage(\r\n          `${playerName} usa los servicios de Eliza para descartar 1 carta del mazo de ${\r\n            oppName || playerName\r\n          }`\r\n        );\r\n      },\r\n      noFunc: () => ElizaFinish(inst),\r\n    },\r\n  });\r\n}\r\n\r\nfunction ElizaFinish(inst) {\r\n  inst.context.updateParent({\r\n    gameState: 'servingPhase',\r\n    freeChambersToo: false,\r\n    playerClick: null,\r\n    showSCModal: false,\r\n  });\r\n}\r\n\r\nfunction ElizaDiscard(inst) {\r\n  inst.drawAndReload(1, (hand) => {\r\n    const discarded = hand[0];\r\n    inst.setState({ hand: hand.filter((foo, idx) => idx > 0) });\r\n    inst.context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, discarded] };\r\n    });\r\n  });\r\n}\r\n\r\nfunction Nena(inst) {\r\n  const { webrtc, playerName, opponents, turnOrder } = inst.context.parentState;\r\n  const playerIdx = inst.context.parentState.turnNum % turnOrder.length;\r\n  const city = _.cloneDeep(inst.context.parentState.city);\r\n  const bhIdx = city.findIndex((item) => item.name === 'BadHabit');\r\n  const bhLeft = city[bhIdx].quantity;\r\n  let message = null;\r\n  if (bhLeft > 0) {\r\n    const opp1 = opponents.find(\r\n      (opp) => opp.name === turnOrder[(playerIdx + 1) % turnOrder.length]\r\n    );\r\n    if (checkChamberMaids(opp1.data)) {\r\n      city[bhIdx].quantity -= 1;\r\n      if (webrtc) webrtc.whisper(opp1.peer, 'sendEvent', [city[bhIdx]]);\r\n      message = `${playerName} usa los servicios de NenaWilder para enviar 1 BadHabit a ${opp1.name}`;\r\n    }\r\n  }\r\n  if (bhLeft > 1) {\r\n    const opp2 = opponents.find(\r\n      (opp) =>\r\n        opp.name ===\r\n        turnOrder[(playerIdx + turnOrder.length - 1) % turnOrder.length]\r\n    );\r\n    if (checkChamberMaids(opp2.data)) {\r\n      city[bhIdx].quantity -= 1;\r\n      if (webrtc) webrtc.whisper(opp2.peer, 'sendEvent', [city[bhIdx]]);\r\n      message = message\r\n        ? `${message} y a ${opp2.name}`\r\n        : `${playerName} usa los servicios de NenaWilder para enviar 1 BadHabit a ${opp2.name}`;\r\n    }\r\n  }\r\n  if (message) {\r\n    inst.context.updateParent({ city });\r\n    webrtc.shout('cityUpdate', { city });\r\n    inst.context.updateMessage(message);\r\n  }\r\n}\r\n\r\nexport const playFuncs = {\r\n  Sainsbury,\r\n  Esquine,\r\n  Tenalys,\r\n  actionTenalys,\r\n  Natsumi,\r\n  actionNatsumi,\r\n  Claire,\r\n  ClaireDefend,\r\n  Eliza,\r\n  ElizaDiscard,\r\n  Nena,\r\n};\r\n","import _ from 'lodash';\r\nimport { getAttachment } from '../playerArea/playerZones/helpers/dataUpdates';\r\n\r\nfunction Illness(inst, maidIdx, isPrivate) {\r\n  inst.context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message:\r\n        'Quieres descartar un 3Love y devolver esta Illness a la ciudad?',\r\n      button1Text: 'Sí',\r\n      button1Click: () => healIllness(inst, maidIdx, isPrivate, prevActions),\r\n      button2Text: 'No',\r\n      button2Click: () => inst.context.parentState.setActions(prevActions),\r\n    };\r\n  });\r\n}\r\n\r\nfunction healIllness(inst, maidIdx, isPrivate, prevActions) {\r\n  const hand = _.cloneDeep(inst.context.playerState.hand);\r\n  const loveIdx = hand.findIndex((item) => item.name === '3Love');\r\n  const threeLove = hand[loveIdx];\r\n  inst.context.updatePlayer({\r\n    hand: hand.filter((foo, idx) => idx !== loveIdx),\r\n  });\r\n  const { webrtc, playerName } = inst.context.parentState;\r\n  inst.context.updateParent((prevState) => {\r\n    const city = _.cloneDeep(prevState.city);\r\n    const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n    city[illIdx].quantity += 1;\r\n    if (webrtc) webrtc.shout('cityUpdate', { city });\r\n\r\n    const discard = [...prevState.discard];\r\n    discard.push(threeLove);\r\n    return { discard, city };\r\n  });\r\n  getAttachment(inst, { maidIdx, isPrivate, remove: true });\r\n  inst.context.parentState.setActions(prevActions);\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} descarta un 3Love para devolver 1 de sus Illness a la ciudad.`\r\n  );\r\n}\r\n\r\nfunction restricIllness(context) {\r\n  return context.playerState.hand.find((card) => card.name === '3Love');\r\n}\r\n\r\nexport const eventFuncs = { Illness, restricIllness };\r\n","function Ophelia(chambered, inDeck) {\r\n  if (inDeck <= 1) return 0;\r\n  return inDeck * (inDeck % 2 === 1 ? 2 : -2);\r\n}\r\n\r\nfunction Safran(chambered) {\r\n  const q = Math.floor(chambered / 4);\r\n  const r = chambered % 4;\r\n  let points = q * 12;\r\n  if (r >= 2) points += 4;\r\n  if (r >= 3) points += 4;\r\n  return points;\r\n}\r\n\r\nfunction BadHabit(chambered) {\r\n  return chambered * (chambered >= 4 ? -2 : -1);\r\n}\r\n\r\nfunction Rouge(chamber, inDeck) {\r\n  return chamber + inDeck;\r\n}\r\n\r\nfunction Viola(chamber, inDeck, inst, maids) {\r\n  let points = inDeck + chamber;\r\n  if (maids.AzureCrescent) return points;\r\n  const numRouge = maids.RougeCrescent ? maids.RougeCrescent.chambered : 0;\r\n  return points + Math.min(numRouge, chamber) * 3;\r\n}\r\n\r\nfunction Azure(chamber, inDeck, inst, maids) {\r\n  let points = inDeck + chamber;\r\n  const numRouge = maids.RougeCrescent ? maids.RougeCrescent.chambered : 0;\r\n  const numViola = maids.ViolaCrescent ? maids.ViolaCrescent.chambered : 0;\r\n  const allNums = [chamber, numViola, numRouge];\r\n  const minThree = Math.min(...allNums);\r\n  const pairNums = allNums\r\n    .map((num) => num - minThree)\r\n    .filter((num) => num > 0);\r\n  const minTwo = pairNums.length === 2 ? Math.min(...pairNums) : 0;\r\n  return points + minThree * 7 + minTwo * 3;\r\n}\r\n\r\nfunction Colette(chamber, inDeck, inst) {\r\n  const { opponents } = inst.context.parentState;\r\n  const oppColettes = opponents.map((opp) => getColettes(opp, inst));\r\n  const total = chamber + inDeck;\r\n  return total + (total > Math.max(...oppColettes) ? 5 : 0);\r\n}\r\n\r\nfunction getColettes(opp, inst) {\r\n  const { discard, chamberMaids } = opp.data;\r\n  const chamberColettes = chamberMaids.find((item) => {\r\n    return item.name === 'ColetteFramboise' && !inst.hasIllness(item);\r\n  });\r\n  let deckColettes = 0;\r\n  discard.forEach((item) => {\r\n    if (item.name === 'ColetteFramboise') deckColettes += 1;\r\n  });\r\n  return deckColettes + (chamberColettes ? chamberColettes.chambered : 0);\r\n}\r\n\r\nexport const vpFuncs = {\r\n  Ophelia,\r\n  Safran,\r\n  BadHabit,\r\n  Rouge,\r\n  Viola,\r\n  Azure,\r\n  Colette,\r\n};\r\n","import { playFuncs } from './set1Functions';\r\nimport { eventFuncs } from './set1ChamberFuncs';\r\nimport { vpFuncs } from './vpFunctions';\r\n\r\nexport const set1Fixed = [\r\n  {\r\n    name: 'Illness',\r\n    set: 1,\r\n    type: 'event',\r\n    cost: 4,\r\n    quantity: 10,\r\n    attachTo: 'maid',\r\n    onStart: eventFuncs.Illness,\r\n    restric: eventFuncs.restricIllness,\r\n  },\r\n  {\r\n    name: 'BadHabit',\r\n    set: 1,\r\n    type: 'event',\r\n    cost: 2,\r\n    vp: vpFuncs.BadHabit,\r\n    quantity: 16,\r\n  },\r\n  {\r\n    name: 'ColetteFramboise',\r\n    set: 1,\r\n    type: 'maidChief',\r\n    cost: 3,\r\n    vp: vpFuncs.Colette,\r\n    chamberCost: 2,\r\n    quantity: 24,\r\n  },\r\n  {\r\n    name: 'MarianneSoleil',\r\n    set: 1,\r\n    type: 'maidChief',\r\n    cost: 9,\r\n    vp: (chamber, deck) => 6 * (chamber + deck),\r\n    quantity: 8,\r\n  },\r\n];\r\n\r\nexport const set1Maids = [\r\n  {\r\n    name: 'AniseGreenaway',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 7,\r\n    vp: (chamber, deck) => 3 * deck,\r\n    draw: 3,\r\n    contract: 1,\r\n    quantity: 8,\r\n  },\r\n  {\r\n    name: 'OpheliaGrail',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 6,\r\n    draw: 1,\r\n    servings: 1,\r\n    love: 1,\r\n    contract: 1,\r\n    vp: vpFuncs.Ophelia,\r\n    quantity: 8,\r\n  },\r\n  {\r\n    name: 'SainsburyLockwood',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    onPlay: playFuncs.Sainsbury,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'TenalysTrent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    love: 3,\r\n    contract: 1,\r\n    onPlay: playFuncs.Tenalys,\r\n    forcedAction: playFuncs.actionTenalys,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'NenaWilder',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    love: 1,\r\n    onPlay: playFuncs.Nena,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'NatsumiFujikawa',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 5,\r\n    draw: 1,\r\n    servings: 2,\r\n    onPlay: playFuncs.Natsumi,\r\n    forcedAction: playFuncs.actionNatsumi,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'EsquineForet',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 2,\r\n    onPlay: playFuncs.Esquine,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'GenevieveDaubigny',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 1,\r\n    servings: 1,\r\n    love: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'MoineDeLefevre',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 4,\r\n    draw: 2,\r\n    contract: 2,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ElizaRosewater',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    love: 2,\r\n    onPlay: playFuncs.Eliza,\r\n    forcedAction: playFuncs.ElizaDiscard,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'SafranVirginie',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    vp: vpFuncs.Safran,\r\n    love: 2,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'KagariIchinomiya',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    servings: 2,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ClaireSaintJuste',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 3,\r\n    servings: 1,\r\n    onPlay: playFuncs.Claire,\r\n    onDefend: playFuncs.ClaireDefend,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'AzureCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Azure,\r\n    contract: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'ViolaCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Viola,\r\n    draw: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n  {\r\n    name: 'RougeCrescent',\r\n    set: 1,\r\n    type: 'maid',\r\n    cost: 2,\r\n    vp: vpFuncs.Rouge,\r\n    love: 1,\r\n    chamberCost: 1,\r\n    quantity: 10,\r\n  },\r\n];\r\n","import _ from 'lodash';\r\nimport {\r\n  getAttachment,\r\n  getChamberMaid,\r\n} from '../playerArea/playerZones/helpers/dataUpdates';\r\nimport { getTrueData, finishTurn } from '../helpers/actions';\r\n\r\nfunction Lucienne(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  increaseParam(context, 'servings', 'Lucienne', noUpdate);\r\n}\r\n\r\nfunction Rosa(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  increaseParam(context, 'love', 'Rosa', noUpdate);\r\n}\r\n\r\nfunction Fay(context) {\r\n  const noUpdate = context.parentState.hasPlayables();\r\n  context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Qué quieres obtener con FayLongfang ?',\r\n      button1Text: '1 Amor',\r\n      button2Text: '1 Contratación',\r\n      button1Click: () => {\r\n        context.parentState.setActions(prevActions);\r\n        increaseParam(context, 'love', 'Fay', noUpdate);\r\n      },\r\n      button2Click: () => {\r\n        context.parentState.setActions(prevActions);\r\n        increaseParam(context, 'contract', 'Fay', noUpdate);\r\n      },\r\n    };\r\n  });\r\n}\r\n\r\nfunction increaseParam(context, param, name, noUpdate) {\r\n  context.updatePlayer((prevState) => {\r\n    return { [param]: prevState[param] + 1 };\r\n  });\r\n  if (!noUpdate) context.updateParent({ gameState: 'servingPhase' });\r\n  const { playerName } = context.parentState;\r\n  context.updateMessage(\r\n    `${\r\n      noUpdate ? 'Al robar una carta' : 'En su fase de Inicio'\r\n    }, ${playerName} gana 1 &${param}& con la habilidad de ${name}.`\r\n  );\r\n}\r\n\r\nfunction Lalande(inst) {\r\n  const { playerName } = inst.context.parentState;\r\n  inst.context.draw(1);\r\n  inst.setState({ usadaJoder: 'si' });\r\n  if (!inst.context.parentState.hasPlayables())\r\n    inst.context.updateParent({ gameState: 'servingPhase' });\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} roba 1 carta con la habilidad de Lalande.`\r\n  );\r\n}\r\n\r\nfunction Milly(inst, cb) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  increaseParam(inst.context, 'servings', 'Milly', true);\r\n  cb();\r\n}\r\n\r\nfunction Tanya(inst, cb) {\r\n  inst.setState((prevState) => {\r\n    return {\r\n      message: 'Robas 1 más con TanyaPetrushka ?',\r\n      button1Text: 'Sí',\r\n      button2Text: 'No',\r\n      button1Click: () => {\r\n        inst.context.draw(1);\r\n        inst.setState({ ...prevState, usadaJoder: 'si' }, cb);\r\n        const { updateMessage, parentState } = inst.context;\r\n        updateMessage(\r\n          `Al robar una carta, ${parentState.playerName} roba otra carta con la habilidad de Tanya.`\r\n        );\r\n      },\r\n      button2Click: () => inst.setState(prevState, cb),\r\n    };\r\n  });\r\n}\r\n\r\nfunction Nord(inst) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  inst.context.parentState.setActions((prevActions) => {\r\n    return {\r\n      message: 'Quieres usar la habilidad de Nord ?',\r\n      button1Text: 'Sí',\r\n      button1Click: () => selectHand(inst.context),\r\n      button2Text: 'No',\r\n      button2Click: () => inst.context.parentState.setActions(prevActions),\r\n    };\r\n  });\r\n}\r\n\r\nfunction selectHand(context) {\r\n  context.parentState.setActions({\r\n    message: 'Selecciona la carta a MANTENER',\r\n    button1Text: null,\r\n    button2Text: 'Hecho',\r\n    button2Click: (a, b) => discardAndTarget(a, b),\r\n    handSelection: [],\r\n    selectionOn: 1,\r\n  });\r\n}\r\n\r\nfunction discardAndTarget(context, handSelection) {\r\n  const newDiscards = context.playerState.hand.filter(\r\n    (foo, idx) => idx !== handSelection[0]\r\n  );\r\n  context.parentState.setActions({\r\n    message: 'Asigna 2 Illness a una Doncella',\r\n    button2Text: null,\r\n    handSelection: null,\r\n    selectionOn: null,\r\n  });\r\n  context.updatePlayer((prevState) => {\r\n    const hand = [...prevState.hand];\r\n    return { hand: hand.filter((foo, idx) => idx === handSelection[0]) };\r\n  });\r\n  context.updateParent((prevState) => {\r\n    const discard = [...prevState.discard];\r\n    discard.push(...newDiscards);\r\n    return {\r\n      discard,\r\n      gameState: 'targetChamberMaid',\r\n      maidClick: (a, b, c) => sendIllness(context, a, b, c),\r\n    };\r\n  });\r\n}\r\n\r\nfunction sendIllness(context, maidIdx, isPrivate, oppName) {\r\n  const city = _.cloneDeep(context.parentState.city);\r\n  const illIdx = city.findIndex((item) => item.name === 'Illness');\r\n  const numIll = Math.min(city[illIdx].quantity, 2);\r\n  const card = [];\r\n  if (numIll > 0) card.push(city[illIdx]);\r\n  if (numIll > 1) card.push(city[illIdx]);\r\n\r\n  city[illIdx].quantity -= numIll;\r\n  context.updateParent({ city, gameState: 'startPhase' });\r\n\r\n  const { webrtc, opponents, playerName } = context.parentState;\r\n  webrtc.shout('cityUpdate', { city });\r\n  const data = { maidIdx, card, isPrivate, count: numIll };\r\n  if (oppName) {\r\n    const opp = opponents.find((item) => item.name === oppName);\r\n    if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n  } else context.parentState.getAttachment({ maidIdx, card, isPrivate });\r\n  context.updateMessage(\r\n    `${playerName} envía ${numIll} Illness a una Doncella de ${\r\n      oppName || playerName\r\n    }.`\r\n  );\r\n}\r\n\r\nfunction Sora(inst) {\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige el Evento que quieras mover',\r\n    button2Text: 'Cancelar',\r\n    button2Click: () =>\r\n      inst.context.updateParent({\r\n        gameState: 'startPhase',\r\n        eventClick: null,\r\n      }),\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetEvent',\r\n    eventClick: (a, b, c, d) => removeAndTarget(inst, a, b, c, d),\r\n  });\r\n  inst.setState({ usadaJoder: 'si' });\r\n}\r\n\r\nfunction removeAndTarget(inst, card, idx, isPrivate, oppName) {\r\n  const { webrtc, opponents, playerName } = inst.context.parentState;\r\n  if (!oppName) {\r\n    if (card.name === 'Illness') {\r\n      // if is attachment\r\n      getAttachment(inst, { maidIdx: idx, isPrivate, remove: true });\r\n    } else getChamberMaid(inst, card, -1);\r\n  } else {\r\n    const opp = opponents.find((item) => item.name === oppName);\r\n    if (card.name === 'Illness') {\r\n      const data = { maidIdx: idx, isPrivate, remove: true };\r\n      if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n    } else if (webrtc) {\r\n      webrtc.whisper(opp.peer, 'sendEvent', [card, -1]);\r\n    }\r\n  }\r\n  inst.context.updateParent({ eventClick: null });\r\n  inst.context.attachEvent({ ...card, backToStart: true }, 1);\r\n  inst.context.updateMessage(\r\n    `En su fase de Inicio, ${playerName} toma 1 ${\r\n      card.name\r\n    } de la habitación de ${\r\n      oppName || playerName\r\n    } para enviarlo a otro jugador.`\r\n  );\r\n}\r\n\r\nfunction Amber(context) {\r\n  context.draw(1, (hand) => {\r\n    const discarded = hand[0];\r\n    context.updatePlayer({ hand: [] });\r\n    context.updateParent((prevState) => {\r\n      return { discard: [...prevState.discard, discarded] };\r\n    });\r\n    const amount = discarded.type.includes('maid') ? 5 : 4;\r\n    context.draw(amount, () => finishTurn(context));\r\n    const { playerName } = context.parentState;\r\n    context.updateMessage(\r\n      `Debido a la habilidad de AmberTwilight, ${playerName} descarta ${\r\n        discarded.name\r\n      } de su mazo.${\r\n        amount === 4\r\n          ? ' Como no es una Maid, roba 1 carta menos para su nueva mano.'\r\n          : ''\r\n      }`\r\n    );\r\n  });\r\n}\r\n\r\nfunction Eugenie(inst) {\r\n  inst.setState({ usadaJoder: 'si' });\r\n  inst.context.parentState.setActions({\r\n    message: 'Elige un oponente para el efecto',\r\n    button2Text: null,\r\n  });\r\n  inst.context.updateParent({\r\n    gameState: 'targetPlayer',\r\n    playerClick: (name) => getModal(inst, name),\r\n    freeChambersToo: true,\r\n  });\r\n}\r\n\r\nfunction getModal(inst, oppName) {\r\n  if (!oppName) return;\r\n  const { webrtc, playerName, opponents } = inst.context.parentState;\r\n  const opp = opponents.find((item) => item.name === oppName);\r\n  const oppRandom = getHandRandom(opp.data.hand);\r\n  const { name, set } = oppRandom.card;\r\n  const route = set ? `set${set}/${name}` : name;\r\n\r\n  inst.context.updateParent({\r\n    showSCModal: true,\r\n    scModalData: {\r\n      title: `Esta es la carta revelada de la mano de ${oppName}`,\r\n      message: 'Quieres intercambiarla con una carta aleatoria de tu mano ?',\r\n      imgRoute: route,\r\n      yesFunc: () => {\r\n        const playerRandom = getHandRandom(inst.context.playerState.hand);\r\n        inst.context.updatePlayer((prevState) => {\r\n          const hand = _.cloneDeep(prevState.hand);\r\n          hand[playerRandom.idx] = getTrueData(oppRandom.card);\r\n          return { hand };\r\n        });\r\n        if (webrtc) {\r\n          webrtc.whisper(opp.peer, 'sendAction', {\r\n            type: 'auto',\r\n            card: {\r\n              name: 'EugenieFontaine',\r\n              set: 1,\r\n              type: 'privateMaid',\r\n            },\r\n            funcData: [oppRandom.idx, playerRandom.card],\r\n          });\r\n        }\r\n        inst.context.updateMessage(\r\n          `En su fase de Inicio, ${playerName} usa la habilidad de Eugenie para intercambiar una carta aleatoria de su mano con ${oppName}`\r\n        );\r\n        EugenieFinish(inst);\r\n      },\r\n      noFunc: () => EugenieFinish(inst),\r\n    },\r\n  });\r\n}\r\n\r\nfunction actionEugenie(inst, idx, newCard) {\r\n  inst.setState((prevState) => {\r\n    const hand = _.cloneDeep(prevState.hand);\r\n    hand[idx] = getTrueData(newCard);\r\n    return { hand };\r\n  });\r\n}\r\n\r\nfunction getHandRandom(hand) {\r\n  const idx = Math.floor(Math.random() * hand.length);\r\n  return { idx, card: hand[idx] };\r\n}\r\n\r\nfunction EugenieFinish(inst) {\r\n  inst.context.updateParent({\r\n    gameState: 'startPhase',\r\n    freeChambersToo: false,\r\n    playerClick: null,\r\n    showSCModal: false,\r\n  });\r\n}\r\n\r\nexport const functions = {\r\n  Lucienne,\r\n  Rosa,\r\n  Fay,\r\n  Lalande,\r\n  Milly,\r\n  Tanya,\r\n  Nord,\r\n  Sora,\r\n  Amber,\r\n  Eugenie,\r\n  actionEugenie,\r\n};\r\n","import { functions } from './privateMaidFunctions';\r\n\r\nexport const privateMaids = [\r\n  {\r\n    name: 'AmberTwilight',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: -3,\r\n    onOppDiscard: functions.Amber,\r\n  },\r\n  {\r\n    name: 'NordTwilight',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 4,\r\n    vp: -4,\r\n    onStart: functions.Nord,\r\n  },\r\n  {\r\n    name: 'SoraNakachi',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 7,\r\n    vp: 2,\r\n    onStart: functions.Sora,\r\n  },\r\n  {\r\n    name: 'FayLongfang',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 6,\r\n    vp: 0,\r\n    auto: true,\r\n    onStart: functions.Fay,\r\n  },\r\n  {\r\n    name: 'LalandeDreyfus',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 6,\r\n    vp: 2,\r\n    onStart: functions.Lalande,\r\n  },\r\n  {\r\n    name: 'MillyViolet',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 2,\r\n    onDraw: functions.Milly,\r\n  },\r\n  {\r\n    name: 'EugenieFontaine',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 0,\r\n    onStart: functions.Eugenie,\r\n    forcedAction: functions.actionEugenie,\r\n  },\r\n  {\r\n    name: 'LucienneDeMarlboro',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 1,\r\n    auto: true,\r\n    onStart: functions.Lucienne,\r\n  },\r\n  {\r\n    name: 'RosaTopaz',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 5,\r\n    vp: 1,\r\n    auto: true,\r\n    onStart: functions.Rosa,\r\n  },\r\n  {\r\n    name: 'TanyaPetrushka',\r\n    set: 1,\r\n    type: 'privateMaid',\r\n    cost: 4,\r\n    vp: 1,\r\n    onDraw: functions.Tanya,\r\n  },\r\n];\r\n","import { love } from '../cardData/love';\r\nimport { set1Fixed, set1Maids } from '../cardData/set1';\r\nimport { privateMaids } from '../cardData/privateMaids';\r\n\r\nexport function shuffle(array) {\r\n  var currentIndex = array.length,\r\n    temporaryValue,\r\n    randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nexport function getTrueData(card) {\r\n  if (!card) return null;\r\n  switch (card.type) {\r\n    case 'love':\r\n      return love.find((item) => item.name === card.name);\r\n    case 'privateMaid':\r\n      return privateMaids.find((item) => item.name === card.name);\r\n    case 'maid':\r\n      return set1Maids.find((item) => item.name === card.name);\r\n    default:\r\n      return set1Fixed.find((item) => item.name === card.name);\r\n  }\r\n}\r\n\r\nexport function checkChamberMaids(data) {\r\n  const { chamberMaids, boughtPrivateMaids } = data;\r\n  return (\r\n    boughtPrivateMaids[0] ||\r\n    chamberMaids.find((maid) => maid.type.includes('maid'))\r\n  );\r\n}\r\n\r\nexport function hasTargets(context) {\r\n  if (context.parentState.hasChamberMaids()) return true;\r\n  return context.parentState.opponents.find((opp) => {\r\n    return checkChamberMaids(opp.data);\r\n  });\r\n}\r\n\r\nexport function attachEvent(inst, card, selected) {\r\n  inst.setState((prevState) => {\r\n    let data = {\r\n      attachmentsLeft: [...prevState.attachmentsLeft],\r\n    };\r\n    if (data.attachmentsLeft.length === 0) {\r\n      data = { ...data, ...getAttachInfo(inst, card) };\r\n    }\r\n    for (let i = 0; i < selected; i++) {\r\n      data.attachmentsLeft.push(card);\r\n    }\r\n    return data;\r\n  });\r\n}\r\n\r\nexport function getAttachInfo(inst, card) {\r\n  switch (card.attachTo) {\r\n    case 'maid':\r\n      return {\r\n        gameState: 'targetChamberMaid',\r\n        maidClick: (maidIdx, isPrivate, oppName) => {\r\n          removePendingAttach(inst);\r\n          const { webrtc, opponents, playerName } = inst.state;\r\n          if (oppName) {\r\n            const opp = opponents.find((item) => item.name === oppName);\r\n            const data = { maidIdx, card, isPrivate };\r\n            if (webrtc) webrtc.whisper(opp.peer, 'sendAttach', data);\r\n          } else inst.state.getAttachment({ maidIdx, card, isPrivate });\r\n          inst.updateMessage(\r\n            `${playerName} envía 1 ${card.name} a ${oppName || playerName}.`\r\n          );\r\n        },\r\n      };\r\n    default:\r\n      return {\r\n        gameState: 'targetPlayer',\r\n        playerClick: (name) => {\r\n          removePendingAttach(inst);\r\n          const { webrtc, opponents, playerName } = inst.state;\r\n          if (name) {\r\n            const opp = opponents.find((item) => item.name === name);\r\n            if (webrtc) webrtc.whisper(opp.peer, 'sendEvent', [card]);\r\n          } else inst.state.getChamberMaid(card);\r\n          inst.updateMessage(\r\n            `${playerName} envía 1 ${card.name} a ${name || playerName}.`\r\n          );\r\n        },\r\n      };\r\n  }\r\n}\r\n\r\nfunction removePendingAttach(inst) {\r\n  inst.setState((prevState) => {\r\n    const removed = prevState.attachmentsLeft[0];\r\n    const left = [...prevState.attachmentsLeft].filter((foo, idx) => idx > 0);\r\n    let data = { attachmentsLeft: left };\r\n    if (left[0]) {\r\n      data = { ...data, ...getAttachInfo(inst, left[0]) };\r\n    } else if (removed.backToStart) {\r\n      data.gameState = 'startPhase';\r\n    } else data.gameState = 'discardPhase';\r\n    return data;\r\n  });\r\n}\r\n\r\nexport function handleAction(data, inst) {\r\n  if (data.type === 'auto') {\r\n    getTrueData(data.card).forcedAction(inst, ...(data.funcData || []));\r\n  }\r\n}\r\n\r\nexport function getTurnOrder(context) {\r\n  const { opponents, playerName, webrtc } = context.parentState;\r\n  const players = opponents.map((opp) => opp.name);\r\n  players.push(playerName);\r\n  const turnOrder = shuffle(players);\r\n  let message = 'El orden de juego es:';\r\n  turnOrder.forEach((name, idx) => {\r\n    message = `${message} ${idx > 0 ? '-> ' : ''}${name}`;\r\n  });\r\n  if (webrtc) {\r\n    webrtc.shout('turnOrder', turnOrder);\r\n    context.updateMessage(message);\r\n    context.updateParent({\r\n      msgTitle: `Turno de ${turnOrder[0]}`,\r\n      turnNum: 0,\r\n      gameState: turnOrder[0] === playerName ? 'startPhase' : 'opponentTurn',\r\n      turnOrder,\r\n    });\r\n  }\r\n}\r\n\r\nexport function finishTurn(context) {\r\n  const { webrtc, turnOrder, turnNum, playerName } = context.parentState;\r\n  if (webrtc) webrtc.shout('passTurn', {});\r\n  const newTurn = turnOrder[(turnNum + 1) % turnOrder.length];\r\n  context.updateParent(\r\n    {\r\n      msgTitle: `Turno de ${newTurn}`,\r\n      turnNum: turnNum + 1,\r\n      gameState: newTurn === playerName ? 'startPhase' : 'opponentTurn',\r\n    },\r\n    context.parentState.checkGameFinish\r\n  );\r\n}\r\n\r\nexport function checkGameFinish(inst) {\r\n  const { city } = inst.context.parentState;\r\n  let soldOut = 0;\r\n  city.forEach((item) => {\r\n    const { type, name, quantity } = item;\r\n    const validCard = name === 'cardback' || (type || '').includes('maid');\r\n    if (validCard && quantity === 0) soldOut += 1;\r\n  });\r\n  if (soldOut >= 2) {\r\n    finishGame(inst);\r\n  }\r\n}\r\n\r\nfunction finishGame(inst) {\r\n  const { playedCards, hand } = inst.state;\r\n  inst.context.updateParent(\r\n    (prevState) => {\r\n      const { deck, discard } = prevState;\r\n      return {\r\n        discard: [...discard, ...deck, ...hand, ...playedCards],\r\n        deck: [],\r\n        gameState: 'gameEnded',\r\n        msgTitle: 'Fin de la Partida',\r\n        message: \"Pulsa 'Resultados' para ver la clasificación.\",\r\n      };\r\n    },\r\n    () => setTimeout(inst.context.parentState.getResults, 1000)\r\n  );\r\n  inst.setState({ playedCards: [], hand: [] });\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport './Field.css';\r\n\r\nimport CardBlock from './CardBlock';\r\nimport { getTrueData, hasTargets, getTurnOrder } from '../helpers/actions';\r\n\r\nexport default class Field extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { lovePaid: 0, cardsOrdered: 0 };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const { getDeck } = this.context.parentState;\r\n    if (!getDeck && nextContext.parentState.getDeck) {\r\n      this.buyCards(null, nextContext.parentState.sendTo);\r\n    }\r\n  }\r\n\r\n  updateCard = (name, newCard, cb) => {\r\n    this.context.updateParent((prevState) => {\r\n      const { city } = prevState;\r\n      const index = city.findIndex((card) => card.name === name);\r\n      city[index] = newCard;\r\n      return { city };\r\n    }, cb);\r\n  };\r\n\r\n  selectCard = (card, mode = 'new') => {\r\n    if (!card) return;\r\n    switch (mode) {\r\n      case 'plus':\r\n        card.selected += 1;\r\n        this.switchCard(card, 1);\r\n        break;\r\n      case 'minus':\r\n        card.selected -= 1;\r\n        this.switchCard(card, -1);\r\n        break;\r\n      default:\r\n        if (card.quantity !== 0 && !this.privateSelectedTwice(card)) {\r\n          if (!card.selected || card.selected < 1) {\r\n            card.selected = 1;\r\n            this.switchCard(card, 1);\r\n          }\r\n        }\r\n    }\r\n    this.updateCard(card.name, card);\r\n  };\r\n\r\n  switchCard = (card, sign) => {\r\n    this.setState((prevState) => {\r\n      const { lovePaid, cardsOrdered } = prevState;\r\n      return {\r\n        lovePaid: lovePaid + sign * card.cost,\r\n        cardsOrdered: cardsOrdered + sign,\r\n      };\r\n    });\r\n  };\r\n\r\n  privateSelectedTwice = (card) => {\r\n    const index = this.context.parentState.city.findIndex((item) => {\r\n      return item.selected >= 1 && item.type === 'privateMaid';\r\n    });\r\n    return index >= 0 && card.type === 'privateMaid';\r\n  };\r\n\r\n  buyCards = (event, sendToFunc) => {\r\n    const boughtCards = [];\r\n    let hasEvents = false;\r\n    const city = _.cloneDeep(this.context.parentState.city);\r\n    if (!sendToFunc) this.context.updateMessage(this.getBuyMsg(city));\r\n\r\n    city.forEach((card) => {\r\n      const { selected, name, type } = card;\r\n      if (selected && selected > 0) {\r\n        if (type === 'privateMaid') {\r\n          this.buyPrivateMaid(name);\r\n          this.context.parentState.getPrivateMaid(getTrueData(card));\r\n        } else {\r\n          card.selected = 0;\r\n          card.quantity -= selected;\r\n          this.updateCard(name, card, this.updatePeers);\r\n          if (type === 'event') {\r\n            hasEvents = true;\r\n            this.context.attachEvent(card, selected);\r\n          } else {\r\n            for (let i = 0; i < selected; i++) {\r\n              boughtCards.push(getTrueData(card));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    const useSendTo = typeof sendToFunc === 'function';\r\n    const sendFunc = useSendTo ? sendToFunc : this.sendToDiscard;\r\n\r\n    sendFunc(boughtCards);\r\n    this.setState({ lovePaid: 0, cardsOrdered: 0 });\r\n\r\n    if (!hasEvents && !sendToFunc)\r\n      this.context.updateParent({ gameState: 'discardPhase' });\r\n  };\r\n\r\n  getBuyMsg = (city) => {\r\n    const { playerName } = this.context.parentState;\r\n    let message = `${playerName} compra`;\r\n    let bought = false;\r\n    city.forEach((card) => {\r\n      if (card.selected) {\r\n        message = `${message} ${card.selected} ${card.name},`;\r\n        bought = true;\r\n      }\r\n    });\r\n    let parsedMsg = '';\r\n    message.split(',').forEach((msg, idx, list) => {\r\n      let end = idx === list.length - 3 ? ' y' : ',';\r\n      end = idx >= list.length - 2 ? '' : end;\r\n      parsedMsg = `${parsedMsg}${msg}${end}`;\r\n    });\r\n    return bought ? `${parsedMsg}.` : `${playerName} no compra nada.`;\r\n  };\r\n\r\n  sendToDiscard = (cards) => {\r\n    this.context.updateParent((prevState) => {\r\n      const newDiscard = [...prevState.discard];\r\n      newDiscard.push(...cards);\r\n      return { discard: newDiscard };\r\n    });\r\n  };\r\n\r\n  buyPrivateMaid = (name) => {\r\n    this.context.updateParent((prevState) => {\r\n      const { city, privateMaids } = prevState;\r\n      const cardBack = city.find((card) => card.name === 'cardback') || {};\r\n      const newCity = city.filter((card) => card.name !== name);\r\n      let newPrivateMaids = privateMaids;\r\n      if (privateMaids[0]) {\r\n        const backIndex = newCity.findIndex((card) => card.name === 'cardback');\r\n        newCity[backIndex] = {\r\n          ...cardBack,\r\n          quantity: cardBack.quantity - 1,\r\n        };\r\n        newCity.push(privateMaids[0]);\r\n        newPrivateMaids = privateMaids.filter((card, idx) => idx > 0);\r\n      }\r\n      return { city: newCity, privateMaids: newPrivateMaids };\r\n    }, this.updatePeers);\r\n  };\r\n\r\n  isSelectable = (card) => {\r\n    const { cost, name, type } = card;\r\n    if (name === 'cardback') return false;\r\n    if (type === 'event' && !hasTargets(this.context)) return false;\r\n\r\n    const { gameState, restrType, restrName, money } = this.context.parentState;\r\n    const picking = gameState === 'cityPick';\r\n    if (picking && restrType.includes(type)) return false;\r\n    if (picking && restrName.includes(name)) return false;\r\n\r\n    const { love, contract } = money;\r\n    const { lovePaid, cardsOrdered } = this.state;\r\n    return love >= cost + lovePaid && contract > cardsOrdered;\r\n  };\r\n\r\n  updatePeers = () => {\r\n    const { city, privateMaids, webrtc } = this.context.parentState;\r\n    if (webrtc) webrtc.shout('cityUpdate', { city, privateMaids });\r\n  };\r\n\r\n  render() {\r\n    const { city, gameState, sendTo, mainPlayer } = this.context.parentState;\r\n    const picking = gameState === 'cityPick';\r\n    const buying = gameState === 'contractPhase' || picking;\r\n\r\n    return (\r\n      <div className=\"Field\">\r\n        <div style={{ float: 'left' }}>\r\n          {city &&\r\n            city.map((item) => (\r\n              <CardBlock\r\n                card={item}\r\n                selectCard={this.selectCard}\r\n                selectable={buying && this.isSelectable(item)}\r\n              />\r\n            ))}\r\n          {buying && (\r\n            <button\r\n              type=\"button\"\r\n              style={{ marginLeft: '2vw' }}\r\n              onClick={() => this.buyCards(null, picking ? sendTo : null)}\r\n            >\r\n              Hecho\r\n            </button>\r\n          )}\r\n          {gameState === 'gameSetUp' && mainPlayer && (\r\n            <button\r\n              type=\"button\"\r\n              style={{ marginLeft: '2vw' }}\r\n              onClick={() => getTurnOrder(this.context)}\r\n            >\r\n              Empezar\r\n            </button>\r\n          )}\r\n          {gameState === 'gameEnded' && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                this.context.updateParent({ showResultsModal: true });\r\n              }}\r\n            >\r\n              Resultados\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './MessageArea.css';\r\n\r\nexport default class MessageArea extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  getMessage = () => {\r\n    return this.context.parentState.message.split('&').map((item, idx) => {\r\n      if (idx % 2 === 0) return item;\r\n      return (\r\n        <img\r\n          alt=\"icon\"\r\n          src={require(`../playerArea/iconFooter/icons/${item}.png`)}\r\n        ></img>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"msgArea\">\r\n        <div className=\"msgTitle\">{this.context.parentState.msgTitle}</div>\r\n        <div className=\"msgContent\">{this.getMessage()}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function ImageArea(props) {\r\n  return (\r\n    <div style={{ display: 'block', width: '100%' }}>\r\n      {props.name && props.name !== 'cardback' && (\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${props.name}.jpg`)}\r\n          style={{\r\n            maxWidth: '21vw',\r\n            float: 'center',\r\n            display: 'block',\r\n            margin: 'auto',\r\n            userSelect: 'none',\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export const defaultStyle = {\r\n  overlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(255, 255, 255, 0)',\r\n  },\r\n  content: {\r\n    position: 'absolute',\r\n    top: '10%',\r\n    left: '22%',\r\n    width: '54vw',\r\n    height: '60vh',\r\n    border: 'none',\r\n    overflow: 'auto',\r\n    WebkitOverflowScrolling: 'touch',\r\n    borderRadius: '4px',\r\n    outline: 'none',\r\n    padding: '20px',\r\n    paddingTop: '10px',\r\n  },\r\n};\r\n\r\nexport const privateMaidsStyle = {\r\n  overlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(255, 255, 255, 0)',\r\n  },\r\n  content: {\r\n    position: 'absolute',\r\n    top: '30%',\r\n    left: '19%',\r\n    width: '60vw',\r\n    height: '50vh',\r\n    border: 'none',\r\n    overflow: 'auto',\r\n    WebkitOverflowScrolling: 'touch',\r\n    borderRadius: '4px',\r\n    outline: 'none',\r\n    padding: '20px',\r\n    paddingTop: '10px',\r\n  },\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport './CardDisplayModal.css';\r\n\r\nimport { defaultStyle, privateMaidsStyle } from './defaultStyle';\r\n\r\nexport default function CardDisplayModal(props, context) {\r\n  const {\r\n    showModal,\r\n    hideModal,\r\n    background,\r\n    cards,\r\n    title,\r\n    mode,\r\n    extraCmp,\r\n    oppName,\r\n  } = props;\r\n\r\n  const { overlay, content } =\r\n    mode === 'privateMaids' ? privateMaidsStyle : defaultStyle;\r\n\r\n  let extraClass = mode === 'privateMaids' ? 'privateModal chamberModal' : '';\r\n  if (mode === 'chamber') extraClass = 'chamberModal';\r\n\r\n  const maxAttach = getMaxAttachment(cards);\r\n\r\n  return (\r\n    <ReactModal\r\n      isOpen={showModal}\r\n      style={{ overlay, content: { ...content, background } }}\r\n      onRequestClose={hideModal}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className={`CardDisplayModal ${extraClass}`}>\r\n        <h1>{title}</h1>\r\n        <div className=\"cards\">\r\n          {typeof extraCmp === 'function' && extraCmp()}\r\n          {cards.map((card, idx) =>\r\n            renderCard(card, idx, context, mode, maxAttach, oppName)\r\n          )}\r\n        </div>\r\n        <button type=\"button\" onClick={hideModal}>\r\n          OK\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nCardDisplayModal.contextTypes = {\r\n  updateImage: PropTypes.func,\r\n  parentState: PropTypes.object,\r\n};\r\n\r\nfunction getImage(route, context, style, selectInfo) {\r\n  const { imageClass, onClick } = selectInfo;\r\n\r\n  return (\r\n    <img\r\n      alt=\"noseve\"\r\n      src={require(`../cards/${route}.jpg`)}\r\n      className={imageClass}\r\n      onMouseOver={() => {\r\n        context.updateImage(route);\r\n      }}\r\n      onMouseOut={() => {\r\n        context.updateImage(null);\r\n      }}\r\n      onClick={onClick}\r\n      style={style || {}}\r\n    />\r\n  );\r\n}\r\n\r\nfunction renderCard(card, cardIdx, context, mode, maxAttach, oppName) {\r\n  const { chambered, attachments } = card;\r\n  const AttachmentsDisplay = (attachments || []).map((item, idx) => {\r\n    return getImage(\r\n      getRoute(item),\r\n      context,\r\n      { position: 'absolute', top: `${1.5 * (idx + 1)}vw`, left: 0 },\r\n      getSelectInfo(mode, card, cardIdx, context, oppName, item)\r\n    );\r\n  });\r\n  const info = getSelectInfo(mode, card, cardIdx, context, oppName);\r\n\r\n  return (\r\n    <div className=\"cardBlock\">\r\n      <div style={{ position: 'relative' }}>\r\n        {getImage(getRoute(card), context, {}, info)}\r\n        {AttachmentsDisplay}\r\n      </div>\r\n      {mode === 'chamber' && (\r\n        <h3 style={{ marginTop: `calc(${maxAttach * 1.5}vw - 8px)` }}>\r\n          {chambered}\r\n        </h3>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getRoute(card) {\r\n  const { name, set } = card;\r\n  return set ? `set${set}/${name}` : name;\r\n}\r\n\r\nfunction getMaxAttachment(cards) {\r\n  const attachNums = cards.map((item) =>\r\n    item.attachments ? item.attachments.length : 0\r\n  );\r\n  return Math.max(...attachNums);\r\n}\r\n\r\nfunction getSelectInfo(mode, card, cardIdx, context, oppName, attach) {\r\n  const { gameState, maidClick, eventClick } = context.parentState;\r\n  const { type } = card;\r\n\r\n  if (gameState === 'targetEvent' && eventClick) {\r\n    if (type === 'event' || attach) {\r\n      return {\r\n        imageClass: 'selectable',\r\n        onClick: () =>\r\n          eventClick(attach || card, cardIdx, type === 'privateMaid', oppName),\r\n      };\r\n    }\r\n  }\r\n  const selecting = maidClick && gameState === 'targetChamberMaid';\r\n  const chamberCard = mode === 'chamber' && type.includes('maid');\r\n  const privateMaid = type === 'privateMaid' && cardIdx === 0;\r\n  const clickable = selecting && (chamberCard || privateMaid);\r\n\r\n  const imageClass = clickable ? 'selectable' : '';\r\n  const imageClick = () => {\r\n    maidClick(cardIdx, type === 'privateMaid', oppName);\r\n  };\r\n  const onClick = clickable ? imageClick : () => {};\r\n  return { imageClass, onClick };\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\n\r\nexport default class PlayZone extends React.Component {\r\n  static contextTypes = {\r\n    playerState: PropTypes.object,\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  render() {\r\n    const { playedCards } = this.context.playerState || {};\r\n    const { oppCards, oppName } = this.props;\r\n    const cards = oppCards || playedCards;\r\n    const limit = oppCards ? 4 : 12;\r\n\r\n    return [\r\n      <div\r\n        className={`${oppCards ? 'OppPlay' : 'PlayZone'} showesModal`}\r\n        title={\r\n          oppCards ? `Cartas Jugadas por ${oppName}` : 'Tus Cartas Jugadas'\r\n        }\r\n        onClick={this.showModal}\r\n      >\r\n        {cards.map((card, idx) => {\r\n          const { name, set } = card;\r\n          const route = set ? `set${set}/${name}` : name;\r\n          return (\r\n            idx < limit && (\r\n              <img alt=\"noseve\" src={require(`../../cards/${route}.jpg`)} />\r\n            )\r\n          );\r\n        })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        background=\"rgba(179, 179, 0, 0.85)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={cards}\r\n        title={\r\n          oppCards ? `Cartas Jugadas por ${oppName}` : 'Tus Cartas Jugadas'\r\n        }\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import { getTrueData, finishTurn } from '../../../helpers/actions';\r\n\r\nexport const config = {\r\n  servingPhase: {\r\n    message: 'Fase de Servicios',\r\n    button2Text: 'Fase de Contratación',\r\n    button2Click: (context) => {\r\n      const { hand } = context.playerState;\r\n      const { playerName } = context.parentState;\r\n      const loveCards = hand.filter((card) => card.type === 'love');\r\n      const newDiscards = hand.filter((card) => card.type !== 'love');\r\n      let love = 0;\r\n      let contract = 0;\r\n\r\n      context.updatePlayer(\r\n        (prevState) => {\r\n          love = prevState.love;\r\n          contract = prevState.contract;\r\n          const playedCards = [...prevState.playedCards];\r\n          playedCards.push(...loveCards);\r\n          loveCards.forEach((card) => (love += card.love));\r\n          return { love, servings: 0, hand: [], playedCards };\r\n        },\r\n        () => {\r\n          context.updateParent((prevState) => {\r\n            const discard = [...prevState.discard];\r\n            discard.push(...newDiscards);\r\n            return {\r\n              gameState: 'contractPhase',\r\n              discard,\r\n              money: { love, contract },\r\n            };\r\n          });\r\n          context.updateMessage(\r\n            `${playerName} termina su fase de Servicios con ${love} &love& y ${contract} &contract&`\r\n          );\r\n        }\r\n      );\r\n    },\r\n  },\r\n  contractPhase: { message: 'Fase de Contratación' },\r\n  discardPhase: {\r\n    button2Text: 'Fin de Turno',\r\n    button2Click: (context) => {\r\n      const endTurn = () => {\r\n        context.draw(5, () => finishTurn(context));\r\n      };\r\n      const discardAction = getDiscardAction(context);\r\n      if (discardAction) {\r\n        discardAction(context, endTurn);\r\n      } else endTurn();\r\n    },\r\n  },\r\n  opponentTurn: { message: '', button2Text: null },\r\n  gameEnded: { message: '', button2Text: null },\r\n  startPhase: {\r\n    message: 'Fase de Inicio',\r\n    button2Text: 'Fase de Servicios',\r\n    button2Click: (context) => {\r\n      context.updateParent({ gameState: 'servingPhase' });\r\n    },\r\n  },\r\n};\r\n\r\nfunction getDiscardAction(context) {\r\n  const { opponents } = context.parentState;\r\n  const bullyOpp = opponents.find((opp) => {\r\n    const oppMaid = getTrueData(opp.data.boughtPrivateMaids[0]);\r\n    if (!oppMaid || !oppMaid.onOppDiscard) return false;\r\n    return !hasIllness(oppMaid);\r\n  });\r\n  return (\r\n    bullyOpp && getTrueData(bullyOpp.data.boughtPrivateMaids[0]).onOppDiscard\r\n  );\r\n}\r\n\r\nfunction hasIllness(card) {\r\n  if (!card.attachments) return false;\r\n  return card.attachments.find((item) => item.name === 'Illness');\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { config } from './playerActions';\r\nimport { handSelect } from '../helpers/dataUpdates';\r\n\r\nexport default class HandZone extends React.Component {\r\n  static contextTypes = {\r\n    playerState: PropTypes.object,\r\n    updateImage: PropTypes.func,\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    updatePlayer: PropTypes.func,\r\n    draw: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { message: '', usadaJoder: 'no' };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.context.updateParent({ setActions: (data) => this.setState(data) });\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const newState = nextContext.parentState.gameState;\r\n    const change = this.context.parentState.gameState !== newState;\r\n    if (change && config[newState]) {\r\n      this.setState({\r\n        message: '',\r\n        button1Text: null,\r\n        button2Text: null,\r\n        ...config[newState],\r\n      });\r\n    }\r\n    const { attachmentsLeft } = nextContext.parentState;\r\n    if (change && newState === 'targetPlayer' && attachmentsLeft[0]) {\r\n      const { name } = attachmentsLeft[0];\r\n      this.setState({ message: `Asigna ${name} a un Jugador` });\r\n    }\r\n    if (change && newState === 'targetChamberMaid' && attachmentsLeft[0]) {\r\n      const { name } = attachmentsLeft[0];\r\n      this.setState({ message: `Asigna ${name} a una Doncella` });\r\n    }\r\n    if (change && newState === 'startPhase') {\r\n      this.setState({ usadaJoder: 'no' });\r\n    }\r\n    if (change && this.context.parentState.gameState === 'opponentTurn') {\r\n      this.setState({\r\n        usadaJoder: 'no',\r\n        handSelection: null,\r\n        selectionOn: null,\r\n      });\r\n    }\r\n  }\r\n\r\n  button1 = () => this.state.button1Click(this.context);\r\n  button2 = () =>\r\n    this.state.button2Click(this.context, this.state.handSelection);\r\n\r\n  getCardPlay = (card, idx) => {\r\n    const { selectionOn, button1Text } = this.state;\r\n    if (selectionOn) return () => handSelect(this, idx);\r\n    if (button1Text) return null;\r\n\r\n    const { servings } = this.context.playerState;\r\n    const { type, chamberCost } = card;\r\n    if (chamberCost && servings >= chamberCost) {\r\n      if (type === 'maid' && servings > 0) {\r\n        return () => {\r\n          this.setState((prevState) => {\r\n            const data = { prevState, card, idx };\r\n            return {\r\n              message: `Qué quieres hacer con ${card.name} ?`,\r\n              button1Text: 'Jugarla',\r\n              button2Text: 'Poner como Doncella',\r\n              button1Click: () => this.msgButton(data, this.cardPlay),\r\n              button2Click: () => this.msgButton(data, this.cardChamber),\r\n            };\r\n          });\r\n        };\r\n      }\r\n      return () => this.cardChamber(card, idx);\r\n    } else if (type === 'maid' && servings > 0) {\r\n      return () => this.cardPlay(card, idx);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  msgButton = (data, func) => {\r\n    const { prevState, card, idx } = data;\r\n    this.setState(prevState, () => func(card, idx));\r\n  };\r\n\r\n  cardPlay = (card, cardIdx) => {\r\n    const { love = 0, servings = 0, contract = 0, onPlay } = card;\r\n    if (card.draw > 0) {\r\n      this.draw(card.draw, () => {\r\n        if (typeof onPlay === 'function') onPlay(this, card);\r\n      });\r\n    } else if (typeof onPlay === 'function') onPlay(this, card);\r\n    this.context.updatePlayer((prevState) => {\r\n      const hand = [...prevState.hand];\r\n      const playedCards = [...prevState.playedCards];\r\n      playedCards.push(card);\r\n      return {\r\n        love: prevState.love + love,\r\n        servings: prevState.servings + servings - 1,\r\n        contract: prevState.contract + contract,\r\n        hand: hand.filter((foo, idx) => idx !== cardIdx),\r\n        playedCards,\r\n      };\r\n    });\r\n  };\r\n\r\n  cardChamber = (card, cardIdx) => {\r\n    this.context.updatePlayer((prevState) => {\r\n      const hand = [...prevState.hand].filter((foo, idx) => idx !== cardIdx);\r\n      return { servings: prevState.servings - card.chamberCost, hand };\r\n    });\r\n    this.context.parentState.getChamberMaid(card);\r\n  };\r\n\r\n  draw = (amount, cb) => {\r\n    this.context.draw(amount);\r\n    const currentMaid = this.context.parentState.getCurrentMaid();\r\n    if (currentMaid && currentMaid.onDraw && this.state.usadaJoder === 'no') {\r\n      currentMaid.onDraw(this, cb);\r\n    } else cb();\r\n  };\r\n\r\n  render() {\r\n    const { hand } = this.context.playerState;\r\n    const { message, handSelection, button1Text, button1Click } = this.state;\r\n    const { button2Text, button2Click } = this.state;\r\n    const space = 0.9;\r\n\r\n    return (\r\n      <div className=\"HandZone\">\r\n        <h6>{message}</h6>\r\n        <div className=\"handCards\">\r\n          {hand.map((card, idx, list) => {\r\n            const { name, set } = card;\r\n            const play = this.getCardPlay(card, idx);\r\n            const selected = handSelection && handSelection.includes(idx);\r\n            const route = set ? `set${set}/${name}` : name;\r\n            return (\r\n              <img\r\n                alt=\"noseve\"\r\n                src={require(`../../../cards/${route}.jpg`)}\r\n                className={`${play ? 'playable' : ''} ${\r\n                  selected ? 'selected' : ''\r\n                }`}\r\n                onMouseOver={() => {\r\n                  this.context.updateImage(route);\r\n                }}\r\n                onMouseOut={() => {\r\n                  this.context.updateImage(null);\r\n                }}\r\n                onClick={typeof play === 'function' ? play : () => {}}\r\n                style={{\r\n                  left: `${8.9 + space * 2 * idx - space * list.length}vw`,\r\n                  zIndex: list.length - idx,\r\n                }}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        {button1Text && button1Click && (\r\n          <button type=\"button\" style={{ left: '5px' }} onClick={this.button1}>\r\n            {button1Text}\r\n          </button>\r\n        )}\r\n        {button2Text && button2Click && (\r\n          <button type=\"button\" style={{ right: '5px' }} onClick={this.button2}>\r\n            {button2Text}\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from './CardDisplayModal';\r\n\r\nexport default class PrivateMaidsDisplay extends React.Component {\r\n  static contextTypes = {\r\n    updateImage: PropTypes.func,\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  getDisplayedMaids = () => {\r\n    const { privateMaids } = this.props;\r\n    const displayedMaids = [];\r\n    for (let i = 2; i >= 0; i--) {\r\n      if (privateMaids[i]) {\r\n        displayedMaids.push(this.getRoute(privateMaids[i]));\r\n        const { attachments } = privateMaids[i];\r\n        (attachments || []).forEach((item) => {\r\n          displayedMaids.push(this.getRoute(item));\r\n        });\r\n      }\r\n    }\r\n    return displayedMaids.filter((foo, idx) => {\r\n      return idx >= displayedMaids.length - 3;\r\n    });\r\n  };\r\n\r\n  getRoute = (card) => {\r\n    const { name, set } = card;\r\n    return set ? `set${set}/${name}` : name;\r\n  };\r\n\r\n  getCardImage = (card, topMaid, style) => {\r\n    const { gameState } = this.context.parentState;\r\n    const selecting =\r\n      gameState === 'targetChamberMaid' || gameState === 'targetEvent';\r\n    return (\r\n      <img\r\n        alt=\"noseve\"\r\n        className={`showesModal ${selecting ? 'selectable' : ''}`}\r\n        title=\"Tus Maids Particulares\"\r\n        src={require(`../cards/${card}.jpg`)}\r\n        onMouseOver={() => {\r\n          this.context.updateImage(topMaid);\r\n        }}\r\n        onMouseOut={() => {\r\n          this.context.updateImage(null);\r\n        }}\r\n        onClick={this.showModal}\r\n        style={style}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { oppName } = this.props;\r\n    const displayedMaids = this.getDisplayedMaids();\r\n    if (displayedMaids.length <= 0) return null;\r\n    const topMaid = displayedMaids[displayedMaids.length - 1];\r\n\r\n    return [\r\n      <div className=\"cardBlock\" style={{ position: 'relative' }}>\r\n        {this.getCardImage(displayedMaids[0], topMaid, {})}\r\n        {displayedMaids[1] &&\r\n          this.getCardImage(displayedMaids[1], topMaid, {\r\n            position: 'absolute',\r\n            top: '1.5vw',\r\n            left: 0,\r\n          })}\r\n        {displayedMaids[2] &&\r\n          this.getCardImage(displayedMaids[2], topMaid, {\r\n            position: 'absolute',\r\n            top: '3vw',\r\n            left: 0,\r\n          })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        showModal={this.state.show}\r\n        background=\"rgba(0,0,0,0.75)\"\r\n        cards={this.props.privateMaids}\r\n        hideModal={this.hideModal}\r\n        oppName={oppName}\r\n        title={\r\n          oppName ? `Maids Particulares de ${oppName}` : 'Tus Maids Paticulares'\r\n        }\r\n        mode=\"privateMaids\"\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\nimport PrivateMaidsDisplay from '../../cardDisplayModal/PrivateMaidsDisplay';\r\nimport { checkChamberMaids } from '../../helpers/actions';\r\nimport { getChamberMaid, getAttachment, getVP } from './helpers/dataUpdates';\r\n\r\nexport default class ChamberZone extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    updatePlayer: PropTypes.func,\r\n    updateImage: PropTypes.func,\r\n    playerState: PropTypes.object,\r\n    draw: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show: false,\r\n      usadaJoder: 'no',\r\n      chamberMaids: [],\r\n      boughtPrivateMaids: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.oppName) {\r\n      this.context.updateParent({\r\n        getChamberMaid: (card, add) => getChamberMaid(this, card, add),\r\n        getPrivateMaid: this.getPrivateMaid,\r\n        getAttachment: (data) => getAttachment(this, data),\r\n        hasChamberMaids: () => checkChamberMaids(this.state),\r\n        hasPlayables: this.hasPlayables,\r\n        getCurrentMaid: this.getHealthyMaid,\r\n        getDefend: (data, isAttachment) => this.defend(data, isAttachment),\r\n        getResults: this.getResults,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { chamberMaids, boughtPrivateMaids } = this.state;\r\n    const { webrtc, playerName } = this.context.parentState;\r\n    if (\r\n      webrtc &&\r\n      !_.isEqual(boughtPrivateMaids, prevState.boughtPrivateMaids)\r\n    ) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { boughtPrivateMaids },\r\n      });\r\n    }\r\n    if (webrtc && !_.isEqual(chamberMaids, prevState.chamberMaids)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { chamberMaids },\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    if (!this.props.oppName) {\r\n      const oldState = this.context.parentState.gameState || '';\r\n      const newState = nextContext.parentState.gameState;\r\n      if (oldState !== newState && newState === 'startPhase') {\r\n        if (!oldState.includes('target')) this.setState({ usadaJoder: 'no' });\r\n        const currentMaid = this.getHealthyMaid();\r\n        if (currentMaid && currentMaid.onStart) {\r\n          if (currentMaid.auto) currentMaid.onStart(this.context);\r\n        } else if (!this.hasPlayables()) {\r\n          this.context.updateParent({\r\n            gameState: 'servingPhase',\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getPrivateMaid = (card) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        boughtPrivateMaids: [card, ...prevState.boughtPrivateMaids],\r\n      };\r\n    });\r\n  };\r\n\r\n  defend = (data, isAttachment) => {\r\n    const defensor = this.context.playerState.hand.find(\r\n      (maid) => maid.onDefend\r\n    );\r\n    if (defensor && !data.remove) {\r\n      defensor.onDefend(this, data, isAttachment);\r\n    } else {\r\n      if (isAttachment) {\r\n        getAttachment(this, data);\r\n      } else {\r\n        getChamberMaid(this, ...data);\r\n      }\r\n    }\r\n  };\r\n\r\n  getResults = () => {\r\n    const playerRes = {\r\n      name: this.context.parentState.playerName,\r\n      vp: getVP(this),\r\n    };\r\n    this.context.updateParent({ results: [playerRes] });\r\n    const { webrtc } = this.context.parentState;\r\n    if (webrtc)\r\n      setTimeout(\r\n        () => webrtc.shout('results', playerRes),\r\n        Math.random() * 1500\r\n      );\r\n  };\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  getRoute = (card) => {\r\n    const { name, set } = card;\r\n    return set ? `set${set}/${name}` : name;\r\n  };\r\n\r\n  hasIllness = (card) => {\r\n    if (!card.attachments) return false;\r\n    return card.attachments.find((item) => item.name === 'Illness');\r\n  };\r\n\r\n  getHealthyMaid = () => {\r\n    const currentMaid = this.state.boughtPrivateMaids[0];\r\n    if (!currentMaid) return null;\r\n    return this.hasIllness(currentMaid) ? null : currentMaid;\r\n  };\r\n\r\n  hasPlayables = () => {\r\n    const { chamberMaids, boughtPrivateMaids } = this.state;\r\n    return [...chamberMaids, boughtPrivateMaids[0] || {}].find((maid) => {\r\n      const illness = this.hasIllness(maid);\r\n      return illness && illness.restric(this.context);\r\n    });\r\n  };\r\n\r\n  getExtra = (card, idx, isPrivate) => {\r\n    const { gameState } = this.context.parentState;\r\n    if (isPrivate && this.state.usadaJoder === 'si') return {};\r\n    if (card.restric && !card.restric(this.context)) return {};\r\n    if (gameState !== 'startPhase') return {};\r\n    if (card.auto || !card.onStart || this.hasIllness(card)) return {};\r\n    return {\r\n      className: 'playable',\r\n      onClick: (e) => {\r\n        e.stopPropagation();\r\n        card.onStart(this, idx, isPrivate);\r\n      },\r\n      onMouseOver: () => this.context.updateImage(this.getRoute(card)),\r\n      onMouseOut: () => this.context.updateImage(null),\r\n    };\r\n  };\r\n\r\n  renderCard = (card, idx) => {\r\n    const { attachments, type } = card;\r\n    const hasAttachments = attachments && attachments[0];\r\n    const topAttachment = hasAttachments && attachments[attachments.length - 1];\r\n    const isPrivate = type === 'privateMaid';\r\n\r\n    return (\r\n      <div style={{ position: 'relative', float: 'left' }}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../../cards/${this.getRoute(card)}.jpg`)}\r\n          {...(this.props.oppName ? {} : this.getExtra(card, idx, isPrivate))}\r\n        />\r\n        {hasAttachments && (\r\n          <img\r\n            alt=\"noseve\"\r\n            src={require(`../../cards/${this.getRoute(topAttachment)}.jpg`)}\r\n            {...(this.props.oppName\r\n              ? {}\r\n              : this.getExtra(topAttachment, idx, isPrivate))}\r\n            style={{\r\n              position: 'absolute',\r\n              top: '0.4vw',\r\n              left: 0,\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { oppName, oppIdx } = this.props;\r\n    const { opponents, gameState } = this.context.parentState;\r\n    const data = oppName ? opponents[oppIdx].data : this.state;\r\n    const { chamberMaids, boughtPrivateMaids } = data;\r\n\r\n    const currentMaid = boughtPrivateMaids[0];\r\n    let displayLimit = currentMaid ? 7 : 8;\r\n    if (oppName) displayLimit = currentMaid ? 3 : 4;\r\n\r\n    const hasMaids =\r\n      currentMaid || chamberMaids.find((maid) => maid.type.includes('maid'));\r\n    let hasBorder = gameState === 'targetChamberMaid' && hasMaids;\r\n    hasBorder = hasBorder || gameState === 'targetEvent';\r\n\r\n    return [\r\n      <div\r\n        className={`${oppName ? 'OppChamber' : 'ChamberZone'} showesModal ${\r\n          hasBorder ? 'selectable' : ''\r\n        }`}\r\n        title={\r\n          oppName\r\n            ? `Habitación Privada de ${oppName}`\r\n            : ' Tu Habitación Privada'\r\n        }\r\n        onClick={this.showModal}\r\n      >\r\n        {currentMaid && this.renderCard(currentMaid)}\r\n        {chamberMaids.map((card, idx, list) => {\r\n          return idx < displayLimit ? this.renderCard(card, idx) : null;\r\n        })}\r\n      </div>,\r\n      <CardDisplayModal\r\n        extraCmp={() => (\r\n          <PrivateMaidsDisplay\r\n            privateMaids={boughtPrivateMaids}\r\n            oppName={oppName}\r\n          />\r\n        )}\r\n        background=\"rgba(0, 190, 0, 0.8)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={chamberMaids}\r\n        oppName={oppName}\r\n        title={\r\n          oppName\r\n            ? `Habitación Privada de ${oppName}`\r\n            : ' Tu Habitación Privada'\r\n        }\r\n        mode=\"chamber\"\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CardDisplayModal from '../../cardDisplayModal/CardDisplayModal';\r\n\r\nexport default class DeckZone extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { show: false };\r\n  }\r\n\r\n  hideModal = () => this.setState({ show: false });\r\n  showModal = () => this.setState({ show: true });\r\n\r\n  render() {\r\n    const { opponents, gameState } = this.context.parentState;\r\n    const { oppName, oppIdx } = this.props;\r\n\r\n    const { discard, deck } = oppName\r\n      ? opponents[oppIdx].data\r\n      : this.context.parentState;\r\n    const deckLength = deck && deck.length;\r\n    const pileName =\r\n      gameState === 'gameEnded' ? 'Cartas Compradas' : 'Descartes';\r\n\r\n    const deckVisible = deckLength === 0 ? 'hidden' : 'visible';\r\n    const discardTop = discard.length > 0 && discard[discard.length - 1];\r\n    const { name, set } = discardTop || {};\r\n    const route = set ? `set${set}/${name}` : name;\r\n\r\n    return [\r\n      <div className={oppName ? 'OppDeck' : 'DeckZone'}>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require('../../cards/cardback.jpg')}\r\n          title={oppName ? `Mazo de ${oppName}` : 'Tu Mazo'}\r\n          style={{ marginBottom: '1.5vh', visibility: deckVisible }}\r\n        />\r\n        {discardTop && (\r\n          <img\r\n            alt=\"noseve\"\r\n            className=\"showesModal\"\r\n            title={oppName ? `${pileName} de ${oppName}` : `Tus ${pileName}`}\r\n            onClick={this.showModal}\r\n            src={require(`../../cards/${route}.jpg`)}\r\n          />\r\n        )}\r\n      </div>,\r\n      <CardDisplayModal\r\n        background=\"rgba(255, 153, 153, 0.9)\"\r\n        showModal={this.state.show}\r\n        hideModal={this.hideModal}\r\n        cards={[...discard].reverse()}\r\n        title={oppName ? `${pileName} de ${oppName}` : `Tus ${pileName}`}\r\n      />,\r\n    ];\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function IconFooter(props) {\r\n  const { data, firstLeft } = props;\r\n  return data.map((item, idx) => {\r\n    return getIconValue(item[0], item[1], firstLeft + idx * 6);\r\n  });\r\n}\r\n\r\nfunction getIconValue(image, value, left) {\r\n  return [\r\n    <div className=\"IconFooter\" style={{ left: `${left}vw` }}>\r\n      <img alt=\"noseve\" src={require(`./icons/${image}`)} />\r\n    </div>,\r\n    <div\r\n      className=\"IconFooter\"\r\n      style={{ backgroundColor: '#ffadd7', left: `${left + 3}vw` }}\r\n    >\r\n      {value || 0}\r\n    </div>,\r\n  ];\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport './MainPlayer.css';\r\n\r\nimport PlayZone from './playerZones/PlayZone';\r\nimport HandZone from './playerZones/handZone/HandZone';\r\nimport ChamberZone from './playerZones/ChamberZone';\r\nimport DeckZone from './playerZones/DeckZone';\r\nimport './playerZones/PlayerZones.css';\r\n\r\nimport IconFooter from './iconFooter/IconFooter';\r\nimport { shuffle, handleAction, checkGameFinish } from '../helpers/actions';\r\n\r\nconst serviceStates = ['cityPick', 'targetEvent', 'targetPlayer'];\r\n\r\nexport default class MainPlayer extends React.Component {\r\n  static childContextTypes = {\r\n    playerState: PropTypes.object,\r\n    updatePlayer: PropTypes.func,\r\n    draw: PropTypes.func,\r\n  };\r\n\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hand: [], playedCards: [], love: 0, servings: 0 };\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      playerState: this.state,\r\n      updatePlayer: (data, cb) => {\r\n        this.setState(data, () => {\r\n          if (typeof cb === 'function') cb();\r\n        });\r\n      },\r\n      draw: this.drawAndReload,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.context.updateParent({\r\n      getInitialHand: () => this.drawCards(5),\r\n      getForcedAction: (data) => handleAction(data, this),\r\n      checkGameFinish: () => checkGameFinish(this),\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { hand, playedCards } = this.state;\r\n    const { webrtc, playerName } = this.context.parentState;\r\n\r\n    if (webrtc && !_.isEqual(hand, prevState.hand)) {\r\n      webrtc.shout('oppUpdate', { name: playerName, data: { hand } });\r\n    }\r\n    if (webrtc && !_.isEqual(playedCards, prevState.playedCards)) {\r\n      webrtc.shout('oppUpdate', { name: playerName, data: { playedCards } });\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps, nextContext) {\r\n    const oldState = this.context.parentState.gameState;\r\n    const newState = nextContext.parentState.gameState;\r\n    if (oldState !== newState) {\r\n      if (newState === 'servingPhase' && !serviceStates.includes(oldState)) {\r\n        this.setState((prevState) => {\r\n          const { servings, contract } = prevState;\r\n          return {\r\n            servings: (servings || 0) + 1,\r\n            contract: (contract || 0) + 1,\r\n          };\r\n        });\r\n      } else if (newState === 'discardPhase') {\r\n        let playedCards = [];\r\n        this.setState((prevState) => {\r\n          playedCards = prevState.playedCards;\r\n          return { contract: 0, love: 0, playedCards: [] };\r\n        });\r\n        this.context.updateParent((prevState) => {\r\n          const discard = [...prevState.discard];\r\n          discard.push(...playedCards);\r\n          return { discard }; // pasar turno\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  drawAndReload = (amount, cb) => {\r\n    this.context.updateParent(\r\n      (prevState) => {\r\n        const { deck, discard } = prevState;\r\n        if (deck.length < amount) {\r\n          return { deck: [...deck, ...shuffle([...discard])], discard: [] };\r\n        }\r\n        return {};\r\n      },\r\n      () => this.drawCards(amount, cb)\r\n    );\r\n  };\r\n\r\n  drawCards = (amount, cb = () => {}) => {\r\n    const { deck, webrtc, playerName } = this.context.parentState;\r\n    const hand = [...deck.splice(0, amount), ...this.state.hand];\r\n    this.setState({ hand }, () => cb(hand));\r\n    this.context.updateParent({ deck }, () => {\r\n      if (webrtc)\r\n        webrtc.shout('oppUpdate', {\r\n          name: playerName,\r\n          data: { deck },\r\n        });\r\n    });\r\n  };\r\n\r\n  getRightFooter = () => {\r\n    const { deck, discard } = this.context.parentState;\r\n    const { hand } = this.state;\r\n    return {\r\n      data: [\r\n        ['deck.png', deck && deck.length],\r\n        ['hand.png', hand && hand.length],\r\n        ['trash.png', discard && discard.length],\r\n      ],\r\n      firstLeft: 57,\r\n    };\r\n  };\r\n\r\n  getLeftFooter = () => {\r\n    const { servings, love, contract } = this.state;\r\n    return {\r\n      data: [\r\n        ['servings.png', servings],\r\n        ['love.png', love],\r\n        ['contract.png', contract],\r\n      ],\r\n      firstLeft: 25,\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { parentState } = this.context;\r\n    const {\r\n      gameState,\r\n      playerClick,\r\n      playerName,\r\n      hasChamberMaids,\r\n      freeChambersToo,\r\n    } = parentState;\r\n    const checkMaids =\r\n      (typeof hasChamberMaids === 'function' && hasChamberMaids()) ||\r\n      freeChambersToo;\r\n    const circleOn = gameState === 'targetPlayer' && playerClick && checkMaids;\r\n    const playerClass = circleOn ? 'selectable' : '';\r\n    const circleClick = circleOn ? playerClick : () => {};\r\n\r\n    return (\r\n      <div className=\"PlayerArea\">\r\n        <div className=\"PlayerTable\">\r\n          <PlayZone />\r\n          <HandZone />\r\n          <ChamberZone />\r\n          <DeckZone />\r\n        </div>\r\n        <span\r\n          className={`PlayerCircle ${playerClass}`}\r\n          onClick={() => {\r\n            circleClick(null);\r\n          }}\r\n        >\r\n          {playerName}\r\n        </span>\r\n        <IconFooter {...this.getRightFooter()} />\r\n        <IconFooter {...this.getLeftFooter()} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './OppZones.css';\r\nimport './playerZones/PlayerZones.css';\r\n\r\nimport PlayZone from './playerZones/PlayZone';\r\nimport ChamberZone from './playerZones/ChamberZone';\r\nimport DeckZone from './playerZones/DeckZone';\r\nimport { checkChamberMaids } from '../helpers/actions';\r\n\r\nexport default class MainPlayer extends React.Component {\r\n  static contextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  getIconStructure = () => {\r\n    const { opponents } = this.context.parentState;\r\n    const { oppIdx } = this.props;\r\n    const { discard, hand, deck } = opponents[oppIdx].data;\r\n    return {\r\n      iconData: [\r\n        ['deck.png', deck ? deck.length : 5],\r\n        ['hand.png', hand ? hand.length : 5],\r\n        ['trash.png', discard && discard.length],\r\n      ],\r\n      firstTop: 3.5,\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { oppIdx } = this.props;\r\n    const { gameState, playerClick, opponents } = this.context.parentState;\r\n\r\n    const checkMaids =\r\n      checkChamberMaids(opponents[oppIdx].data) ||\r\n      this.context.parentState.freeChambersToo;\r\n    const circleOn = gameState === 'targetPlayer' && playerClick && checkMaids;\r\n    const playerClass = circleOn ? 'selectable' : '';\r\n    const circleClick = circleOn ? playerClick : () => {};\r\n\r\n    const { iconData, firstTop } = this.getIconStructure();\r\n    const playedCards = opponents[oppIdx].data.playedCards;\r\n    const oppName = opponents[oppIdx].name;\r\n\r\n    return (\r\n      <div style={{ position: 'relative' }}>\r\n        <div className={`OppTable p${oppIdx + 1}`}>\r\n          <DeckZone oppName={oppName} oppIdx={oppIdx} />\r\n          <div style={{ position: 'absolute' }}>\r\n            <PlayZone oppCards={playedCards} oppName={oppName} />\r\n            <ChamberZone oppName={oppName} oppIdx={oppIdx} />\r\n          </div>\r\n        </div>\r\n        <span\r\n          className={`OppCircle p${oppIdx + 1} ${playerClass}`}\r\n          onClick={() => {\r\n            circleClick(oppName);\r\n          }}\r\n        >\r\n          <span className=\"OppName\">{oppName}</span>\r\n        </span>\r\n        {iconData.map((item, idx) => {\r\n          return [\r\n            <div\r\n              className=\"OppIcons\"\r\n              style={{ top: `${firstTop + idx * 8}vh` }}\r\n            >\r\n              <img\r\n                alt=\"noseve\"\r\n                src={require(`./iconFooter/icons/${item[0]}`)}\r\n              />\r\n            </div>,\r\n            <div\r\n              className=\"OppIcons\"\r\n              style={{\r\n                backgroundColor: 'pink',\r\n                top: `${firstTop + 4 + idx * 8}vh`,\r\n              }}\r\n            >\r\n              {item[1]}\r\n            </div>,\r\n          ];\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Field from './field/Field';\nimport MessageArea from './messageArea/MessageArea';\nimport ImageArea from './imageArea/ImageArea';\nimport MainPlayer from './playerArea/MainPlayer';\nimport OppZones from './playerArea/OppZones';\n\nexport default class MainGame extends React.Component {\n  static contextTypes = {\n    parentState: PropTypes.object,\n  };\n\n  static childContextTypes = {\n    updateImage: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { imageName: null };\n  }\n\n  getChildContext() {\n    return {\n      updateImage: (imageName) => {\n        this.setState({ imageName });\n      },\n    };\n  }\n\n  render() {\n    const { opponents = [] } = this.context.parentState;\n\n    return (\n      <div className=\"App-base\">\n        <span style={{ width: '22vw' }} className=\"mainBlock\">\n          <MessageArea />\n          <ImageArea name={this.state.imageName} />\n        </span>\n        <span style={{ width: '56vw' }} className=\"mainBlock\">\n          <Field />\n          <MainPlayer />\n        </span>\n        <span style={{ width: '22vw' }} className=\"mainBlock\">\n          {opponents.map((foo, idx) => {\n            if (idx >= 3) return null;\n            return <OppZones oppIdx={idx} />;\n          })}\n        </span>\n      </div>\n    );\n  }\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport { defaultStyle } from './defaultStyle';\r\n\r\nimport './SCModal.css';\r\n\r\nexport default function SingleCardModal(props, context) {\r\n  const { overlay, content } = defaultStyle;\r\n  const { showSCModal } = context.parentState;\r\n  const { title, message, yesFunc, noFunc, imgRoute } =\r\n    context.parentState.scModalData || {};\r\n  return (\r\n    <ReactModal\r\n      isOpen={showSCModal}\r\n      style={{\r\n        overlay,\r\n        content: { ...content, background: 'rgba(0, 255, 255, 0.75)' },\r\n      }}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className=\"SCModal\">\r\n        <div className=\"SCtitle \">{title}</div>\r\n        <div className=\"SCmessage\">{message}</div>\r\n        <img\r\n          alt=\"noseve\"\r\n          src={require(`../cards/${imgRoute || '1Love'}.jpg`)}\r\n        />\r\n        <button type=\"button\" style={{ left: '10%' }} onClick={yesFunc}>\r\n          Sí\r\n        </button>\r\n        <button type=\"button\" style={{ left: '80%' }} onClick={noFunc}>\r\n          No\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nSingleCardModal.contextTypes = {\r\n  parentState: PropTypes.object,\r\n  updateParent: PropTypes.func,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactModal from 'react-modal';\r\nimport { defaultStyle } from './defaultStyle';\r\n\r\nimport './ResultsModal.css';\r\n\r\nexport default function SingleCardModal(props, context) {\r\n  const { overlay, content } = defaultStyle;\r\n  const { showResultsModal, results } = context.parentState;\r\n  const colors = ['#ffcc00', 'gray', 'brown', 'white'];\r\n\r\n  return (\r\n    <ReactModal\r\n      isOpen={showResultsModal}\r\n      style={{\r\n        overlay,\r\n        content: {\r\n          ...content,\r\n          background: 'rgba(0, 0, 255, 0.9)',\r\n          left: '31%',\r\n          width: '36vw',\r\n        },\r\n      }}\r\n      onRequestClose={() => context.updateParent({ showResultsModal: false })}\r\n      ariaHideApp={false}\r\n    >\r\n      <div className=\"ResultsModal\">\r\n        <div className=\"ResTitle \">Resultados</div>\r\n        {results.map((item, idx) => {\r\n          return (\r\n            <div className=\"playerRes\">\r\n              <div\r\n                style={{ width: '20%', color: colors[idx], fontSize: '40px' }}\r\n              >\r\n                {idx + 1}\r\n              </div>\r\n              <div style={{ width: '20%' }}>{item.name}</div>\r\n              <div style={{ width: '60%', color: 'pink' }}>{item.vp} VP</div>\r\n            </div>\r\n          );\r\n        })}\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => context.updateParent({ showResultsModal: false })}\r\n        >\r\n          OK\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nSingleCardModal.contextTypes = {\r\n  parentState: PropTypes.object,\r\n  updateParent: PropTypes.func,\r\n};\r\n","export const initialDeck = {\r\n  ColetteFramboise: 3,\r\n  '1Love': 7,\r\n};\r\n\r\nexport const initialOppData = {\r\n  deck: null,\r\n  hand: null,\r\n  discard: [],\r\n  playedCards: [],\r\n  chamberMaids: [],\r\n  boughtPrivateMaids: [],\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport { LioWebRTC } from 'react-liowebrtc';\r\n\r\nimport MainGame from './MainGame';\r\nimport SingleCardModal from './cardDisplayModal/SingleCardModal';\r\nimport ResultsModal from './cardDisplayModal/ResultsModal';\r\nimport { initiateCity } from './field/CityGenerator';\r\nimport { initialDeck, initialOppData } from './initialData.js';\r\nimport { shuffle, attachEvent } from './helpers/actions';\r\n\r\nexport default class ConnexionGame extends React.Component {\r\n  static childContextTypes = {\r\n    parentState: PropTypes.object,\r\n    updateParent: PropTypes.func,\r\n    attachEvent: PropTypes.func,\r\n    updateMessage: PropTypes.func,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      discard: [],\r\n      attachmentsLeft: [],\r\n      mainPlayer: props.mainPlayer,\r\n      playerName: props.playerName,\r\n      opponents: [],\r\n      message: '',\r\n      msgTitle: 'Preparando la partida...',\r\n      showSCModal: false,\r\n      showResultsModal: false,\r\n      results: [],\r\n    };\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      parentState: this.state,\r\n      updateParent: (data, cb) => {\r\n        this.setState(data, () => {\r\n          if (typeof cb === 'function') cb();\r\n        });\r\n      },\r\n      attachEvent: (card, selected) => attachEvent(this, card, selected),\r\n      updateMessage: this.updateMessage,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.mainPlayer) {\r\n      this.setState(initiateCity(), this.getInitialDeck);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { deck, discard, webrtc, playerName } = this.state;\r\n    if (webrtc && !_.isEqual(discard, prevState.discard)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { deck },\r\n      });\r\n    }\r\n    if (webrtc && !_.isEqual(discard, prevState.discard)) {\r\n      webrtc.shout('oppUpdate', {\r\n        name: playerName,\r\n        data: { discard },\r\n      });\r\n    }\r\n  }\r\n\r\n  updateMessage = (message) => {\r\n    const { webrtc } = this.state;\r\n    this.setState({ message });\r\n    if (webrtc) webrtc.shout('msgUpdate', message);\r\n  };\r\n\r\n  getInitialDeck = () => {\r\n    this.setState(\r\n      (prevState) => {\r\n        const newCity = prevState.city.map((card) => {\r\n          return { ...card, selected: initialDeck[card.name] };\r\n        });\r\n        return { city: newCity };\r\n      },\r\n      () => {\r\n        this.setState({ getDeck: 1, sendTo: this.sendToDeck });\r\n      }\r\n    );\r\n  };\r\n\r\n  sendToDeck = (cards) => {\r\n    this.setState(\r\n      { deck: shuffle(cards), gameState: 'gameSetUp' },\r\n      this.state.getInitialHand\r\n    );\r\n  };\r\n\r\n  join = (webrtc) => {\r\n    webrtc.joinRoom('cartasPereTantoCuore_v1');\r\n    this.setState({ webrtc });\r\n  };\r\n\r\n  onJoin = () => {\r\n    const { mainPlayer, playerName, webrtc } = this.state;\r\n    if (!mainPlayer) {\r\n      console.log('saludando');\r\n      setTimeout(() => webrtc.shout('hola', playerName), 3000);\r\n    }\r\n  };\r\n\r\n  getPeerData = (webrtcBad, type, payload, peer) => {\r\n    const { webrtc, city, privateMaids, deck, playerName } = this.state;\r\n    switch (type) {\r\n      case 'hola':\r\n        if (this.state.mainPlayer) {\r\n          (webrtc || webrtcBad).whisper(peer, 'cityUpdate', {\r\n            city,\r\n            privateMaids,\r\n          });\r\n        }\r\n        this.getOpp(peer, payload);\r\n        (webrtc || webrtcBad).whisper(peer, 'queTal', playerName);\r\n        break;\r\n      case 'queTal':\r\n        this.getOpp(peer, payload);\r\n        break;\r\n      case 'turnOrder':\r\n        this.setState({\r\n          msgTitle: `Turno de ${payload[0]}`,\r\n          turnNum: 0,\r\n          turnOrder: payload,\r\n          gameState: payload[0] === playerName ? 'startPhase' : 'opponentTurn',\r\n        });\r\n        break;\r\n      case 'cityUpdate':\r\n        this.setState(\r\n          { city: payload.city, privateMaids: payload.privateMaids },\r\n          () => {\r\n            if (!deck) this.getInitialDeck();\r\n          }\r\n        );\r\n        break;\r\n      case 'oppUpdate':\r\n        this.setState((prevState) => {\r\n          const newOpps = prevState.opponents.slice();\r\n          const oppIdx = prevState.opponents.findIndex(\r\n            (opp) => opp.name === payload.name\r\n          );\r\n          Object.keys(payload.data).forEach((key) => {\r\n            newOpps[oppIdx].data[key] = payload.data[key];\r\n          });\r\n          return { opponents: newOpps };\r\n        });\r\n        break;\r\n      case 'msgUpdate':\r\n        this.setState({ message: payload });\r\n        break;\r\n      case 'passTurn':\r\n        const { turnNum, turnOrder } = this.state;\r\n        const newTurn = turnOrder[(turnNum + 1) % turnOrder.length];\r\n        this.setState(\r\n          {\r\n            msgTitle: `Turno de ${newTurn}`,\r\n            turnNum: turnNum + 1,\r\n            gameState: newTurn === playerName ? 'startPhase' : 'opponentTurn',\r\n          },\r\n          this.state.checkGameFinish\r\n        );\r\n        break;\r\n      case 'sendEvent':\r\n        this.state.getDefend(payload, false);\r\n        break;\r\n      case 'sendAttach':\r\n        this.state.getDefend(payload, true);\r\n        break;\r\n      case 'sendAction':\r\n        this.state.getForcedAction(payload);\r\n        break;\r\n      case 'results':\r\n        this.setState((prevState) => {\r\n          return {\r\n            results: [...prevState.results, payload].sort((a, b) =>\r\n              a.vp > b.vp ? -1 : 1\r\n            ),\r\n          };\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  getOpp = (peer, name) => {\r\n    this.setState((prevState) => {\r\n      const opponents = _.cloneDeep(prevState.opponents);\r\n      opponents.push({ peer, name, data: initialOppData });\r\n      return { opponents };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <LioWebRTC\r\n        options={{ debug: false, dataOnly: true }}\r\n        onReady={this.join}\r\n        onReceivedPeerData={this.getPeerData}\r\n        onJoinedRoom={this.onJoin}\r\n      >\r\n        <MainGame />\r\n        <SingleCardModal />\r\n        <ResultsModal />\r\n      </LioWebRTC>\r\n    );\r\n  }\r\n}\r\n","import { set1Fixed, set1Maids } from '../cardData/set1';\r\nimport { privateMaids } from '../cardData/privateMaids';\r\nimport { love } from '../cardData/love';\r\nimport { shuffle } from '../helpers/actions';\r\n\r\nexport function initiateCity() {\r\n  const privateMaidsDeck = shuffle(privateMaids);\r\n  const city = [\r\n    ...love,\r\n    ...set1Fixed,\r\n    ...shuffle(set1Maids).filter((item, idx) => idx < 10),\r\n    { name: 'cardback', quantity: 8 },\r\n    privateMaidsDeck[0],\r\n    privateMaidsDeck[1],\r\n  ];\r\n  return {\r\n    city,\r\n    privateMaids: privateMaidsDeck.filter((item, idx) => idx >= 2),\r\n  };\r\n}\r\n","import React from 'react';\nimport './App.css';\n\nimport ConnexionGame from './game/ConnexionGame';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { playerName: '' };\n  }\n\n  getGameMenu = () => {\n    return (\n      <div className=\"App-base mainBlock\">\n        <div className=\"menuButton\">\n          <button\n            type=\"button\"\n            style={{ top: '20vh' }}\n            onClick={() => {\n              this.setState({ mainPlayer: true });\n            }}\n          >\n            Crear Partida\n          </button>\n          <button\n            type=\"button\"\n            style={{ top: '60vh' }}\n            onClick={() => {\n              this.setState({ mainPlayer: false });\n            }}\n          >\n            Unirse\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  getNameMenu = () => {\n    return (\n      <div className=\"App-base mainBlock\">\n        <div className=\"nameMenu\">\n          <div className=\"title\">Escribe Tu Nombre</div>\n          <input\n            type=\"text\"\n            value={this.state.playerName}\n            onChange={(e) => {\n              this.setState({ playerName: e.target.value });\n            }}\n          />\n          <button\n            type=\"button\"\n            onClick={() => {\n              if (this.state.playerName.length > 0)\n                this.setState({ start: true });\n            }}\n          >\n            Listos\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { playerName, mainPlayer, start } = this.state;\n    if (typeof mainPlayer === typeof undefined) return this.getGameMenu();\n    if (!start) return this.getNameMenu();\n    return <ConnexionGame playerName={playerName} mainPlayer={mainPlayer} />;\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}